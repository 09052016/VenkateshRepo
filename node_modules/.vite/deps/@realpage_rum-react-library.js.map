{
  "version": 3,
  "sources": ["../../@realpage/rum-react-library/dist/main.js", "../../@realpage/rum-react-library/lib/constants/index.ts", "../../@realpage/rum-react-library/lib/components/RumAppLoaderComponent/index.tsx", "../../@realpage/rum-react-library/lib/contexts/AppLoaderContext.tsx", "../../@realpage/rum-react-library/lib/components/RumAsideComponent/index.tsx", "../../@realpage/rum-react-library/lib/contexts/AsideContext.tsx", "../../@realpage/rum-react-library/lib/components/RumModalComponent/index.tsx", "../../@realpage/rum-react-library/lib/contexts/ModalContext.tsx", "../../@realpage/rum-react-library/lib/components/RumSnackbarComponent/index.tsx", "../../@realpage/rum-react-library/node_modules/nanoid/url-alphabet/index.js", "../../@realpage/rum-react-library/node_modules/nanoid/index.browser.js", "../../@realpage/rum-react-library/lib/contexts/SnackbarContext.tsx", "../../@realpage/rum-react-library/lib/components/RumAppShell/index.tsx", "../../@realpage/rum-react-library/dist/index.module-2d87a26b.js", "../../@realpage/rum-react-library/lib/components/RumPreloader/index.tsx", "../../@realpage/rum-react-library/lib/components/RumContainerLoader/index.tsx", "../../@realpage/rum-react-library/dist/index.module-a3170402.js", "../../@realpage/rum-react-library/lib/services/VesServices.ts", "../../@realpage/rum-react-library/lib/components/RumVesClientDropdown/index.tsx", "../../@realpage/rum-react-library/lib/components/RumVesPropertyDropdown/index.tsx", "../../@realpage/rum-react-library/lib/components/RumContainerLoaderShell/index.tsx", "../../@realpage/rum-react-library/lib/components/RumNoDataSection/index.tsx", "../../@realpage/rum-react-library/lib/components/RumPageHeader/index.tsx", "../../@realpage/rum-react-library/lib/hooks/useApplicationFields.tsx", "../../@realpage/rum-react-library/lib/hooks/useUserData.tsx", "../../@realpage/rum-react-library/lib/services/ApplicationServices.ts", "../../@realpage/rum-react-library/lib/components/RumAuthProvider/OmnibarShell.tsx", "../../@realpage/rum-react-library/lib/components/RumAuthProvider/index.tsx", "../../@realpage/rum-react-library/lib/components/RumFieldTooltip/index.tsx", "../../@realpage/rum-react-library/lib/components/RumFormInputError/index.tsx", "../../@realpage/rum-react-library/lib/components/RumIframePage/index.tsx", "../../@realpage/rum-react-library/lib/components/RumPageNotFound/index.tsx", "../../@realpage/rum-react-library/lib/components/RumUnauthorizedPage/index.tsx", "../../@realpage/rum-react-library/node_modules/lodash-es/_freeGlobal.js", "../../@realpage/rum-react-library/node_modules/lodash-es/_root.js", "../../@realpage/rum-react-library/node_modules/lodash-es/_Symbol.js", "../../@realpage/rum-react-library/node_modules/lodash-es/_getRawTag.js", "../../@realpage/rum-react-library/node_modules/lodash-es/_objectToString.js", "../../@realpage/rum-react-library/node_modules/lodash-es/_baseGetTag.js", "../../@realpage/rum-react-library/node_modules/lodash-es/isObjectLike.js", "../../@realpage/rum-react-library/node_modules/lodash-es/isSymbol.js", "../../@realpage/rum-react-library/node_modules/lodash-es/_trimmedEndIndex.js", "../../@realpage/rum-react-library/node_modules/lodash-es/_baseTrim.js", "../../@realpage/rum-react-library/node_modules/lodash-es/isObject.js", "../../@realpage/rum-react-library/node_modules/lodash-es/toNumber.js", "../../@realpage/rum-react-library/node_modules/lodash-es/now.js", "../../@realpage/rum-react-library/node_modules/lodash-es/debounce.js", "../../@realpage/rum-react-library/lib/hooks/useDebounce.tsx", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/error-logging/stack-trace.js", "../../@realpage/rum-react-library/node_modules/promise-polyfill/src/finally.js", "../../@realpage/rum-react-library/node_modules/promise-polyfill/src/allSettled.js", "../../@realpage/rum-react-library/node_modules/promise-polyfill/src/any.js", "../../@realpage/rum-react-library/node_modules/promise-polyfill/src/index.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/polyfills.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/utils.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/url.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/constants.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/context.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/truncate.js", "../../@realpage/rum-react-library/node_modules/stackframe/stackframe.js", "../../@realpage/rum-react-library/node_modules/error-stack-parser/error-stack-parser.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/error-logging/error-logging.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/queue.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/throttle.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/ndjson.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/navigation/marks.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/compress.js", "../../@realpage/rum-react-library/node_modules/vite-plugin-node-polyfills/shims/process/dist/index.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/state.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/http/response-status.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/http/fetch.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/patching/patch-utils.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/http/xhr.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/apm-server.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/event-handler.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/config-service.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/logging-service.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/service-factory.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/error-logging/index.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/patching/xhr-patch.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/patching/fetch-patch.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/patching/history-patch.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/patching/index.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/performance-monitoring.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/span-base.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/span.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/breakdown.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/transaction.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/metrics/metrics.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/navigation/utils.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/navigation/navigation-timing.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/navigation/user-timing.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/navigation/resource-timing.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/navigation/capture-navigation.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/transaction-service.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/metrics/inp/process.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/metrics/inp/report.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/performance-monitoring/index.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/observers/page-visibility.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/observers/page-clicks.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/common/instrument.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/bootstrap.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum-core/dist/es/index.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum/dist/es/apm-base.js", "../../@realpage/rum-react-library/node_modules/@elastic/apm-rum/dist/es/index.js", "../../@realpage/rum-react-library/lib/utils/InitializeAPM.ts", "../../@realpage/rum-react-library/lib/utils/StopPropagation.ts", "../../@realpage/rum-react-library/lib/utils/CasteHelper.ts", "../../@realpage/rum-react-library/lib/utils/DragAndDropHelper.ts", "../../@realpage/rum-react-library/lib/utils/DateTimeFormatHelper.ts"],
  "sourcesContent": ["import \"./assets/main.css\";\nimport { APPLICATION_NAME as t, APPLICATION_NAME_ID as m, ELK_SERVICE_NAME as p, ELK_SERVICE_URL as a, ELK_SERVICE_VERSION as x, ENVIRONMENT as f, LOGIN_AUTHORITY as n, LOGIN_CLIENT_ID as i, ROOT_PATH as d, RUM_BACK_OFFICE_API_URL as R, VES_API_URL as u } from \"./constants/index.js\";\nimport { RumAppShell as A } from \"./components/RumAppShell/index.js\";\nimport { RumPreloader as P } from \"./components/RumPreloader/index.js\";\nimport { RumContainerLoader as _ } from \"./components/RumContainerLoader/index.js\";\nimport { RumContainerLoaderShell as C } from \"./components/RumContainerLoaderShell/index.js\";\nimport { RumNoDataSection as s } from \"./components/RumNoDataSection/index.js\";\nimport { RumPageHeader as D } from \"./components/RumPageHeader/index.js\";\nimport { RumAuthProvider as O } from \"./components/RumAuthProvider/index.js\";\nimport { RumFieldTooltip as g } from \"./components/RumFieldTooltip/index.js\";\nimport { RumFormInputError as V } from \"./components/RumFormInputError/index.js\";\nimport { RumIframePage as U } from \"./components/RumIframePage/index.js\";\nimport { RumPageNotFound as b } from \"./components/RumPageNotFound/index.js\";\nimport { RumUnauthorizedPage as K } from \"./components/RumUnauthorizedPage/index.js\";\nimport { VesClientDropdown as k } from \"./components/RumVesClientDropdown/index.js\";\nimport { VesPropertyDropdown as z } from \"./components/RumVesPropertyDropdown/index.js\";\nimport { AppLoaderContext as y, AppLoaderProvider as B } from \"./contexts/AppLoaderContext.js\";\nimport { AsideContext as j, AsideProvider as q } from \"./contexts/AsideContext.js\";\nimport { ModalContext as Q, ModalProvider as W } from \"./contexts/ModalContext.js\";\nimport { SnackbarContext as Z, SnackbarProvider as $ } from \"./contexts/SnackbarContext.js\";\nimport { useDebounce as ro } from \"./hooks/useDebounce.js\";\nimport { useApplicationFields as to } from \"./hooks/useApplicationFields.js\";\nimport { useUserData as po } from \"./hooks/useUserData.js\";\nimport { initializeAPM as xo } from \"./utils/InitializeAPM.js\";\nimport { stopPropagation as no } from \"./utils/StopPropagation.js\";\nimport { handleNumberCasting as Ro } from \"./utils/CasteHelper.js\";\nimport { handleDragStart as lo, handleDrop as Ao } from \"./utils/DragAndDropHelper.js\";\nimport { formatDateTimeToLocale as Po, formatDateToLocale as Eo } from \"./utils/DateTimeFormatHelper.js\";\nexport {\n  t as APPLICATION_NAME,\n  m as APPLICATION_NAME_ID,\n  y as AppLoaderContext,\n  B as AppLoaderProvider,\n  j as AsideContext,\n  q as AsideProvider,\n  p as ELK_SERVICE_NAME,\n  a as ELK_SERVICE_URL,\n  x as ELK_SERVICE_VERSION,\n  f as ENVIRONMENT,\n  n as LOGIN_AUTHORITY,\n  i as LOGIN_CLIENT_ID,\n  Q as ModalContext,\n  W as ModalProvider,\n  d as ROOT_PATH,\n  R as RUM_BACK_OFFICE_API_URL,\n  A as RumAppShell,\n  O as RumAuthProvider,\n  _ as RumContainerLoader,\n  C as RumContainerLoaderShell,\n  g as RumFieldTooltip,\n  V as RumFormInputError,\n  U as RumIframePage,\n  s as RumNoDataSection,\n  D as RumPageHeader,\n  b as RumPageNotFound,\n  P as RumPreloader,\n  K as RumUnauthorizedPage,\n  Z as SnackbarContext,\n  $ as SnackbarProvider,\n  u as VES_API_URL,\n  k as VesClientDropdown,\n  z as VesPropertyDropdown,\n  Po as formatDateTimeToLocale,\n  Eo as formatDateToLocale,\n  lo as handleDragStart,\n  Ao as handleDrop,\n  Ro as handleNumberCasting,\n  xo as initializeAPM,\n  no as stopPropagation,\n  to as useApplicationFields,\n  ro as useDebounce,\n  po as useUserData\n};\n//# sourceMappingURL=main.js.map\n", "const APPLICATION_NAME = import.meta.env.VITE_APPLICATION_NAME || 'RUM Starter UI';\r\nconst APPLICATION_NAME_ID = import.meta.env.VITE_APPLICATION_NAME_ID || 'Starter';\r\nconst ENVIRONMENT: string = (import.meta.env.VITE_APPLICATION_ENVIRONMENT || 'DEV').toLocaleLowerCase();\r\nconst ROOT_PATH = `${window.location.protocol}//${window.location.host}`;\r\nconst RUM_BACK_OFFICE_API_URL = import.meta.env.VITE_RUM_BACK_OFFICE_API_URL || 'https://rumsvc-rumbackoffice-dev.realpage.com/v1';\r\nconst VES_API_URL = import.meta.env.VITE_VES_API_URL || 'https://vesapiqa8.realpage.com/api/v1';\r\nconst LOGIN_AUTHORITY = import.meta.env.VITE_LOGIN_AUTHORITY || 'https://www-dev.realpage.com/login/identity';\r\nconst LOGIN_CLIENT_ID = import.meta.env.VITE_LOGIN_CLIENT_ID || 'RumBackOfficeUI';\r\nconst ELK_SERVICE_URL = import.meta.env.VITE_ELK_SERVICE_URL || 'https://rp-central-log.apm.us-east-2.aws.elastic-cloud.com';\r\nconst ELK_SERVICE_NAME = import.meta.env.VITE_ELK_SERVICE_NAME || 'RumStarterUI';\r\nconst ELK_SERVICE_VERSION = import.meta.env.VITE_ELK_SERVICE_VERSION || '0.0.1';\r\n\r\nexport { \r\n    APPLICATION_NAME,\r\n    APPLICATION_NAME_ID,\r\n    ENVIRONMENT, \r\n    ROOT_PATH, \r\n    RUM_BACK_OFFICE_API_URL,\r\n    VES_API_URL,\r\n    LOGIN_AUTHORITY,\r\n    LOGIN_CLIENT_ID,\r\n    ELK_SERVICE_URL,\r\n    ELK_SERVICE_NAME,\r\n    ELK_SERVICE_VERSION,\r\n};\r\n", "import { RaulPageLoader } from '@realpage/react-raul';\r\n\r\ninterface Props {\r\n  isOpen: boolean;\r\n}\r\n\r\nexport const RumAppLoaderComponent = ({ isOpen }: Props) => (\r\n  <>{isOpen && <RaulPageLoader />}</>\r\n);\r\n", "import { ReactNode, createContext, useCallback, useState } from \"react\";\r\n\r\nimport { RumAppLoaderComponent } from \"../components/RumAppLoaderComponent\";\r\n\r\ninterface AppLoaderContext {\r\n  show: () => void;\r\n  hide: () => void;\r\n}\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\nconst AppLoaderContext = createContext<AppLoaderContext>({\r\n  show: () => { },\r\n  hide: () => { },\r\n});\r\n\r\nconst AppLoaderProvider = ({ children }: Props) => {\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const show = useCallback(() => setIsOpen(true), []);\r\n  const hide = useCallback(() => setIsOpen(false), []);\r\n\r\n  return (\r\n    <AppLoaderContext.Provider value={{ show, hide }}>\r\n      {children}\r\n      <RumAppLoaderComponent isOpen={isOpen} />\r\n    </AppLoaderContext.Provider>\r\n  );\r\n};\r\n\r\nexport { AppLoaderProvider, AppLoaderContext };\r\n", "import { RaulAside } from \"@realpage/react-raul\";\r\n\r\ninterface Props {\r\n    isOpen: boolean;\r\n    onClose: () => void;\r\n    size?: \"large\" | \"medium\" | \"small\" | \"xlarge\",\r\n    notDismissible?: boolean,\r\n    asideNodes: React.ReactNode;\r\n}\r\n\r\nexport const RumAsideComponent = ({\r\n    isOpen,\r\n    onClose,\r\n    size,\r\n    notDismissible,\r\n    asideNodes,\r\n}: Props) => (\r\n    <RaulAside\r\n        active={isOpen}\r\n        size={size}\r\n        notDismissible={notDismissible}\r\n        onRaulAsideClose={onClose}\r\n    >\r\n        {asideNodes}\r\n    </RaulAside>\r\n);\r\n", "import { ReactNode, createContext, useCallback, useState } from \"react\";\r\n\r\nimport { RumAsideComponent } from \"../components/RumAsideComponent\";\r\n\r\ninterface AsideContext {\r\n  addAside: (aside: AsideObj) => void;\r\n  removeAside: () => void;\r\n}\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\ninterface AsideObj {\r\n  size?: \"large\" | \"medium\" | \"small\" | \"xlarge\";\r\n  notDismissible?: boolean;\r\n  asideNodes: ReactNode;\r\n}\r\n\r\nconst AsideContext = createContext<AsideContext>({\r\n  addAside: (_aside: AsideObj) => { },\r\n  removeAside: () => { },\r\n});\r\n\r\nconst AsideProvider = ({ children }: Props) => {\r\n  const [aside, setAside] = useState<AsideObj | null>(null);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const addAside = useCallback((aside: AsideObj) => {\r\n    setAside(aside);\r\n    setTimeout(() => setIsOpen(true), 10);\r\n  }, []);\r\n\r\n  const removeAside = useCallback(() => setIsOpen(false), []);\r\n\r\n  return (\r\n    <AsideContext.Provider value={{ addAside, removeAside }}>\r\n      {children}\r\n      {aside ? (\r\n        <RumAsideComponent\r\n          asideNodes={aside.asideNodes}\r\n          size={aside.size}\r\n          notDismissible={aside.notDismissible}\r\n          isOpen={isOpen}\r\n          onClose={() => setAside(null)}\r\n        />\r\n      ) : null}\r\n    </AsideContext.Provider>\r\n  );\r\n};\r\n\r\nexport { AsideProvider, AsideContext };\r\n", "import { RaulModal } from \"@realpage/react-raul\";\r\n\r\ninterface Props {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  modalNodes: React.ReactNode;\r\n}\r\n\r\nexport const RumModalComponent = ({\r\n  isOpen,\r\n  onClose,\r\n  modalNodes,\r\n}: Props) => (\r\n  <RaulModal active={isOpen} onModalclose={onClose}>\r\n    {modalNodes}\r\n  </RaulModal>\r\n);\r\n", "import { ReactNode, createContext, useCallback, useState } from \"react\";\r\n\r\nimport { RumModalComponent } from \"../components/RumModalComponent\";\r\n\r\ninterface ModalContext {\r\n  addModal: (modalNodes: ReactNode) => void;\r\n  removeModal: () => void;\r\n}\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\nconst ModalContext = createContext<ModalContext>({\r\n  addModal: (_modalNodes: ReactNode) => { },\r\n  removeModal: () => { },\r\n});\r\n\r\nconst ModalProvider = ({ children }: Props) => {\r\n  const [modal, setModal] = useState<ReactNode | null>(null);\r\n  const [isOpen, setIsOpen] = useState(false);\r\n\r\n  const addModal = useCallback(\r\n    (modalNodes: ReactNode) => {\r\n      setModal(modalNodes);\r\n      setIsOpen(true);\r\n    },\r\n    [setModal]\r\n  );\r\n\r\n  const removeModal = useCallback(() => {\r\n    setIsOpen(false);\r\n  }, [setModal]);\r\n\r\n  return (\r\n    <ModalContext.Provider value={{ addModal, removeModal }}>\r\n      {children}\r\n      {modal ? (\r\n        <RumModalComponent\r\n          modalNodes={modal}\r\n          isOpen={isOpen}\r\n          onClose={() => setModal(null)}\r\n        />\r\n      ) : null}\r\n    </ModalContext.Provider>\r\n  );\r\n};\r\n\r\nexport { ModalProvider, ModalContext };\r\n", "import { RaulSnackbar } from '@realpage/react-raul';\r\nimport { RaulStatusVariant } from '@realpage/raul-library';\r\n\r\ninterface Props {\r\n  variant?: RaulStatusVariant | undefined;\r\n  heading?: string | undefined;\r\n  content?: string | undefined;\r\n  timeout?: number | undefined;\r\n  dismissible?: boolean;\r\n}\r\n\r\nexport const RumSnackbarComponent = ({\r\n  variant,\r\n  heading,\r\n  content,\r\n  timeout,\r\n  dismissible = true,\r\n}: Props) => (\r\n  <RaulSnackbar\r\n    variant={variant}\r\n    heading={heading}\r\n    content={content}\r\n    timeout={timeout}\r\n    dismissible={dismissible}\r\n  />\r\n);\r\n", "export const urlAlphabet =\n  'useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict'\n", "import { urlAlphabet as scopedUrlAlphabet } from './url-alphabet/index.js'\nexport { urlAlphabet } from './url-alphabet/index.js'\nexport let random = bytes => crypto.getRandomValues(new Uint8Array(bytes))\nexport let customRandom = (alphabet, defaultSize, getRandom) => {\n  let mask = (2 << (Math.log(alphabet.length - 1) / Math.LN2)) - 1\n  let step = -~((1.6 * mask * defaultSize) / alphabet.length)\n  return (size = defaultSize) => {\n    let id = ''\n    while (true) {\n      let bytes = getRandom(step)\n      let j = step\n      while (j--) {\n        id += alphabet[bytes[j] & mask] || ''\n        if (id.length === size) return id\n      }\n    }\n  }\n}\nexport let customAlphabet = (alphabet, size = 21) =>\n  customRandom(alphabet, size, random)\nexport let nanoid = (size = 21) => {\n  let id = ''\n  let bytes = crypto.getRandomValues(new Uint8Array(size))\n  while (size--) {\n    id += scopedUrlAlphabet[bytes[size] & 63]\n  }\n  return id\n}\n", "import { ReactNode, createContext, useCallback, useState } from \"react\";\r\nimport { RaulSnackbarGroup } from \"@realpage/react-raul\";\r\nimport { RaulStatusVariant } from '@realpage/raul-library';\r\nimport { nanoid } from 'nanoid'\r\n\r\nimport { RumSnackbarComponent } from \"../components/RumSnackbarComponent\";\r\n\r\ninterface SnackbarContext {\r\n  show: (snackbar: SnackbarObj) => void;\r\n}\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\ninterface SnackbarObj {\r\n  id?: string,\r\n  variant?: RaulStatusVariant | undefined;\r\n  heading?: string | undefined;\r\n  content?: string | undefined;\r\n  timeout?: number | undefined;\r\n  dismissible?: boolean;\r\n}\r\n\r\nconst SnackbarContext = createContext<SnackbarContext>({\r\n  show: (_snackbar: SnackbarObj) => { },\r\n});\r\n\r\nconst SnackbarProvider = ({ children }: Props) => {\r\n  const [snackbarStack, setSnackbarStack] = useState<SnackbarObj[]>([]);\r\n\r\n  const show = useCallback((snackbar: SnackbarObj) => {\r\n    setSnackbarStack((state) => [...state, {\r\n      ...snackbar,\r\n      id: nanoid()\r\n    }]);\r\n  }, []);\r\n\r\n  return (\r\n    <SnackbarContext.Provider value={{ show }}>\r\n      {children}\r\n      <RaulSnackbarGroup>\r\n        {snackbarStack.map(item =>\r\n          <RumSnackbarComponent\r\n            key={item.id}\r\n            {...item}\r\n          />\r\n        )}\r\n      </RaulSnackbarGroup>\r\n    </SnackbarContext.Provider>\r\n  );\r\n};\r\n\r\nexport { SnackbarProvider, SnackbarContext };\r\n", "import { ReactNode } from 'react';\r\n\r\nimport {\r\n  AppLoaderProvider,\r\n  AsideProvider,\r\n  ModalProvider,\r\n  SnackbarProvider\r\n} from '../../contexts';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n}\r\n\r\nexport const RumAppShell = ({\r\n  children\r\n}: Props) => {\r\n  return (\r\n    <AppLoaderProvider>\r\n      <SnackbarProvider>\r\n        <ModalProvider>\r\n          <AsideProvider>\r\n            {children}\r\n          </AsideProvider>\r\n        </ModalProvider>\r\n      </SnackbarProvider>\r\n    </AppLoaderProvider>\r\n  );\r\n};", "import \"./assets/index.css\";\nconst e = \"_preloader_ll0ae_1\", s = \"_spin_ll0ae_1\", o = {\n  preloader: e,\n  spin: s\n};\nexport {\n  o as s\n};\n//# sourceMappingURL=index.module-2d87a26b.js.map\n", "import styles from './index.module.scss';\r\n\r\nexport const RumPreloader = () => (\r\n  <div className={styles.preloader}></div>\r\n);", "import { RaulContainerLoader } from '@realpage/react-raul';\r\n\r\nimport './index.scss'\r\n\r\ninterface Props {\r\n  small?: boolean;\r\n}\r\n\r\nexport const RumContainerLoader = ({ small = false }: Props) => (\r\n  <span>\r\n    <RaulContainerLoader className={`containerLoader ${small && 'small'}`} />\r\n  </span>\r\n);", "import \"./assets/index2.css\";\nconst s = \"_iframe_5mbgt_1\", e = {\n  iframe: s\n};\nexport {\n  e as s\n};\n//# sourceMappingURL=index.module-a3170402.js.map\n", "import axios from '../axios';\r\n\r\nimport { Client, Property } from '../models';\r\nimport { VES_API_URL } from '../constants';\r\n\r\nconst getClients = (): Promise<Client[]> => {\r\n  return axios.get(`${VES_API_URL}/Setup/VesPmcs`).then(response => response.data);\r\n};\r\n\r\nconst getPropertiesByVesSitePmcId = (vesPmcId: number): Promise<Property[]> => {\r\n  return axios.get(`${VES_API_URL}/Setup/VesSites/${vesPmcId}`).then(response => response.data);\r\n}\r\n\r\nexport {\r\n  getClients,\r\n  getPropertiesByVesSitePmcId\r\n};\r\n", "import { forwardRef, useContext, useEffect, useImperativeHandle, useState } from 'react';\r\nimport { RaulDropdown, RaulDropdownItem, RaulDropdownSearchInput } from \"@realpage/react-raul\";\r\n\r\nimport { Client } from '../../models';\r\nimport { SnackbarContext } from '../../contexts';\r\nimport { getClients } from '../../services/VesServices';\r\nimport { RumContainerLoader } from '../RumContainerLoader';\r\n\r\nexport type VesClientDropdownHandle = {\r\n  getClients: () => Promise<Client[]>;\r\n};\r\n\r\ninterface VesClientDropdownState {\r\n  clientsList: Client[];\r\n  selectedClientId?: number;\r\n  filteredClients: Client[];\r\n};\r\n\r\ninterface Props {\r\n  label: string;\r\n  value?: number;\r\n  placeholderText?: string;\r\n  enableSearch?: boolean;\r\n  searchPlaceholderText?: string;\r\n  enableClearButton?: boolean;\r\n  disabled?: boolean;\r\n  onChange?: (selectedClientId?: number) => void;\r\n}\r\n\r\nexport const VesClientDropdown = forwardRef<VesClientDropdownHandle, Props>((\r\n  {\r\n    label,\r\n    value,\r\n    placeholderText,\r\n    enableSearch = false,\r\n    searchPlaceholderText = 'Search...',\r\n    enableClearButton = false,\r\n    disabled = false,\r\n    onChange = () => { }\r\n  }: Props, ref) => {\r\n  const snackbar = useContext(SnackbarContext);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [state, setState] = useState<VesClientDropdownState>({\r\n    clientsList: [],\r\n    filteredClients: []\r\n  });\r\n\r\n  const handleSearch = ({ detail }: CustomEvent) => {\r\n    const { query } = detail;\r\n    const results = (query !== '' ? state.clientsList.filter(item =>\r\n      item.Value.toLowerCase().includes(query.toLowerCase())\r\n    ) : state.clientsList);\r\n    setState(oldState => ({\r\n      ...oldState,\r\n      filteredClients: results\r\n    }));\r\n  }\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    getClients: () => {\r\n      setLoading(true);\r\n      return getClients()\r\n        .then(response => {\r\n          setState({\r\n            selectedClientId: value,\r\n            clientsList: response,\r\n            filteredClients: response\r\n          })\r\n          return response;\r\n        })\r\n        .catch((error) => {\r\n          snackbar.show({\r\n            heading: 'Clients Error',\r\n            content: error,\r\n            timeout: 3000\r\n          })\r\n          return [];\r\n        })\r\n        .finally(() =>\r\n          setLoading(false)\r\n        );\r\n    }\r\n  }));\r\n\r\n  useEffect(() => {\r\n    setState(oldState => ({\r\n      ...oldState,\r\n      selectedClientId: value,\r\n    }))\r\n  }, [value])\r\n\r\n  return (\r\n    <RaulDropdown\r\n      label={label}\r\n      placeholderText={placeholderText}\r\n      value={state.selectedClientId?.toString()}\r\n      disabled={disabled || loading}\r\n      onRaulChange={(evt: any) => {\r\n        const value = parseInt(evt.target.value);\r\n        setState(oldState => ({\r\n          ...oldState,\r\n          selectedClientId: value\r\n        }));\r\n        onChange(value);\r\n      }}\r\n    >\r\n      {loading &&\r\n        <div\r\n          slot=\"label-end\"\r\n          className=\"r-ml-2\"\r\n          aria-label=\"Loading\"\r\n        >\r\n          <RumContainerLoader small={true} />\r\n        </div>\r\n      }\r\n      {enableSearch && <RaulDropdownSearchInput\r\n        slot=\"search-input\"\r\n        placeholderText={searchPlaceholderText}\r\n        onRaulDropdownSearchInput={evt => handleSearch(evt)}\r\n      />}\r\n      {state.filteredClients.map(({ Key, Value }) => (\r\n        <RaulDropdownItem\r\n          key={Key}\r\n          text={Value}\r\n          value={Key.toString()}\r\n        />\r\n      ))}\r\n      {enableClearButton &&\r\n        <button\r\n          slot=\"menu-footer\"\r\n          type=\"button\"\r\n          data-clear\r\n        >Clear</button>\r\n      }\r\n    </RaulDropdown>\r\n  );\r\n});", "import { forwardRef, useContext, useEffect, useImperativeHandle, useState } from 'react';\r\nimport { RaulDropdown, RaulDropdownItem, RaulDropdownSearchInput } from \"@realpage/react-raul\";\r\n\r\nimport { Property } from '../../models';\r\nimport { SnackbarContext } from '../../contexts';\r\nimport { getPropertiesByVesSitePmcId } from '../../services';\r\nimport { RumContainerLoader } from '../RumContainerLoader';\r\n\r\nexport type VesPropertyDropdownHandle = {\r\n  getProperties: (vesPmcId: number) => Promise<Property[]>;\r\n};\r\n\r\ninterface VesPropertyDropdownState {\r\n  propertiesList: Property[];\r\n  selectedPropertyId?: number;\r\n  filteredProperties: Property[];\r\n};\r\n\r\ninterface Props {\r\n  label: string;\r\n  value?: number;\r\n  placeholderText?: string;\r\n  enableSearch?: boolean;\r\n  searchPlaceholderText?: string;\r\n  enableClearButton?: boolean;\r\n  disabled?: boolean;\r\n  onChange?: (propertyId?: number) => void;\r\n}\r\n\r\nexport const VesPropertyDropdown = forwardRef<VesPropertyDropdownHandle, Props>((\r\n  {\r\n    label,\r\n    value,\r\n    placeholderText,\r\n    enableSearch = false,\r\n    searchPlaceholderText = 'Search...',\r\n    enableClearButton = false,\r\n    disabled = false,\r\n    onChange = () => { }\r\n  }: Props, ref) => {\r\n  const snackbar = useContext(SnackbarContext);\r\n  const [loading, setLoading] = useState<boolean>(false);\r\n  const [state, setState] = useState<VesPropertyDropdownState>({\r\n    propertiesList: [],\r\n    filteredProperties: []\r\n  });\r\n\r\n  const handleSearch = ({ detail }: CustomEvent) => {\r\n    const { query } = detail;\r\n    const results = (query !== '' ? state.propertiesList.filter(item =>\r\n      item.SiteName.toLowerCase().includes(query.toLowerCase())\r\n    ) : state.propertiesList);\r\n    setState(oldState => ({\r\n      ...oldState,\r\n      filteredProperties: results\r\n    }));\r\n  }\r\n\r\n  useImperativeHandle(ref, () => ({\r\n    getProperties: (vesPmcId: number) => {\r\n      setLoading(true);\r\n      return getPropertiesByVesSitePmcId(vesPmcId)\r\n        .then(response => {\r\n          setState({\r\n            selectedPropertyId: value,\r\n            propertiesList: response,\r\n            filteredProperties: response\r\n          })\r\n          return response;\r\n        })\r\n        .catch((error) => {\r\n          snackbar.show({\r\n            heading: 'Properties Error',\r\n            content: error,\r\n            timeout: 3000\r\n          })\r\n          return [];\r\n        })\r\n        .finally(() =>\r\n          setLoading(false)\r\n        );\r\n    }\r\n  }));\r\n\r\n  useEffect(() => {\r\n    setState(oldState => ({\r\n      ...oldState,\r\n      selectedPropertyId: value,\r\n    }))\r\n  }, [value])\r\n\r\n  return (\r\n    <RaulDropdown\r\n      label={label}\r\n      placeholderText={placeholderText}\r\n      value={state.selectedPropertyId?.toString()}\r\n      disabled={disabled || loading}\r\n      onRaulChange={(evt: any) => {\r\n        const value = parseInt(evt.target.value);\r\n        setState(oldState => ({\r\n          ...oldState,\r\n          selectedPropertyId: value\r\n        }));\r\n        onChange(value);\r\n      }}\r\n    >\r\n      {loading &&\r\n        <div\r\n          slot=\"label-end\"\r\n          className=\"r-ml-2\"\r\n          aria-label=\"Loading\"\r\n        >\r\n          <RumContainerLoader small={true} />\r\n        </div>\r\n      }\r\n      {enableSearch && <RaulDropdownSearchInput\r\n        slot=\"search-input\"\r\n        placeholderText={searchPlaceholderText}\r\n        onRaulDropdownSearchInput={evt => handleSearch(evt)}\r\n      />}\r\n      {state.filteredProperties.map(({ VesSiteId, SiteName }) => (\r\n        <RaulDropdownItem\r\n          key={VesSiteId}\r\n          text={SiteName}\r\n          value={VesSiteId.toString()}\r\n        />\r\n      ))}\r\n      {enableClearButton &&\r\n        <button\r\n          slot=\"menu-footer\"\r\n          type=\"button\"\r\n          data-clear\r\n        >Clear</button>}\r\n    </RaulDropdown>\r\n  );\r\n});", "import { ReactNode } from 'react';\r\n\r\nimport './index.scss'\r\nimport { RumContainerLoader } from '..';\r\n\r\ninterface Props {\r\n  loading: boolean;\r\n  children: ReactNode;\r\n}\r\n\r\nexport const RumContainerLoaderShell = ({\r\n  loading,\r\n  children\r\n}: Props) => {\r\n  return (loading ? <RumContainerLoader /> : children)\r\n};", "import { RaulButton } from '@realpage/react-raul';\r\n\r\nexport interface Props {\r\n  title: string;\r\n  description?: string;\r\n  showImage?: boolean;\r\n  actionLabel?: string;\r\n  action?: () => void;\r\n}\r\n\r\nexport const RumNoDataSection = ({\r\n  title,\r\n  description,\r\n  showImage = true,\r\n  actionLabel,\r\n  action\r\n}: Props) => {\r\n  return (\r\n    <div className=\"r-flex r-flex-col r-items-center r-justify-center\">\r\n      <div className=\"r-w-full r-flex r-flex-col\">\r\n        {showImage && <div className=\"r-mb-4\">\r\n          <img\r\n            className=\"r-object-cover r-block r-m-auto\"\r\n            src=\"https://cdn.realpage.com/images/illustrations/generic.svg\"\r\n          />\r\n        </div>}\r\n        <div className=\"r-p-4 r-flex r-flex-col r-justify-center r-items-center\">\r\n          <span className=\"r-inline-block r-text-xl r-font-bold r-text-center\">{title}</span>\r\n          {description && (\r\n            <span className=\"r-inline-block r-text-md r-text-center r-opacity-80 r-mb-4\">{description}</span>\r\n          )}\r\n          {action && (\r\n            <RaulButton variant=\"primary\" onClick={action}>\r\n              {actionLabel}\r\n            </RaulButton>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};", "import { RaulBreadcrumb, RaulBreadcrumbs, RaulEyebrow } from '@realpage/react-raul';\r\nimport { Link } from 'react-router-dom';\r\n\r\ninterface Props {\r\n  title: string;\r\n  description?: string;\r\n  breadcrumbs?: BreadcrumbItem[];\r\n  headerActions?: React.ReactNode;\r\n  tabs?: React.ReactNode;\r\n  tabsPane?: React.ReactNode;\r\n}\r\n\r\ninterface BreadcrumbItem {\r\n  path?: string;\r\n  text: string;\r\n}\r\n\r\nexport const RumPageHeader = ({ \r\n  title, \r\n  description, \r\n  breadcrumbs = [], \r\n  headerActions, \r\n  tabs, \r\n  tabsPane \r\n}: Props) => {\r\n  return (\r\n    <>\r\n      <div className=\"r-px-4 md:r-px-10 r-pt-6 r-bg-gray-lightest r-border-b r-border-gray-light\">\r\n        <RaulBreadcrumbs>\r\n          {breadcrumbs.length ? (\r\n            breadcrumbs.map(({ path, text }: BreadcrumbItem, i) => (\r\n              <RaulBreadcrumb key={`crumb${i}`}>\r\n                {path ? <Link to={path}>{text}</Link> : text}\r\n              </RaulBreadcrumb>\r\n            ))\r\n          ) : (\r\n            <RaulEyebrow />\r\n          )}\r\n        </RaulBreadcrumbs>\r\n        <div className=\"r-flex r-justify-between r-flex-wrap r-items-start md:r-items-end r-mt-3 r-mb-6\">\r\n          <div className=\"r-flex r-flex-col r-flex-no-wrap\">\r\n            <h1 className=\"r-text-xl r-font-bold r-leading-none\">{title}</h1>\r\n            {description && <p>{description}</p>}\r\n          </div>\r\n          {headerActions && <div className=\"r-w-full md:r-w-auto r-flex r-gap-x-5\">{headerActions}</div>}\r\n        </div>\r\n        {tabs}\r\n      </div>\r\n      {tabsPane}\r\n    </>\r\n  );\r\n};", "import { ApplicationField } from \"../models\";\r\n\r\ninterface ApplicationFieldContext {\r\n    setFieldsData: (data: ApplicationField[]) => void;\r\n    getFieldData: (fieldId: string) => ApplicationField | undefined;\r\n}\r\n\r\nlet fieldsData: ApplicationField[] = [];\r\n\r\nexport const useApplicationFields = (): ApplicationFieldContext => {\r\n    const setFieldsData = (data: ApplicationField[]) => {\r\n        fieldsData = data;\r\n    };\r\n\r\n    const getFieldData = (fieldId: string) => {\r\n        return fieldsData.find(item => item.fieldId === fieldId);\r\n    }\r\n\r\n    return {\r\n        getFieldData,\r\n        setFieldsData,\r\n    };\r\n}", "import { UserData } from \"../models\";\r\n\r\ninterface UserDataContext {\r\n    userData: UserData | undefined;\r\n    setUserData: (data: UserData, userName: string, contentId: string) => void;\r\n}\r\n\r\nlet userData: UserData;\r\n\r\nexport const useUserData = (): UserDataContext => {\r\n    const setUserData = (data: UserData, userName: string, contentId: string) => {\r\n        userData = { ...data, userName, contentId };\r\n    };\r\n\r\n    return { userData, setUserData };\r\n}", "import axios from '../axios';\r\nimport { RUM_BACK_OFFICE_API_URL } from '../constants';\r\nimport { ApplicationField } from '../models';\r\n\r\nconst getApplicationToken = (applicationNameId: string, authHeaders: any) => {\r\n  return axios.get(`${RUM_BACK_OFFICE_API_URL}/user/authenticate`, {\r\n    params: { \r\n      applicationName: applicationNameId \r\n    },\r\n    headers: authHeaders\r\n  });\r\n};\r\n\r\nconst getApplicationFields = (applicationNameId: string): Promise<ApplicationField[]> => {\r\n  return axios.get(`${RUM_BACK_OFFICE_API_URL}/application/applicationFieldSetting`, {\r\n    params: { \r\n      applicationName: applicationNameId \r\n    },\r\n  }).then(response => response.data);\r\n};\r\n\r\nexport {\r\n  getApplicationToken,\r\n  getApplicationFields,\r\n}\r\n", "import { useEffect, useRef } from 'react';\r\nimport { createSearchParams, useNavigate } from 'react-router-dom';\r\nimport { AuthContextProps } from 'react-oidc-context';\r\n\r\nimport { APPLICATION_NAME, ENVIRONMENT, ROOT_PATH } from '../../constants';\r\nimport { OmnibarMenuItem } from '../../models';\r\n\r\ninterface Props {\r\n  authContext: AuthContextProps;\r\n  menuItems?: OmnibarMenuItem[];\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const OmnibarShell = ({ authContext, menuItems, children }: Props) => {\r\n  const userProfile = authContext.user?.profile;\r\n  const navigate = useNavigate();\r\n  const shellRef = useRef<any>(null);\r\n  const navRef = useRef<any>(null);\r\n\r\n  const isUrlValid = (url: string) => {\r\n    try {\r\n      new URL(url);\r\n      return true;\r\n    } catch (err) {\r\n      return false;\r\n    }\r\n  };\r\n\r\n  const handleNavigate = (e: CustomEvent) => {\r\n    //e.preventDefault();\r\n    const item: OmnibarMenuItem = e.detail;\r\n    shellRef.current.pageId = item.url;\r\n    if (item.url) {\r\n      if (isUrlValid(item.url)) {\r\n        if (item.showInIframe) {\r\n          navigate({\r\n            pathname: \"iframe\",\r\n            search: createSearchParams({\r\n              frameinfo: Buffer.from(item.url).toString('base64')\r\n            }).toString()\r\n          });\r\n        } else {\r\n          window.open(item.url, '_blank');\r\n        }\r\n      } else {\r\n        navigate(item.url);\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleLogout = () => {\r\n    authContext.signoutRedirect();\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (shellRef.current) {\r\n      shellRef.current.pageId = window.location.pathname;\r\n      shellRef.current.addEventListener('omnibarLogout', handleLogout);\r\n    }\r\n\r\n    if (menuItems) {\r\n      if (navRef.current) {\r\n        navRef.current.items = menuItems;\r\n        navRef.current.addEventListener('navigate', handleNavigate);\r\n      }\r\n    }\r\n\r\n    return () => {\r\n      if (shellRef.current) {\r\n        shellRef.current?.removeEventListener(\"omnibarLogout\", handleLogout);\r\n      }\r\n      if (navRef.current) {\r\n        navRef.current?.removeEventListener(\"navigate\", handleNavigate);\r\n      }\r\n    };\r\n  }, [menuItems]);\r\n\r\n  return (\r\n    menuItems ?\r\n      <omnibar-shell\r\n        ref={shellRef}\r\n        environment={ENVIRONMENT}\r\n        is-unified-login={false}\r\n        logout-url={ROOT_PATH}\r\n        follow-logout-href={false}\r\n      >\r\n        <omnibar-scope\r\n          slot=\"scope\"\r\n          product={APPLICATION_NAME}\r\n        />\r\n\r\n        <omnibar-navigation\r\n          ref={navRef}\r\n          follow-href={false}\r\n          slot=\"navigation\"\r\n        />\r\n\r\n        <omnibar-unified-menu\r\n          slot=\"unified-menu\"\r\n          user-name={`${userProfile?.firstName} ${userProfile?.lastName}`}\r\n        >\r\n          <omnibar-unified-switcher slot=\"switcher\" />\r\n          {/* <omnibar-unified-help slot=\"help\" help-query={helpQuery} /> */}\r\n          <omnibar-unified-notifications slot=\"notifications\" />\r\n        </omnibar-unified-menu>\r\n\r\n        <main slot=\"page\">{children}</main>\r\n      </omnibar-shell> :\r\n      <main slot=\"page\">{children}</main>\r\n  );\r\n};\r\n", "import { ReactNode, useEffect, useState } from 'react';\r\nimport { useNavigate, useSearchParams } from 'react-router-dom';\r\nimport { AuthContextProps } from 'react-oidc-context';\r\nimport { RaulContainerLoader } from '@realpage/react-raul';\r\n\r\nimport { setAuthToken } from '../../axios';\r\nimport { OmnibarMenuItem } from '../../models';\r\nimport { APPLICATION_NAME_ID } from '../../constants';\r\nimport { useApplicationFields, useUserData } from '../../hooks';\r\nimport { getApplicationFields, getApplicationToken } from '../../services';\r\nimport { OmnibarShell } from './OmnibarShell';\r\n\r\ninterface Props {\r\n  authContext: AuthContextProps;\r\n  menuItems?: OmnibarMenuItem[];\r\n  children: ReactNode;\r\n  onLoad?: () => void;\r\n}\r\n\r\nexport const RumAuthProvider = ({\r\n  authContext,\r\n  menuItems,\r\n  children,\r\n  onLoad = () => { },\r\n}: Props) => {\r\n  const { setUserData } = useUserData();\r\n  const { setFieldsData } = useApplicationFields();\r\n  const navigate = useNavigate();\r\n  const [searchParams] = useSearchParams();\r\n  const [isLoading, setIsLoading] = useState<boolean>(true);\r\n\r\n  const checkOidcLoginState = () => {\r\n    const queryToken = searchParams.get('token');\r\n\r\n    if (authContext.isAuthenticated || queryToken) {\r\n      const token = queryToken || authContext.user?.access_token;\r\n      const microQueryString = searchParams.get('microQueryString')\r\n\r\n      getApplicationToken(APPLICATION_NAME_ID, {\r\n        token,\r\n        Username: searchParams.get('userName'),\r\n        'Content-Id': searchParams.get('contentId'),\r\n        microQueryString,\r\n        'Content-Id-Hex': searchParams.get('contentIdHex'),\r\n      })\r\n        .then(async response => {\r\n          const userName = response.headers['username'];\r\n          const contentId = response.headers['content-id'];\r\n          setUserData(response.data, userName, contentId);\r\n          setAuthToken(response.data, userName, contentId);\r\n          onLoad();\r\n          if (APPLICATION_NAME_ID) {\r\n            await getApplicationFields(APPLICATION_NAME_ID)\r\n              .then(data => setFieldsData(data))\r\n              .catch(error => console.log(error));\r\n          }\r\n          if (queryToken) {\r\n            if (microQueryString) {\r\n              const queryParams = microQueryString.split('|').filter(item => item).join('&');\r\n              navigate(`${window.location.pathname}?${queryParams}`);\r\n            } else {\r\n              searchParams.delete('token');\r\n              searchParams.get('userName');\r\n              searchParams.get('contentId')\r\n              const queryParams = searchParams.toString();\r\n              navigate(`${window.location.pathname}?${queryParams}`);\r\n            }\r\n          }\r\n        })\r\n        .catch(() => {\r\n          navigate('/unauthorized')\r\n        })\r\n        .finally(() => setIsLoading(false));\r\n    } else {\r\n      authContext.signinRedirect({\r\n        state: window.location.href\r\n      });\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    // the `return` is important - addAccessTokenExpiring() returns a cleanup function\r\n    return authContext.events.addAccessTokenExpiring(() => {\r\n      authContext.signinSilent();\r\n    })\r\n  }, [authContext.events, authContext.signinSilent]);\r\n\r\n  useEffect(() => {\r\n    if (!authContext.isLoading) {\r\n      checkOidcLoginState();\r\n    }\r\n  }, [authContext]);\r\n\r\n  return (\r\n    <>\r\n      {authContext.isLoading || isLoading ? (\r\n        <RaulContainerLoader />\r\n      ) : (\r\n        <OmnibarShell\r\n          authContext={authContext}\r\n          menuItems={menuItems}\r\n        >\r\n          {children}\r\n        </OmnibarShell>\r\n      )}\r\n    </>\r\n  );\r\n};", "import { RaulIcon, RaulTooltip } from \"@realpage/react-raul\";\r\n\r\nimport { useApplicationFields } from \"../../hooks\";\r\n\r\ninterface Props extends React.HTMLAttributes<HTMLDivElement> {\r\n  fieldId: string;\r\n  placement?: \"top\"\r\n  | \"start-top\"\r\n  | \"end-top\"\r\n  | \"right\"\r\n  | \"left\"\r\n  | \"bottom\"\r\n  | \"start-bottom\"\r\n  | \"end-bottom\";\r\n}\r\n\r\nexport const RumFieldTooltip = ({\r\n  fieldId,\r\n  placement = 'top',\r\n  className,\r\n  slot,\r\n}: Props) => {\r\n  const appFieldsRef = useApplicationFields();\r\n\r\n  return (\r\n    <>\r\n      {fieldId &&\r\n        <RaulTooltip\r\n          className={className}\r\n          text={appFieldsRef.getFieldData(fieldId)?.fieldDescription}\r\n          placement={placement}\r\n          slot={slot}\r\n        >\r\n          <RaulIcon icon=\"interface-information\" />\r\n        </RaulTooltip>\r\n      }\r\n    </>\r\n  );\r\n};", "import { RaulInputHelperList, RaulInputHelperListItem } from \"@realpage/react-raul\";\r\n\r\ninterface Props {\r\n  touched?: boolean;\r\n  error?: string;\r\n}\r\n\r\nexport const RumFormInputError = ({ touched, error }: Props) => {\r\n  return (\r\n    <RaulInputHelperList slot=\"messaging\">\r\n      {error && touched && (\r\n        <RaulInputHelperListItem variant=\"destructive\">\r\n          {error}\r\n        </RaulInputHelperListItem>\r\n      )}\r\n    </RaulInputHelperList>\r\n  );\r\n}", "import { useSearchParams } from 'react-router-dom';\r\n\r\nimport styles from './index.module.scss';\r\n\r\nexport const RumIframePage = () => {\r\n  const [searchParams] = useSearchParams();\r\n  const frameInfo = searchParams.get('frameinfo');\r\n  const iframUrl = Buffer.from(frameInfo || '', 'base64').toString('ascii');\r\n\r\n  //window.history.replaceState({}, document.title, window.location.origin + window.location.pathname);\r\n\r\n  return (\r\n    <iframe src={iframUrl} className={styles.iframe}></iframe>\r\n  );\r\n};\r\n", "import { useNavigate } from 'react-router-dom';\r\nimport { RaulButton } from '@realpage/react-raul';\r\n\r\nexport const RumPageNotFound = () => {\r\n  const navigate = useNavigate();\r\n\r\n  return (\r\n    <div className=\"r-flex r-flex-col r-items-center r-justify-center r-h-screen\">\r\n      <div className=\"r-w-full r-flex r-flex-col\">\r\n        <div className=\"r-mb-4\">\r\n          <img\r\n            className=\"r-object-cover r-block r-m-auto\"\r\n            src=\"https://cdn.realpage.com/images/illustrations/error_401.svg\"\r\n          />\r\n        </div>\r\n        <div className=\"r-p-4 r-flex r-flex-col r-justify-center r-items-center\">\r\n          <span className=\"r-inline-block r-text-xl r-font-bold r-text-center\">\r\n            The page you are looking for cannot be found.\r\n          </span>\r\n          <span className=\"r-inline-block r-text-md r-text-center r-opacity-80 r-mb-4\">\r\n            No worries. Try checking your URL or returning to the previous page.\r\n          </span>\r\n          <RaulButton variant=\"primary\" onClick={() => navigate(-1)}>\r\n            Go Back\r\n          </RaulButton>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};", "import { RaulButton } from '@realpage/react-raul';\r\n\r\nimport { ROOT_PATH } from '../../constants';\r\n\r\nexport const RumUnauthorizedPage = () => {\r\n  return (\r\n    <div className=\"r-flex r-flex-col r-items-center r-justify-center r-h-screen\">\r\n      <div className=\"r-w-full r-flex r-flex-col\">\r\n        <div className=\"r-mb-4\">\r\n          <img\r\n            className=\"r-object-cover r-block r-m-auto\"\r\n            src=\"https://cdn.realpage.com/images/illustrations/error_501.svg\"\r\n          />\r\n        </div>\r\n        <div className=\"r-p-4 r-flex r-flex-col r-justify-center r-items-center\">\r\n          <span className=\"r-inline-block r-text-xl r-font-bold r-text-center\">\r\n            You do not have permissions to view this page.\r\n          </span>\r\n          <span className=\"r-inline-block r-text-md r-text-center r-opacity-80 r-mb-4\">\r\n            If you feel there is an error, contact your System Administrator.\r\n          </span>\r\n          <RaulButton variant=\"primary\" onClick={() => window.location.replace(ROOT_PATH)}>\r\n            Go Home\r\n          </RaulButton>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};", "/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n", "import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n", "import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n", "import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n", "/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n", "import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n", "/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n", "import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n", "/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n", "import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n", "/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n", "import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n", "import root from './_root.js';\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\nexport default now;\n", "import isObject from './isObject.js';\nimport now from './now.js';\nimport toNumber from './toNumber.js';\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        timeWaiting = wait - timeSinceLastCall;\n\n    return maxing\n      ? nativeMin(timeWaiting, maxWait - timeSinceLastInvoke)\n      : timeWaiting;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        clearTimeout(timerId);\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\nexport default debounce;\n", "import { useEffect, useRef, useMemo } from 'react';\r\nimport { debounce } from 'lodash-es';\r\n\r\nexport const useDebounce = (\r\n  callback: () => void,\r\n  timeout: number = 1000\r\n) => {\r\n  const ref = useRef<any>();\r\n\r\n  useEffect(() => {\r\n    ref.current = callback;\r\n  }, [callback]);\r\n\r\n  const debouncedCallback = useMemo(() => {\r\n    const func = () => {\r\n      ref.current?.();\r\n    };\r\n\r\n    return debounce(func, timeout);\r\n  }, []);\r\n\r\n  return debouncedCallback;\r\n};\r\n", "function filePathToFileName(fileUrl) {\n  var origin = window.location.origin || window.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\n\n  if (fileUrl.indexOf(origin) > -1) {\n    fileUrl = fileUrl.replace(origin + '/', '');\n  }\n\n  return fileUrl;\n}\n\nfunction cleanFilePath(filePath) {\n  if (filePath === void 0) {\n    filePath = '';\n  }\n\n  if (filePath === '<anonymous>') {\n    filePath = '';\n  }\n\n  return filePath;\n}\n\nfunction isFileInline(fileUrl) {\n  if (fileUrl) {\n    return window.location.href.indexOf(fileUrl) === 0;\n  }\n\n  return false;\n}\n\nfunction normalizeStackFrames(stackFrames) {\n  return stackFrames.map(function (frame) {\n    if (frame.functionName) {\n      frame.functionName = normalizeFunctionName(frame.functionName);\n    }\n\n    return frame;\n  });\n}\n\nfunction normalizeFunctionName(fnName) {\n  var parts = fnName.split('/');\n\n  if (parts.length > 1) {\n    fnName = ['Object', parts[parts.length - 1]].join('.');\n  } else {\n    fnName = parts[0];\n  }\n\n  fnName = fnName.replace(/.<$/gi, '.<anonymous>');\n  fnName = fnName.replace(/^Anonymous function$/, '<anonymous>');\n  parts = fnName.split('.');\n\n  if (parts.length > 1) {\n    fnName = parts[parts.length - 1];\n  } else {\n    fnName = parts[0];\n  }\n\n  return fnName;\n}\n\nfunction isValidStackTrace(stackTraces) {\n  if (stackTraces.length === 0) {\n    return false;\n  }\n\n  if (stackTraces.length === 1) {\n    var stackTrace = stackTraces[0];\n    return 'lineNumber' in stackTrace;\n  }\n\n  return true;\n}\n\nexport function createStackTraces(stackParser, errorEvent) {\n  var error = errorEvent.error,\n      filename = errorEvent.filename,\n      lineno = errorEvent.lineno,\n      colno = errorEvent.colno;\n  var stackTraces = [];\n\n  if (error) {\n    try {\n      stackTraces = stackParser.parse(error);\n    } catch (e) {}\n  }\n\n  if (!isValidStackTrace(stackTraces)) {\n    stackTraces = [{\n      fileName: filename,\n      lineNumber: lineno,\n      columnNumber: colno\n    }];\n  }\n\n  var normalizedStackTraces = normalizeStackFrames(stackTraces);\n  return normalizedStackTraces.map(function (stack) {\n    var fileName = stack.fileName,\n        lineNumber = stack.lineNumber,\n        columnNumber = stack.columnNumber,\n        _stack$functionName = stack.functionName,\n        functionName = _stack$functionName === void 0 ? '<anonymous>' : _stack$functionName;\n\n    if (!fileName && !lineNumber) {\n      return {};\n    }\n\n    if (!columnNumber && !lineNumber) {\n      return {};\n    }\n\n    var filePath = cleanFilePath(fileName);\n    var cleanedFileName = filePathToFileName(filePath);\n\n    if (isFileInline(filePath)) {\n      cleanedFileName = '(inline script)';\n    }\n\n    return {\n      abs_path: fileName,\n      filename: cleanedFileName,\n      function: functionName,\n      lineno: lineNumber,\n      colno: columnNumber\n    };\n  });\n}\nexport function filterInvalidFrames(frames) {\n  return frames.filter(function (_ref) {\n    var filename = _ref.filename,\n        lineno = _ref.lineno;\n    return typeof filename !== 'undefined' && typeof lineno !== 'undefined';\n  });\n}", "/**\n * @this {Promise}\n */\nfunction finallyConstructor(callback) {\n  var constructor = this.constructor;\n  return this.then(\n    function(value) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        return value;\n      });\n    },\n    function(reason) {\n      // @ts-ignore\n      return constructor.resolve(callback()).then(function() {\n        // @ts-ignore\n        return constructor.reject(reason);\n      });\n    }\n  );\n}\n\nexport default finallyConstructor;\n", "function allSettled(arr) {\n  var P = this;\n  return new P(function(resolve, reject) {\n    if (!(arr && typeof arr.length !== 'undefined')) {\n      return reject(\n        new TypeError(\n          typeof arr +\n            ' ' +\n            arr +\n            ' is not iterable(cannot read property Symbol(Symbol.iterator))'\n        )\n      );\n    }\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      if (val && (typeof val === 'object' || typeof val === 'function')) {\n        var then = val.then;\n        if (typeof then === 'function') {\n          then.call(\n            val,\n            function(val) {\n              res(i, val);\n            },\n            function(e) {\n              args[i] = { status: 'rejected', reason: e };\n              if (--remaining === 0) {\n                resolve(args);\n              }\n            }\n          );\n          return;\n        }\n      }\n      args[i] = { status: 'fulfilled', value: val };\n      if (--remaining === 0) {\n        resolve(args);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n}\n\nexport default allSettled;\n", "/**\n * @constructor\n */\nfunction AggregateError(errors, message) {\n  (this.name = 'AggregateError'), (this.errors = errors);\n  this.message = message || '';\n}\nAggregateError.prototype = Error.prototype;\n\nfunction any(arr) {\n  var P = this;\n  return new P(function(resolve, reject) {\n    if (!(arr && typeof arr.length !== 'undefined')) {\n      return reject(new TypeError('Promise.any accepts an array'));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return reject();\n\n    var rejectionReasons = [];\n    for (var i = 0; i < args.length; i++) {\n      try {\n        P.resolve(args[i])\n          .then(resolve)\n          .catch(function(error) {\n            rejectionReasons.push(error);\n            if (rejectionReasons.length === args.length) {\n              reject(\n                new AggregateError(\n                  rejectionReasons,\n                  'All promises were rejected'\n                )\n              );\n            }\n          });\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n  });\n}\n\nexport default any;\n", "import promiseFinally from './finally';\nimport allSettled from './allSettled';\nimport any from './any';\n\n// Store setTimeout reference so promise-polyfill will be unaffected by\n// other code modifying setTimeout (like sinon.useFakeTimers())\nvar setTimeoutFunc = setTimeout;\n\nfunction isArray(x) {\n  return Boolean(x && typeof x.length !== 'undefined');\n}\n\nfunction noop() {}\n\n// Polyfill for Function.prototype.bind\nfunction bind(fn, thisArg) {\n  return function() {\n    fn.apply(thisArg, arguments);\n  };\n}\n\n/**\n * @constructor\n * @param {Function} fn\n */\nfunction Promise(fn) {\n  if (!(this instanceof Promise))\n    throw new TypeError('Promises must be constructed via new');\n  if (typeof fn !== 'function') throw new TypeError('not a function');\n  /** @type {!number} */\n  this._state = 0;\n  /** @type {!boolean} */\n  this._handled = false;\n  /** @type {Promise|undefined} */\n  this._value = undefined;\n  /** @type {!Array<!Function>} */\n  this._deferreds = [];\n\n  doResolve(fn, this);\n}\n\nfunction handle(self, deferred) {\n  while (self._state === 3) {\n    self = self._value;\n  }\n  if (self._state === 0) {\n    self._deferreds.push(deferred);\n    return;\n  }\n  self._handled = true;\n  Promise._immediateFn(function() {\n    var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;\n    if (cb === null) {\n      (self._state === 1 ? resolve : reject)(deferred.promise, self._value);\n      return;\n    }\n    var ret;\n    try {\n      ret = cb(self._value);\n    } catch (e) {\n      reject(deferred.promise, e);\n      return;\n    }\n    resolve(deferred.promise, ret);\n  });\n}\n\nfunction resolve(self, newValue) {\n  try {\n    // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure\n    if (newValue === self)\n      throw new TypeError('A promise cannot be resolved with itself.');\n    if (\n      newValue &&\n      (typeof newValue === 'object' || typeof newValue === 'function')\n    ) {\n      var then = newValue.then;\n      if (newValue instanceof Promise) {\n        self._state = 3;\n        self._value = newValue;\n        finale(self);\n        return;\n      } else if (typeof then === 'function') {\n        doResolve(bind(then, newValue), self);\n        return;\n      }\n    }\n    self._state = 1;\n    self._value = newValue;\n    finale(self);\n  } catch (e) {\n    reject(self, e);\n  }\n}\n\nfunction reject(self, newValue) {\n  self._state = 2;\n  self._value = newValue;\n  finale(self);\n}\n\nfunction finale(self) {\n  if (self._state === 2 && self._deferreds.length === 0) {\n    Promise._immediateFn(function() {\n      if (!self._handled) {\n        Promise._unhandledRejectionFn(self._value);\n      }\n    });\n  }\n\n  for (var i = 0, len = self._deferreds.length; i < len; i++) {\n    handle(self, self._deferreds[i]);\n  }\n  self._deferreds = null;\n}\n\n/**\n * @constructor\n */\nfunction Handler(onFulfilled, onRejected, promise) {\n  this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;\n  this.onRejected = typeof onRejected === 'function' ? onRejected : null;\n  this.promise = promise;\n}\n\n/**\n * Take a potentially misbehaving resolver function and make sure\n * onFulfilled and onRejected are only called once.\n *\n * Makes no guarantees about asynchrony.\n */\nfunction doResolve(fn, self) {\n  var done = false;\n  try {\n    fn(\n      function(value) {\n        if (done) return;\n        done = true;\n        resolve(self, value);\n      },\n      function(reason) {\n        if (done) return;\n        done = true;\n        reject(self, reason);\n      }\n    );\n  } catch (ex) {\n    if (done) return;\n    done = true;\n    reject(self, ex);\n  }\n}\n\nPromise.prototype['catch'] = function(onRejected) {\n  return this.then(null, onRejected);\n};\n\nPromise.prototype.then = function(onFulfilled, onRejected) {\n  // @ts-ignore\n  var prom = new this.constructor(noop);\n\n  handle(this, new Handler(onFulfilled, onRejected, prom));\n  return prom;\n};\n\nPromise.prototype['finally'] = promiseFinally;\n\nPromise.all = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.all accepts an array'));\n    }\n\n    var args = Array.prototype.slice.call(arr);\n    if (args.length === 0) return resolve([]);\n    var remaining = args.length;\n\n    function res(i, val) {\n      try {\n        if (val && (typeof val === 'object' || typeof val === 'function')) {\n          var then = val.then;\n          if (typeof then === 'function') {\n            then.call(\n              val,\n              function(val) {\n                res(i, val);\n              },\n              reject\n            );\n            return;\n          }\n        }\n        args[i] = val;\n        if (--remaining === 0) {\n          resolve(args);\n        }\n      } catch (ex) {\n        reject(ex);\n      }\n    }\n\n    for (var i = 0; i < args.length; i++) {\n      res(i, args[i]);\n    }\n  });\n};\n\nPromise.any = any;\n\nPromise.allSettled = allSettled;\n\nPromise.resolve = function(value) {\n  if (value && typeof value === 'object' && value.constructor === Promise) {\n    return value;\n  }\n\n  return new Promise(function(resolve) {\n    resolve(value);\n  });\n};\n\nPromise.reject = function(value) {\n  return new Promise(function(resolve, reject) {\n    reject(value);\n  });\n};\n\nPromise.race = function(arr) {\n  return new Promise(function(resolve, reject) {\n    if (!isArray(arr)) {\n      return reject(new TypeError('Promise.race accepts an array'));\n    }\n\n    for (var i = 0, len = arr.length; i < len; i++) {\n      Promise.resolve(arr[i]).then(resolve, reject);\n    }\n  });\n};\n\n// Use polyfill for setImmediate for performance gains\nPromise._immediateFn =\n  // @ts-ignore\n  (typeof setImmediate === 'function' &&\n    function(fn) {\n      // @ts-ignore\n      setImmediate(fn);\n    }) ||\n  function(fn) {\n    setTimeoutFunc(fn, 0);\n  };\n\nPromise._unhandledRejectionFn = function _unhandledRejectionFn(err) {\n  if (typeof console !== 'undefined' && console) {\n    console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console\n  }\n};\n\nexport default Promise;\n", "import PromisePollyfill from 'promise-polyfill';\nimport { isBrowser } from './utils';\nvar local = {};\n\nif (isBrowser) {\n  local = window;\n} else if (typeof self !== 'undefined') {\n  local = self;\n}\n\nvar Promise = 'Promise' in local ? local.Promise : PromisePollyfill;\nexport { Promise };", "import { Promise } from './polyfills';\nvar slice = [].slice;\nvar isBrowser = typeof window !== 'undefined';\nvar PERF = isBrowser && typeof performance !== 'undefined' ? performance : {};\n\nfunction isCORSSupported() {\n  var xhr = new window.XMLHttpRequest();\n  return 'withCredentials' in xhr;\n}\n\nvar byteToHex = [];\n\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToHex(buffer) {\n  var hexOctets = [];\n\n  for (var _i = 0; _i < buffer.length; _i++) {\n    hexOctets.push(byteToHex[buffer[_i]]);\n  }\n\n  return hexOctets.join('');\n}\n\nvar destination = new Uint8Array(16);\n\nfunction rng() {\n  if (typeof crypto != 'undefined' && typeof crypto.getRandomValues == 'function') {\n    return crypto.getRandomValues(destination);\n  } else if (typeof msCrypto != 'undefined' && typeof msCrypto.getRandomValues == 'function') {\n    return msCrypto.getRandomValues(destination);\n  }\n\n  return destination;\n}\n\nfunction generateRandomId(length) {\n  var id = bytesToHex(rng());\n  return id.substr(0, length);\n}\n\nfunction getDtHeaderValue(span) {\n  var dtVersion = '00';\n  var dtUnSampledFlags = '00';\n  var dtSampledFlags = '01';\n\n  if (span && span.traceId && span.id && span.parentId) {\n    var flags = span.sampled ? dtSampledFlags : dtUnSampledFlags;\n    var id = span.sampled ? span.id : span.parentId;\n    return dtVersion + '-' + span.traceId + '-' + id + '-' + flags;\n  }\n}\n\nfunction parseDtHeaderValue(value) {\n  var parsed = /^([\\da-f]{2})-([\\da-f]{32})-([\\da-f]{16})-([\\da-f]{2})$/.exec(value);\n\n  if (parsed) {\n    var flags = parsed[4];\n    var sampled = flags !== '00';\n    return {\n      traceId: parsed[2],\n      id: parsed[3],\n      sampled: sampled\n    };\n  }\n}\n\nfunction isDtHeaderValid(header) {\n  return /^[\\da-f]{2}-[\\da-f]{32}-[\\da-f]{16}-[\\da-f]{2}$/.test(header) && header.slice(3, 35) !== '00000000000000000000000000000000' && header.slice(36, 52) !== '0000000000000000';\n}\n\nfunction getTSHeaderValue(_ref) {\n  var sampleRate = _ref.sampleRate;\n\n  if (typeof sampleRate !== 'number' || String(sampleRate).length > 256) {\n    return;\n  }\n\n  var NAMESPACE = 'es';\n  var SEPARATOR = '=';\n  return \"\" + NAMESPACE + SEPARATOR + \"s:\" + sampleRate;\n}\n\nfunction setRequestHeader(target, name, value) {\n  if (typeof target.setRequestHeader === 'function') {\n    target.setRequestHeader(name, value);\n  } else if (target.headers && typeof target.headers.append === 'function') {\n    target.headers.append(name, value);\n  } else {\n    target[name] = value;\n  }\n}\n\nfunction checkSameOrigin(source, target) {\n  var isSame = false;\n\n  if (typeof target === 'string') {\n    isSame = source === target;\n  } else if (target && typeof target.test === 'function') {\n    isSame = target.test(source);\n  } else if (Array.isArray(target)) {\n    target.forEach(function (t) {\n      if (!isSame) {\n        isSame = checkSameOrigin(source, t);\n      }\n    });\n  }\n\n  return isSame;\n}\n\nfunction isPlatformSupported() {\n  return isBrowser && typeof Set === 'function' && typeof JSON.stringify === 'function' && PERF && typeof PERF.now === 'function' && isCORSSupported();\n}\n\nfunction setLabel(key, value, obj) {\n  if (!obj || !key) return;\n  var skey = removeInvalidChars(key);\n  var valueType = typeof value;\n\n  if (value != undefined && valueType !== 'boolean' && valueType !== 'number') {\n    value = String(value);\n  }\n\n  obj[skey] = value;\n  return obj;\n}\n\nfunction getServerTimingInfo(serverTimingEntries) {\n  if (serverTimingEntries === void 0) {\n    serverTimingEntries = [];\n  }\n\n  var serverTimingInfo = [];\n  var entrySeparator = ', ';\n  var valueSeparator = ';';\n\n  for (var _i2 = 0; _i2 < serverTimingEntries.length; _i2++) {\n    var _serverTimingEntries$ = serverTimingEntries[_i2],\n        name = _serverTimingEntries$.name,\n        duration = _serverTimingEntries$.duration,\n        description = _serverTimingEntries$.description;\n    var timingValue = name;\n\n    if (description) {\n      timingValue += valueSeparator + 'desc=' + description;\n    }\n\n    if (duration) {\n      timingValue += valueSeparator + 'dur=' + duration;\n    }\n\n    serverTimingInfo.push(timingValue);\n  }\n\n  return serverTimingInfo.join(entrySeparator);\n}\n\nfunction getTimeOrigin() {\n  return PERF.timing.fetchStart;\n}\n\nfunction stripQueryStringFromUrl(url) {\n  return url && url.split('?')[0];\n}\n\nfunction isObject(value) {\n  return value !== null && typeof value === 'object';\n}\n\nfunction isFunction(value) {\n  return typeof value === 'function';\n}\n\nfunction baseExtend(dst, objs, deep) {\n  for (var i = 0, ii = objs.length; i < ii; ++i) {\n    var obj = objs[i];\n    if (!isObject(obj) && !isFunction(obj)) continue;\n    var keys = Object.keys(obj);\n\n    for (var j = 0, jj = keys.length; j < jj; j++) {\n      var key = keys[j];\n      var src = obj[key];\n\n      if (deep && isObject(src)) {\n        if (!isObject(dst[key])) dst[key] = Array.isArray(src) ? [] : {};\n        baseExtend(dst[key], [src], false);\n      } else {\n        dst[key] = src;\n      }\n    }\n  }\n\n  return dst;\n}\n\nfunction getElasticScript() {\n  if (typeof document !== 'undefined') {\n    var scripts = document.getElementsByTagName('script');\n\n    for (var i = 0, l = scripts.length; i < l; i++) {\n      var sc = scripts[i];\n\n      if (sc.src.indexOf('elastic') > 0) {\n        return sc;\n      }\n    }\n  }\n}\n\nfunction getCurrentScript() {\n  if (typeof document !== 'undefined') {\n    var currentScript = document.currentScript;\n\n    if (!currentScript) {\n      return getElasticScript();\n    }\n\n    return currentScript;\n  }\n}\n\nfunction extend(dst) {\n  return baseExtend(dst, slice.call(arguments, 1), false);\n}\n\nfunction merge(dst) {\n  return baseExtend(dst, slice.call(arguments, 1), true);\n}\n\nfunction isUndefined(obj) {\n  return typeof obj === 'undefined';\n}\n\nfunction noop() {}\n\nfunction find(array, predicate, thisArg) {\n  if (array == null) {\n    throw new TypeError('array is null or not defined');\n  }\n\n  var o = Object(array);\n  var len = o.length >>> 0;\n\n  if (typeof predicate !== 'function') {\n    throw new TypeError('predicate must be a function');\n  }\n\n  var k = 0;\n\n  while (k < len) {\n    var kValue = o[k];\n\n    if (predicate.call(thisArg, kValue, k, o)) {\n      return kValue;\n    }\n\n    k++;\n  }\n\n  return undefined;\n}\n\nfunction removeInvalidChars(key) {\n  return key.replace(/[.*\"]/g, '_');\n}\n\nfunction getLatestSpan(spans, typeFilter) {\n  var latestSpan = null;\n\n  for (var _i3 = 0; _i3 < spans.length; _i3++) {\n    var span = spans[_i3];\n\n    if (typeFilter && typeFilter(span.type) && (!latestSpan || latestSpan._end < span._end)) {\n      latestSpan = span;\n    }\n  }\n\n  return latestSpan;\n}\n\nfunction getLatestNonXHRSpan(spans) {\n  return getLatestSpan(spans, function (type) {\n    return String(type).indexOf('external') === -1;\n  });\n}\n\nfunction getLatestXHRSpan(spans) {\n  return getLatestSpan(spans, function (type) {\n    return String(type).indexOf('external') !== -1;\n  });\n}\n\nfunction getEarliestSpan(spans) {\n  var earliestSpan = spans[0];\n\n  for (var _i4 = 1; _i4 < spans.length; _i4++) {\n    var span = spans[_i4];\n\n    if (earliestSpan._start > span._start) {\n      earliestSpan = span;\n    }\n  }\n\n  return earliestSpan;\n}\n\nfunction now() {\n  return PERF.now();\n}\n\nfunction getTime(time) {\n  return typeof time === 'number' && time >= 0 ? time : now();\n}\n\nfunction getDuration(start, end) {\n  if (isUndefined(end) || isUndefined(start)) {\n    return null;\n  }\n\n  return parseInt(end - start);\n}\n\nfunction scheduleMacroTask(callback) {\n  setTimeout(callback, 0);\n}\n\nfunction scheduleMicroTask(callback) {\n  Promise.resolve().then(callback);\n}\n\nfunction isPerfTimelineSupported() {\n  return typeof PERF.getEntriesByType === 'function';\n}\n\nfunction isPerfTypeSupported(type) {\n  return typeof PerformanceObserver !== 'undefined' && PerformanceObserver.supportedEntryTypes && PerformanceObserver.supportedEntryTypes.indexOf(type) >= 0;\n}\n\nfunction isPerfInteractionCountSupported() {\n  return 'interactionCount' in performance;\n}\n\nfunction isBeaconInspectionEnabled() {\n  var flagName = '_elastic_inspect_beacon_';\n\n  if (sessionStorage.getItem(flagName) != null) {\n    return true;\n  }\n\n  if (!window.URL || !window.URLSearchParams) {\n    return false;\n  }\n\n  try {\n    var parsedUrl = new URL(window.location.href);\n    var isFlagSet = parsedUrl.searchParams.has(flagName);\n\n    if (isFlagSet) {\n      sessionStorage.setItem(flagName, true);\n    }\n\n    return isFlagSet;\n  } catch (e) {}\n\n  return false;\n}\n\nfunction isRedirectInfoAvailable(timing) {\n  return timing.redirectStart > 0;\n}\n\nexport { extend, merge, isUndefined, noop, baseExtend, bytesToHex, isCORSSupported, isObject, isFunction, isPlatformSupported, isDtHeaderValid, parseDtHeaderValue, getServerTimingInfo, getDtHeaderValue, getTSHeaderValue, getCurrentScript, getElasticScript, getTimeOrigin, generateRandomId, getEarliestSpan, getLatestNonXHRSpan, getLatestXHRSpan, getDuration, getTime, now, rng, checkSameOrigin, scheduleMacroTask, scheduleMicroTask, setLabel, setRequestHeader, stripQueryStringFromUrl, find, removeInvalidChars, PERF, isPerfTimelineSupported, isBrowser, isPerfTypeSupported, isPerfInteractionCountSupported, isBeaconInspectionEnabled, isRedirectInfoAvailable };", "import { isBrowser } from './utils';\n\nfunction isDefaultPort(port, protocol) {\n  switch (protocol) {\n    case 'http:':\n      return port === '80';\n\n    case 'https:':\n      return port === '443';\n  }\n\n  return true;\n}\n\nvar RULES = [['#', 'hash'], ['?', 'query'], ['/', 'path'], ['@', 'auth', 1], [NaN, 'host', undefined, 1]];\nvar PROTOCOL_REGEX = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\S\\s]*)/i;\nexport var Url = function () {\n  function Url(url) {\n    var _this$extractProtocol = this.extractProtocol(url || ''),\n        protocol = _this$extractProtocol.protocol,\n        address = _this$extractProtocol.address,\n        slashes = _this$extractProtocol.slashes;\n\n    var relative = !protocol && !slashes;\n    var location = this.getLocation();\n    var instructions = RULES.slice();\n    address = address.replace('\\\\', '/');\n\n    if (!slashes) {\n      instructions[2] = [NaN, 'path'];\n    }\n\n    var index;\n\n    for (var i = 0; i < instructions.length; i++) {\n      var instruction = instructions[i];\n      var parse = instruction[0];\n      var key = instruction[1];\n\n      if (typeof parse === 'string') {\n        index = address.indexOf(parse);\n\n        if (~index) {\n          var instLength = instruction[2];\n\n          if (instLength) {\n            var newIndex = address.lastIndexOf(parse);\n            index = Math.max(index, newIndex);\n            this[key] = address.slice(0, index);\n            address = address.slice(index + instLength);\n          } else {\n            this[key] = address.slice(index);\n            address = address.slice(0, index);\n          }\n        }\n      } else {\n        this[key] = address;\n        address = '';\n      }\n\n      this[key] = this[key] || (relative && instruction[3] ? location[key] || '' : '');\n      if (instruction[3]) this[key] = this[key].toLowerCase();\n    }\n\n    if (relative && this.path.charAt(0) !== '/') {\n      this.path = '/' + this.path;\n    }\n\n    this.relative = relative;\n    this.protocol = protocol || location.protocol;\n    this.hostname = this.host;\n    this.port = '';\n\n    if (/:\\d+$/.test(this.host)) {\n      var value = this.host.split(':');\n      var port = value.pop();\n      var hostname = value.join(':');\n\n      if (isDefaultPort(port, this.protocol)) {\n        this.host = hostname;\n      } else {\n        this.port = port;\n      }\n\n      this.hostname = hostname;\n    }\n\n    this.origin = this.protocol && this.host && this.protocol !== 'file:' ? this.protocol + '//' + this.host : 'null';\n    this.href = this.toString();\n  }\n\n  var _proto = Url.prototype;\n\n  _proto.toString = function toString() {\n    var result = this.protocol;\n    result += '//';\n\n    if (this.auth) {\n      var REDACTED = '[REDACTED]';\n      var userpass = this.auth.split(':');\n      var username = userpass[0] ? REDACTED : '';\n      var password = userpass[1] ? ':' + REDACTED : '';\n      result += username + password + '@';\n    }\n\n    result += this.host;\n    result += this.path;\n    result += this.query;\n    result += this.hash;\n    return result;\n  };\n\n  _proto.getLocation = function getLocation() {\n    var globalVar = {};\n\n    if (isBrowser) {\n      globalVar = window;\n    }\n\n    return globalVar.location;\n  };\n\n  _proto.extractProtocol = function extractProtocol(url) {\n    var match = PROTOCOL_REGEX.exec(url);\n    return {\n      protocol: match[1] ? match[1].toLowerCase() : '',\n      slashes: !!match[2],\n      address: match[3]\n    };\n  };\n\n  return Url;\n}();\nexport function slugifyUrl(urlStr, depth) {\n  if (depth === void 0) {\n    depth = 2;\n  }\n\n  var parsedUrl = new Url(urlStr);\n  var query = parsedUrl.query,\n      path = parsedUrl.path;\n  var pathParts = path.substring(1).split('/');\n  var redactString = ':id';\n  var wildcard = '*';\n  var specialCharsRegex = /\\W|_/g;\n  var digitsRegex = /[0-9]/g;\n  var lowerCaseRegex = /[a-z]/g;\n  var upperCaseRegex = /[A-Z]/g;\n  var redactedParts = [];\n  var redactedBefore = false;\n\n  for (var index = 0; index < pathParts.length; index++) {\n    var part = pathParts[index];\n\n    if (redactedBefore || index > depth - 1) {\n      if (part) {\n        redactedParts.push(wildcard);\n      }\n\n      break;\n    }\n\n    var numberOfSpecialChars = (part.match(specialCharsRegex) || []).length;\n\n    if (numberOfSpecialChars >= 2) {\n      redactedParts.push(redactString);\n      redactedBefore = true;\n      continue;\n    }\n\n    var numberOfDigits = (part.match(digitsRegex) || []).length;\n\n    if (numberOfDigits > 3 || part.length > 3 && numberOfDigits / part.length >= 0.3) {\n      redactedParts.push(redactString);\n      redactedBefore = true;\n      continue;\n    }\n\n    var numberofUpperCase = (part.match(upperCaseRegex) || []).length;\n    var numberofLowerCase = (part.match(lowerCaseRegex) || []).length;\n    var lowerCaseRate = numberofLowerCase / part.length;\n    var upperCaseRate = numberofUpperCase / part.length;\n\n    if (part.length > 5 && (upperCaseRate > 0.3 && upperCaseRate < 0.6 || lowerCaseRate > 0.3 && lowerCaseRate < 0.6)) {\n      redactedParts.push(redactString);\n      redactedBefore = true;\n      continue;\n    }\n\n    part && redactedParts.push(part);\n  }\n\n  var redacted = '/' + (redactedParts.length >= 2 ? redactedParts.join('/') : redactedParts.join('')) + (query ? '?{query}' : '');\n  return redacted;\n}", "var SCHEDULE = 'schedule';\nvar INVOKE = 'invoke';\nvar ADD_EVENT_LISTENER_STR = 'addEventListener';\nvar REMOVE_EVENT_LISTENER_STR = 'removeEventListener';\nvar RESOURCE_INITIATOR_TYPES = ['link', 'css', 'script', 'img', 'xmlhttprequest', 'fetch', 'beacon', 'iframe'];\nvar REUSABILITY_THRESHOLD = 5000;\nvar MAX_SPAN_DURATION = 5 * 60 * 1000;\nvar PAGE_LOAD_DELAY = 1000;\nvar PAGE_LOAD = 'page-load';\nvar ROUTE_CHANGE = 'route-change';\nvar TYPE_CUSTOM = 'custom';\nvar USER_INTERACTION = 'user-interaction';\nvar HTTP_REQUEST_TYPE = 'http-request';\nvar TEMPORARY_TYPE = 'temporary';\nvar NAME_UNKNOWN = 'Unknown';\nvar PAGE_EXIT = 'page-exit';\nvar TRANSACTION_TYPE_ORDER = [PAGE_LOAD, ROUTE_CHANGE, USER_INTERACTION, HTTP_REQUEST_TYPE, TYPE_CUSTOM, TEMPORARY_TYPE];\nvar OUTCOME_SUCCESS = 'success';\nvar OUTCOME_FAILURE = 'failure';\nvar OUTCOME_UNKNOWN = 'unknown';\nvar USER_TIMING_THRESHOLD = 60;\nvar TRANSACTION_START = 'transaction:start';\nvar TRANSACTION_END = 'transaction:end';\nvar CONFIG_CHANGE = 'config:change';\nvar QUEUE_FLUSH = 'queue:flush';\nvar QUEUE_ADD_TRANSACTION = 'queue:add_transaction';\nvar TRANSACTION_IGNORE = 'transaction:ignore';\nvar XMLHTTPREQUEST = 'xmlhttprequest';\nvar FETCH = 'fetch';\nvar HISTORY = 'history';\nvar EVENT_TARGET = 'eventtarget';\nvar CLICK = 'click';\nvar ERROR = 'error';\nvar BEFORE_EVENT = ':before';\nvar AFTER_EVENT = ':after';\nvar LOCAL_CONFIG_KEY = 'elastic_apm_config';\nvar LONG_TASK = 'longtask';\nvar PAINT = 'paint';\nvar MEASURE = 'measure';\nvar NAVIGATION = 'navigation';\nvar RESOURCE = 'resource';\nvar FIRST_CONTENTFUL_PAINT = 'first-contentful-paint';\nvar LARGEST_CONTENTFUL_PAINT = 'largest-contentful-paint';\nvar FIRST_INPUT = 'first-input';\nvar LAYOUT_SHIFT = 'layout-shift';\nvar EVENT = 'event';\nvar ERRORS = 'errors';\nvar TRANSACTIONS = 'transactions';\nvar CONFIG_SERVICE = 'ConfigService';\nvar LOGGING_SERVICE = 'LoggingService';\nvar TRANSACTION_SERVICE = 'TransactionService';\nvar APM_SERVER = 'ApmServer';\nvar PERFORMANCE_MONITORING = 'PerformanceMonitoring';\nvar ERROR_LOGGING = 'ErrorLogging';\nvar TRUNCATED_TYPE = '.truncated';\nvar KEYWORD_LIMIT = 1024;\nvar SESSION_TIMEOUT = 30 * 60000;\nvar HTTP_REQUEST_TIMEOUT = 10000;\nexport { SCHEDULE, INVOKE, ADD_EVENT_LISTENER_STR, REMOVE_EVENT_LISTENER_STR, RESOURCE_INITIATOR_TYPES, REUSABILITY_THRESHOLD, MAX_SPAN_DURATION, PAGE_LOAD_DELAY, PAGE_LOAD, ROUTE_CHANGE, NAME_UNKNOWN, PAGE_EXIT, TYPE_CUSTOM, USER_TIMING_THRESHOLD, TRANSACTION_START, TRANSACTION_END, CONFIG_CHANGE, QUEUE_FLUSH, QUEUE_ADD_TRANSACTION, TRANSACTION_IGNORE, XMLHTTPREQUEST, FETCH, HISTORY, EVENT_TARGET, CLICK, ERROR, BEFORE_EVENT, AFTER_EVENT, LOCAL_CONFIG_KEY, HTTP_REQUEST_TYPE, LONG_TASK, PAINT, MEASURE, NAVIGATION, RESOURCE, FIRST_CONTENTFUL_PAINT, LARGEST_CONTENTFUL_PAINT, KEYWORD_LIMIT, TEMPORARY_TYPE, USER_INTERACTION, TRANSACTION_TYPE_ORDER, ERRORS, TRANSACTIONS, CONFIG_SERVICE, LOGGING_SERVICE, TRANSACTION_SERVICE, APM_SERVER, PERFORMANCE_MONITORING, ERROR_LOGGING, TRUNCATED_TYPE, FIRST_INPUT, LAYOUT_SHIFT, EVENT, OUTCOME_SUCCESS, OUTCOME_FAILURE, OUTCOME_UNKNOWN, SESSION_TIMEOUT, HTTP_REQUEST_TIMEOUT };", "var _excluded = [\"tags\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { Url } from './url';\nimport { PAGE_LOAD, PAGE_EXIT, NAVIGATION } from './constants';\nimport { getServerTimingInfo, PERF, isPerfTimelineSupported } from './utils';\nvar LEFT_SQUARE_BRACKET = 91;\nvar RIGHT_SQUARE_BRACKET = 93;\nvar EXTERNAL = 'external';\nvar RESOURCE = 'resource';\nvar HARD_NAVIGATION = 'hard-navigation';\n\nfunction getPortNumber(port, protocol) {\n  if (port === '') {\n    port = protocol === 'http:' ? '80' : protocol === 'https:' ? '443' : '';\n  }\n\n  return port;\n}\n\nfunction getResponseContext(perfTimingEntry) {\n  var transferSize = perfTimingEntry.transferSize,\n      encodedBodySize = perfTimingEntry.encodedBodySize,\n      decodedBodySize = perfTimingEntry.decodedBodySize,\n      serverTiming = perfTimingEntry.serverTiming;\n  var respContext = {\n    transfer_size: transferSize,\n    encoded_body_size: encodedBodySize,\n    decoded_body_size: decodedBodySize\n  };\n  var serverTimingStr = getServerTimingInfo(serverTiming);\n\n  if (serverTimingStr) {\n    respContext.headers = {\n      'server-timing': serverTimingStr\n    };\n  }\n\n  return respContext;\n}\n\nfunction getDestination(parsedUrl) {\n  var port = parsedUrl.port,\n      protocol = parsedUrl.protocol,\n      hostname = parsedUrl.hostname;\n  var portNumber = getPortNumber(port, protocol);\n  var ipv6Hostname = hostname.charCodeAt(0) === LEFT_SQUARE_BRACKET && hostname.charCodeAt(hostname.length - 1) === RIGHT_SQUARE_BRACKET;\n  var address = hostname;\n\n  if (ipv6Hostname) {\n    address = hostname.slice(1, -1);\n  }\n\n  return {\n    service: {\n      resource: hostname + ':' + portNumber,\n      name: '',\n      type: ''\n    },\n    address: address,\n    port: Number(portNumber)\n  };\n}\n\nfunction getResourceContext(data) {\n  var entry = data.entry,\n      url = data.url;\n  var parsedUrl = new Url(url);\n  var destination = getDestination(parsedUrl);\n  return {\n    http: {\n      url: url,\n      response: getResponseContext(entry)\n    },\n    destination: destination\n  };\n}\n\nfunction getExternalContext(data) {\n  var url = data.url,\n      method = data.method,\n      target = data.target,\n      response = data.response;\n  var parsedUrl = new Url(url);\n  var destination = getDestination(parsedUrl);\n  var context = {\n    http: {\n      method: method,\n      url: parsedUrl.href\n    },\n    destination: destination\n  };\n  var statusCode;\n\n  if (target && typeof target.status !== 'undefined') {\n    statusCode = target.status;\n  } else if (response) {\n    statusCode = response.status;\n  }\n\n  context.http.status_code = statusCode;\n  return context;\n}\n\nfunction getNavigationContext(data) {\n  var url = data.url;\n  var parsedUrl = new Url(url);\n  var destination = getDestination(parsedUrl);\n  return {\n    destination: destination\n  };\n}\n\nexport function getPageContext() {\n  return {\n    page: {\n      referer: document.referrer,\n      url: location.href\n    }\n  };\n}\nexport function addSpanContext(span, data) {\n  if (!data) {\n    return;\n  }\n\n  var type = span.type;\n  var context;\n\n  switch (type) {\n    case EXTERNAL:\n      context = getExternalContext(data);\n      break;\n\n    case RESOURCE:\n      context = getResourceContext(data);\n      break;\n\n    case HARD_NAVIGATION:\n      context = getNavigationContext(data);\n      break;\n  }\n\n  span.addContext(context);\n}\nexport function addTransactionContext(transaction, _temp) {\n  var _ref = _temp === void 0 ? {} : _temp,\n      tags = _ref.tags,\n      configContext = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  var pageContext = getPageContext();\n  var responseContext = {};\n\n  if (transaction.type === PAGE_EXIT) {\n    transaction.ensureContext();\n\n    if (transaction.context.page && transaction.context.page.url) {\n      pageContext.page.url = transaction.context.page.url;\n    }\n  } else if (transaction.type === PAGE_LOAD && isPerfTimelineSupported()) {\n    var entries = PERF.getEntriesByType(NAVIGATION);\n\n    if (entries && entries.length > 0) {\n      responseContext = {\n        response: getResponseContext(entries[0])\n      };\n    }\n  }\n\n  transaction.addContext(pageContext, responseContext, configContext);\n}", "import { KEYWORD_LIMIT } from './constants';\nvar METADATA_MODEL = {\n  service: {\n    name: [KEYWORD_LIMIT, true],\n    version: true,\n    agent: {\n      version: [KEYWORD_LIMIT, true]\n    },\n    environment: true\n  },\n  labels: {\n    '*': true\n  }\n};\nvar RESPONSE_MODEL = {\n  '*': true,\n  headers: {\n    '*': true\n  }\n};\nvar DESTINATION_MODEL = {\n  address: [KEYWORD_LIMIT],\n  service: {\n    '*': [KEYWORD_LIMIT, true]\n  }\n};\nvar CONTEXT_MODEL = {\n  user: {\n    id: true,\n    email: true,\n    username: true\n  },\n  tags: {\n    '*': true\n  },\n  http: {\n    response: RESPONSE_MODEL\n  },\n  destination: DESTINATION_MODEL,\n  response: RESPONSE_MODEL\n};\nvar SPAN_MODEL = {\n  name: [KEYWORD_LIMIT, true],\n  type: [KEYWORD_LIMIT, true],\n  id: [KEYWORD_LIMIT, true],\n  trace_id: [KEYWORD_LIMIT, true],\n  parent_id: [KEYWORD_LIMIT, true],\n  transaction_id: [KEYWORD_LIMIT, true],\n  subtype: true,\n  action: true,\n  context: CONTEXT_MODEL\n};\nvar TRANSACTION_MODEL = {\n  name: true,\n  parent_id: true,\n  type: [KEYWORD_LIMIT, true],\n  id: [KEYWORD_LIMIT, true],\n  trace_id: [KEYWORD_LIMIT, true],\n  span_count: {\n    started: [KEYWORD_LIMIT, true]\n  },\n  context: CONTEXT_MODEL\n};\nvar ERROR_MODEL = {\n  id: [KEYWORD_LIMIT, true],\n  trace_id: true,\n  transaction_id: true,\n  parent_id: true,\n  culprit: true,\n  exception: {\n    type: true\n  },\n  transaction: {\n    type: true\n  },\n  context: CONTEXT_MODEL\n};\n\nfunction truncate(value, limit, required, placeholder) {\n  if (limit === void 0) {\n    limit = KEYWORD_LIMIT;\n  }\n\n  if (required === void 0) {\n    required = false;\n  }\n\n  if (placeholder === void 0) {\n    placeholder = 'N/A';\n  }\n\n  if (required && isEmpty(value)) {\n    value = placeholder;\n  }\n\n  if (typeof value === 'string') {\n    return value.substring(0, limit);\n  }\n\n  return value;\n}\n\nfunction isEmpty(value) {\n  return value == null || value === '' || typeof value === 'undefined';\n}\n\nfunction replaceValue(target, key, currModel) {\n  var value = truncate(target[key], currModel[0], currModel[1]);\n\n  if (isEmpty(value)) {\n    delete target[key];\n    return;\n  }\n\n  target[key] = value;\n}\n\nfunction truncateModel(model, target, childTarget) {\n  if (model === void 0) {\n    model = {};\n  }\n\n  if (childTarget === void 0) {\n    childTarget = target;\n  }\n\n  var keys = Object.keys(model);\n  var emptyArr = [];\n\n  var _loop = function _loop(i) {\n    var currKey = keys[i];\n    var currModel = model[currKey] === true ? emptyArr : model[currKey];\n\n    if (!Array.isArray(currModel)) {\n      truncateModel(currModel, target, childTarget[currKey]);\n    } else {\n      if (currKey === '*') {\n        Object.keys(childTarget).forEach(function (key) {\n          return replaceValue(childTarget, key, currModel);\n        });\n      } else {\n        replaceValue(childTarget, currKey, currModel);\n      }\n    }\n  };\n\n  for (var i = 0; i < keys.length; i++) {\n    _loop(i);\n  }\n\n  return target;\n}\n\nexport { truncate, truncateModel, SPAN_MODEL, TRANSACTION_MODEL, ERROR_MODEL, METADATA_MODEL, RESPONSE_MODEL };", "(function (root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('stackframe', [], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory();\n    } else {\n        root.StackFrame = factory();\n    }\n}(this, function () {\n    'use strict';\n    function _isNumber(n) {\n        return !isNaN(parseFloat(n)) && isFinite(n);\n    }\n\n    function StackFrame(functionName, args, fileName, lineNumber, columnNumber, source) {\n        if (functionName !== undefined) {\n            this.setFunctionName(functionName);\n        }\n        if (args !== undefined) {\n            this.setArgs(args);\n        }\n        if (fileName !== undefined) {\n            this.setFileName(fileName);\n        }\n        if (lineNumber !== undefined) {\n            this.setLineNumber(lineNumber);\n        }\n        if (columnNumber !== undefined) {\n            this.setColumnNumber(columnNumber);\n        }\n        if (source !== undefined) {\n            this.setSource(source);\n        }\n    }\n\n    StackFrame.prototype = {\n        getFunctionName: function () {\n            return this.functionName;\n        },\n        setFunctionName: function (v) {\n            this.functionName = String(v);\n        },\n\n        getArgs: function () {\n            return this.args;\n        },\n        setArgs: function (v) {\n            if (Object.prototype.toString.call(v) !== '[object Array]') {\n                throw new TypeError('Args must be an Array');\n            }\n            this.args = v;\n        },\n\n        // NOTE: Property name may be misleading as it includes the path,\n        // but it somewhat mirrors V8's JavaScriptStackTraceApi\n        // https://code.google.com/p/v8/wiki/JavaScriptStackTraceApi and Gecko's\n        // http://mxr.mozilla.org/mozilla-central/source/xpcom/base/nsIException.idl#14\n        getFileName: function () {\n            return this.fileName;\n        },\n        setFileName: function (v) {\n            this.fileName = String(v);\n        },\n\n        getLineNumber: function () {\n            return this.lineNumber;\n        },\n        setLineNumber: function (v) {\n            if (!_isNumber(v)) {\n                throw new TypeError('Line Number must be a Number');\n            }\n            this.lineNumber = Number(v);\n        },\n\n        getColumnNumber: function () {\n            return this.columnNumber;\n        },\n        setColumnNumber: function (v) {\n            if (!_isNumber(v)) {\n                throw new TypeError('Column Number must be a Number');\n            }\n            this.columnNumber = Number(v);\n        },\n\n        getSource: function () {\n            return this.source;\n        },\n        setSource: function (v) {\n            this.source = String(v);\n        },\n\n        toString: function() {\n            var functionName = this.getFunctionName() || '{anonymous}';\n            var args = '(' + (this.getArgs() || []).join(',') + ')';\n            var fileName = this.getFileName() ? ('@' + this.getFileName()) : '';\n            var lineNumber = _isNumber(this.getLineNumber()) ? (':' + this.getLineNumber()) : '';\n            var columnNumber = _isNumber(this.getColumnNumber()) ? (':' + this.getColumnNumber()) : '';\n            return functionName + args + fileName + lineNumber + columnNumber;\n        }\n    };\n\n    return StackFrame;\n}));\n", "(function(root, factory) {\n    'use strict';\n    // Universal Module Definition (UMD) to support AMD, CommonJS/Node.js, Rhino, and browsers.\n\n    /* istanbul ignore next */\n    if (typeof define === 'function' && define.amd) {\n        define('error-stack-parser', ['stackframe'], factory);\n    } else if (typeof exports === 'object') {\n        module.exports = factory(require('stackframe'));\n    } else {\n        root.ErrorStackParser = factory(root.StackFrame);\n    }\n}(this, function ErrorStackParser(StackFrame) {\n    'use strict';\n\n    var FIREFOX_SAFARI_STACK_REGEXP = /(^|@)\\S+\\:\\d+/;\n    var CHROME_IE_STACK_REGEXP = /^\\s*at .*(\\S+\\:\\d+|\\(native\\))/m;\n    var SAFARI_NATIVE_CODE_REGEXP = /^(eval@)?(\\[native code\\])?$/;\n\n    function _map(array, fn, thisArg) {\n        if (typeof Array.prototype.map === 'function') {\n            return array.map(fn, thisArg);\n        } else {\n            var output = new Array(array.length);\n            for (var i = 0; i < array.length; i++) {\n                output[i] = fn.call(thisArg, array[i]);\n            }\n            return output;\n        }\n    }\n\n    function _filter(array, fn, thisArg) {\n        if (typeof Array.prototype.filter === 'function') {\n            return array.filter(fn, thisArg);\n        } else {\n            var output = [];\n            for (var i = 0; i < array.length; i++) {\n                if (fn.call(thisArg, array[i])) {\n                    output.push(array[i]);\n                }\n            }\n            return output;\n        }\n    }\n\n    function _indexOf(array, target) {\n        if (typeof Array.prototype.indexOf === 'function') {\n            return array.indexOf(target);\n        } else {\n            for (var i = 0; i < array.length; i++) {\n                if (array[i] === target) {\n                    return i;\n                }\n            }\n            return -1;\n        }\n    }\n\n    return {\n        /**\n         * Given an Error object, extract the most information from it.\n         *\n         * @param {Error} error object\n         * @return {Array} of StackFrames\n         */\n        parse: function ErrorStackParser$$parse(error) {\n            if (typeof error.stacktrace !== 'undefined' || typeof error['opera#sourceloc'] !== 'undefined') {\n                return this.parseOpera(error);\n            } else if (error.stack && error.stack.match(CHROME_IE_STACK_REGEXP)) {\n                return this.parseV8OrIE(error);\n            } else if (error.stack) {\n                return this.parseFFOrSafari(error);\n            } else {\n                throw new Error('Cannot parse given Error object');\n            }\n        },\n\n        // Separate line and column numbers from a string of the form: (URI:Line:Column)\n        extractLocation: function ErrorStackParser$$extractLocation(urlLike) {\n            // Fail-fast but return locations like \"(native)\"\n            if (urlLike.indexOf(':') === -1) {\n                return [urlLike];\n            }\n\n            var regExp = /(.+?)(?:\\:(\\d+))?(?:\\:(\\d+))?$/;\n            var parts = regExp.exec(urlLike.replace(/[\\(\\)]/g, ''));\n            return [parts[1], parts[2] || undefined, parts[3] || undefined];\n        },\n\n        parseV8OrIE: function ErrorStackParser$$parseV8OrIE(error) {\n            var filtered = _filter(error.stack.split('\\n'), function(line) {\n                return !!line.match(CHROME_IE_STACK_REGEXP);\n            }, this);\n\n            return _map(filtered, function(line) {\n                if (line.indexOf('(eval ') > -1) {\n                    // Throw away eval information until we implement stacktrace.js/stackframe#8\n                    line = line.replace(/eval code/g, 'eval').replace(/(\\(eval at [^\\()]*)|(\\)\\,.*$)/g, '');\n                }\n                var tokens = line.replace(/^\\s+/, '').replace(/\\(eval code/g, '(').split(/\\s+/).slice(1);\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionName = tokens.join(' ') || undefined;\n                var fileName = _indexOf(['eval', '<anonymous>'], locationParts[0]) > -1 ? undefined : locationParts[0];\n\n                return new StackFrame(functionName, undefined, fileName, locationParts[1], locationParts[2], line);\n            }, this);\n        },\n\n        parseFFOrSafari: function ErrorStackParser$$parseFFOrSafari(error) {\n            var filtered = _filter(error.stack.split('\\n'), function(line) {\n                return !line.match(SAFARI_NATIVE_CODE_REGEXP);\n            }, this);\n\n            return _map(filtered, function(line) {\n                // Throw away eval information until we implement stacktrace.js/stackframe#8\n                if (line.indexOf(' > eval') > -1) {\n                    line = line.replace(/ line (\\d+)(?: > eval line \\d+)* > eval\\:\\d+\\:\\d+/g, ':$1');\n                }\n\n                if (line.indexOf('@') === -1 && line.indexOf(':') === -1) {\n                    // Safari eval frames only have function names and nothing else\n                    return new StackFrame(line);\n                } else {\n                    var tokens = line.split('@');\n                    var locationParts = this.extractLocation(tokens.pop());\n                    var functionName = tokens.join('@') || undefined;\n                    return new StackFrame(functionName,\n                        undefined,\n                        locationParts[0],\n                        locationParts[1],\n                        locationParts[2],\n                        line);\n                }\n            }, this);\n        },\n\n        parseOpera: function ErrorStackParser$$parseOpera(e) {\n            if (!e.stacktrace || (e.message.indexOf('\\n') > -1 &&\n                e.message.split('\\n').length > e.stacktrace.split('\\n').length)) {\n                return this.parseOpera9(e);\n            } else if (!e.stack) {\n                return this.parseOpera10(e);\n            } else {\n                return this.parseOpera11(e);\n            }\n        },\n\n        parseOpera9: function ErrorStackParser$$parseOpera9(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)/i;\n            var lines = e.message.split('\\n');\n            var result = [];\n\n            for (var i = 2, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(new StackFrame(undefined, undefined, match[2], match[1], undefined, lines[i]));\n                }\n            }\n\n            return result;\n        },\n\n        parseOpera10: function ErrorStackParser$$parseOpera10(e) {\n            var lineRE = /Line (\\d+).*script (?:in )?(\\S+)(?:: In function (\\S+))?$/i;\n            var lines = e.stacktrace.split('\\n');\n            var result = [];\n\n            for (var i = 0, len = lines.length; i < len; i += 2) {\n                var match = lineRE.exec(lines[i]);\n                if (match) {\n                    result.push(\n                        new StackFrame(\n                            match[3] || undefined,\n                            undefined,\n                            match[2],\n                            match[1],\n                            undefined,\n                            lines[i]\n                        )\n                    );\n                }\n            }\n\n            return result;\n        },\n\n        // Opera 10.65+ Error.stack very similar to FF/Safari\n        parseOpera11: function ErrorStackParser$$parseOpera11(error) {\n            var filtered = _filter(error.stack.split('\\n'), function(line) {\n                return !!line.match(FIREFOX_SAFARI_STACK_REGEXP) && !line.match(/^Error created at/);\n            }, this);\n\n            return _map(filtered, function(line) {\n                var tokens = line.split('@');\n                var locationParts = this.extractLocation(tokens.pop());\n                var functionCall = (tokens.shift() || '');\n                var functionName = functionCall\n                        .replace(/<anonymous function(: (\\w+))?>/, '$2')\n                        .replace(/\\([^\\)]*\\)/g, '') || undefined;\n                var argsRaw;\n                if (functionCall.match(/\\(([^\\)]*)\\)/)) {\n                    argsRaw = functionCall.replace(/^[^\\(]+\\(([^\\)]*)\\)$/, '$1');\n                }\n                var args = (argsRaw === undefined || argsRaw === '[arguments not available]') ?\n                    undefined : argsRaw.split(',');\n                return new StackFrame(\n                    functionName,\n                    args,\n                    locationParts[0],\n                    locationParts[1],\n                    locationParts[2],\n                    line);\n            }, this);\n        }\n    };\n}));\n\n", "var _excluded = [\"tags\"];\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport { createStackTraces, filterInvalidFrames } from './stack-trace';\nimport { generateRandomId, merge, extend } from '../common/utils';\nimport { getPageContext } from '../common/context';\nimport { truncateModel, ERROR_MODEL } from '../common/truncate';\nimport stackParser from 'error-stack-parser';\nvar IGNORE_KEYS = ['stack', 'message'];\nvar PROMISE_REJECTION_PREFIX = 'Unhandled promise rejection: ';\n\nfunction getErrorProperties(error) {\n  var propertyFound = false;\n  var properties = {};\n  Object.keys(error).forEach(function (key) {\n    if (IGNORE_KEYS.indexOf(key) >= 0) {\n      return;\n    }\n\n    var val = error[key];\n\n    if (val == null || typeof val === 'function') {\n      return;\n    }\n\n    if (typeof val === 'object') {\n      if (typeof val.toISOString !== 'function') return;\n      val = val.toISOString();\n    }\n\n    properties[key] = val;\n    propertyFound = true;\n  });\n\n  if (propertyFound) {\n    return properties;\n  }\n}\n\nvar ErrorLogging = function () {\n  function ErrorLogging(apmServer, configService, transactionService) {\n    this._apmServer = apmServer;\n    this._configService = configService;\n    this._transactionService = transactionService;\n  }\n\n  var _proto = ErrorLogging.prototype;\n\n  _proto.createErrorDataModel = function createErrorDataModel(errorEvent) {\n    var frames = createStackTraces(stackParser, errorEvent);\n    var filteredFrames = filterInvalidFrames(frames);\n    var culprit = '(inline script)';\n    var lastFrame = filteredFrames[filteredFrames.length - 1];\n\n    if (lastFrame && lastFrame.filename) {\n      culprit = lastFrame.filename;\n    }\n\n    var message = errorEvent.message,\n        error = errorEvent.error;\n    var errorMessage = message;\n    var errorType = '';\n    var errorContext = {};\n\n    if (error && typeof error === 'object') {\n      errorMessage = errorMessage || error.message;\n      errorType = error.name;\n      var customProperties = getErrorProperties(error);\n\n      if (customProperties) {\n        errorContext.custom = customProperties;\n      }\n    }\n\n    if (!errorType) {\n      if (errorMessage && errorMessage.indexOf(':') > -1) {\n        errorType = errorMessage.split(':')[0];\n      }\n    }\n\n    var currentTransaction = this._transactionService.getCurrentTransaction();\n\n    var transactionContext = currentTransaction ? currentTransaction.context : {};\n\n    var _this$_configService$ = this._configService.get('context'),\n        tags = _this$_configService$.tags,\n        configContext = _objectWithoutPropertiesLoose(_this$_configService$, _excluded);\n\n    var pageContext = getPageContext();\n    var context = merge({}, pageContext, transactionContext, configContext, errorContext);\n    var errorObject = {\n      id: generateRandomId(),\n      culprit: culprit,\n      exception: {\n        message: errorMessage,\n        stacktrace: filteredFrames,\n        type: errorType\n      },\n      context: context\n    };\n\n    if (currentTransaction) {\n      errorObject = extend(errorObject, {\n        trace_id: currentTransaction.traceId,\n        parent_id: currentTransaction.id,\n        transaction_id: currentTransaction.id,\n        transaction: {\n          type: currentTransaction.type,\n          sampled: currentTransaction.sampled\n        }\n      });\n    }\n\n    return truncateModel(ERROR_MODEL, errorObject);\n  };\n\n  _proto.logErrorEvent = function logErrorEvent(errorEvent) {\n    if (typeof errorEvent === 'undefined') {\n      return;\n    }\n\n    var errorObject = this.createErrorDataModel(errorEvent);\n\n    if (typeof errorObject.exception.message === 'undefined') {\n      return;\n    }\n\n    this._apmServer.addError(errorObject);\n  };\n\n  _proto.registerListeners = function registerListeners() {\n    var _this = this;\n\n    window.addEventListener('error', function (errorEvent) {\n      return _this.logErrorEvent(errorEvent);\n    });\n    window.addEventListener('unhandledrejection', function (promiseRejectionEvent) {\n      return _this.logPromiseEvent(promiseRejectionEvent);\n    });\n  };\n\n  _proto.logPromiseEvent = function logPromiseEvent(promiseRejectionEvent) {\n    var reason = promiseRejectionEvent.reason;\n\n    if (reason == null) {\n      reason = '<no reason specified>';\n    }\n\n    var errorEvent;\n\n    if (typeof reason.message === 'string') {\n      var name = reason.name ? reason.name + ': ' : '';\n      errorEvent = {\n        error: reason,\n        message: PROMISE_REJECTION_PREFIX + name + reason.message\n      };\n    } else {\n      errorEvent = this._parseRejectReason(reason);\n    }\n\n    this.logErrorEvent(errorEvent);\n  };\n\n  _proto.logError = function logError(messageOrError) {\n    var errorEvent = {};\n\n    if (typeof messageOrError === 'string') {\n      errorEvent.message = messageOrError;\n    } else {\n      errorEvent.error = messageOrError;\n    }\n\n    return this.logErrorEvent(errorEvent);\n  };\n\n  _proto._parseRejectReason = function _parseRejectReason(reason) {\n    var errorEvent = {\n      message: PROMISE_REJECTION_PREFIX\n    };\n\n    if (Array.isArray(reason)) {\n      errorEvent.message += '<object>';\n    } else if (typeof reason === 'object') {\n      try {\n        errorEvent.message += JSON.stringify(reason);\n        errorEvent.error = reason;\n      } catch (error) {\n        errorEvent.message += '<object>';\n      }\n    } else if (typeof reason === 'function') {\n      errorEvent.message += '<function>';\n    } else {\n      errorEvent.message += reason;\n    }\n\n    return errorEvent;\n  };\n\n  return ErrorLogging;\n}();\n\nexport default ErrorLogging;", "var Queue = function () {\n  function Queue(onFlush, opts) {\n    if (opts === void 0) {\n      opts = {};\n    }\n\n    this.onFlush = onFlush;\n    this.items = [];\n    this.queueLimit = opts.queueLimit || -1;\n    this.flushInterval = opts.flushInterval || 0;\n    this.timeoutId = undefined;\n  }\n\n  var _proto = Queue.prototype;\n\n  _proto._setTimer = function _setTimer() {\n    var _this = this;\n\n    this.timeoutId = setTimeout(function () {\n      return _this.flush();\n    }, this.flushInterval);\n  };\n\n  _proto._clear = function _clear() {\n    if (typeof this.timeoutId !== 'undefined') {\n      clearTimeout(this.timeoutId);\n      this.timeoutId = undefined;\n    }\n\n    this.items = [];\n  };\n\n  _proto.flush = function flush() {\n    this.onFlush(this.items);\n\n    this._clear();\n  };\n\n  _proto.add = function add(item) {\n    this.items.push(item);\n\n    if (this.queueLimit !== -1 && this.items.length >= this.queueLimit) {\n      this.flush();\n    } else {\n      if (typeof this.timeoutId === 'undefined') {\n        this._setTimer();\n      }\n    }\n  };\n\n  return Queue;\n}();\n\nexport default Queue;", "export default function throttle(fn, onThrottle, opts) {\n  var context = this;\n  var limit = opts.limit;\n  var interval = opts.interval;\n  var counter = 0;\n  var timeoutId;\n  return function () {\n    counter++;\n\n    if (typeof timeoutId === 'undefined') {\n      timeoutId = setTimeout(function () {\n        counter = 0;\n        timeoutId = undefined;\n      }, interval);\n    }\n\n    if (counter > limit && typeof onThrottle === 'function') {\n      return onThrottle.apply(context, arguments);\n    } else {\n      return fn.apply(context, arguments);\n    }\n  };\n}", "var NDJSON = function () {\n  function NDJSON() {}\n\n  NDJSON.stringify = function stringify(object) {\n    return JSON.stringify(object) + '\\n';\n  };\n\n  return NDJSON;\n}();\n\nexport default NDJSON;", "import { isRedirectInfoAvailable } from '../../common/utils';\nvar NAVIGATION_TIMING_MARKS = ['fetchStart', 'domainLookupStart', 'domainLookupEnd', 'connectStart', 'connectEnd', 'requestStart', 'responseStart', 'responseEnd', 'domLoading', 'domInteractive', 'domContentLoadedEventStart', 'domContentLoadedEventEnd', 'domComplete', 'loadEventStart', 'loadEventEnd'];\nvar COMPRESSED_NAV_TIMING_MARKS = ['fs', 'ls', 'le', 'cs', 'ce', 'qs', 'rs', 're', 'dl', 'di', 'ds', 'de', 'dc', 'es', 'ee'];\n\nfunction getPageLoadMarks(timing) {\n  var marks = getNavigationTimingMarks(timing);\n\n  if (marks == null) {\n    return null;\n  }\n\n  return {\n    navigationTiming: marks,\n    agent: {\n      timeToFirstByte: marks.responseStart,\n      domInteractive: marks.domInteractive,\n      domComplete: marks.domComplete\n    }\n  };\n}\n\nfunction getNavigationTimingMarks(timing) {\n  var redirectStart = timing.redirectStart,\n      fetchStart = timing.fetchStart,\n      navigationStart = timing.navigationStart,\n      responseStart = timing.responseStart,\n      responseEnd = timing.responseEnd;\n\n  if (fetchStart >= navigationStart && responseStart >= fetchStart && responseEnd >= responseStart) {\n    var marks = {};\n    NAVIGATION_TIMING_MARKS.forEach(function (timingKey) {\n      var m = timing[timingKey];\n\n      if (m && m >= fetchStart) {\n        if (isRedirectInfoAvailable(timing)) {\n          marks[timingKey] = parseInt(m - redirectStart);\n        } else {\n          marks[timingKey] = parseInt(m - fetchStart);\n        }\n      }\n    });\n    return marks;\n  }\n\n  return null;\n}\n\nexport { getPageLoadMarks, NAVIGATION_TIMING_MARKS, COMPRESSED_NAV_TIMING_MARKS };", "import { Promise } from './polyfills';\nimport { NAVIGATION_TIMING_MARKS, COMPRESSED_NAV_TIMING_MARKS } from '../performance-monitoring/navigation/marks';\nimport { isBeaconInspectionEnabled } from './utils';\n\nfunction compressStackFrames(frames) {\n  return frames.map(function (frame) {\n    return {\n      ap: frame.abs_path,\n      f: frame.filename,\n      fn: frame.function,\n      li: frame.lineno,\n      co: frame.colno\n    };\n  });\n}\n\nfunction compressResponse(response) {\n  return {\n    ts: response.transfer_size,\n    ebs: response.encoded_body_size,\n    dbs: response.decoded_body_size\n  };\n}\n\nfunction compressHTTP(http) {\n  var compressed = {};\n  var method = http.method,\n      status_code = http.status_code,\n      url = http.url,\n      response = http.response;\n  compressed.url = url;\n\n  if (method) {\n    compressed.mt = method;\n  }\n\n  if (status_code) {\n    compressed.sc = status_code;\n  }\n\n  if (response) {\n    compressed.r = compressResponse(response);\n  }\n\n  return compressed;\n}\n\nfunction compressContext(context) {\n  if (!context) {\n    return null;\n  }\n\n  var compressed = {};\n  var page = context.page,\n      http = context.http,\n      response = context.response,\n      destination = context.destination,\n      user = context.user,\n      custom = context.custom;\n\n  if (page) {\n    compressed.p = {\n      rf: page.referer,\n      url: page.url\n    };\n  }\n\n  if (http) {\n    compressed.h = compressHTTP(http);\n  }\n\n  if (response) {\n    compressed.r = compressResponse(response);\n  }\n\n  if (destination) {\n    var service = destination.service;\n    compressed.dt = {\n      se: {\n        n: service.name,\n        t: service.type,\n        rc: service.resource\n      },\n      ad: destination.address,\n      po: destination.port\n    };\n  }\n\n  if (user) {\n    compressed.u = {\n      id: user.id,\n      un: user.username,\n      em: user.email\n    };\n  }\n\n  if (custom) {\n    compressed.cu = custom;\n  }\n\n  return compressed;\n}\n\nfunction compressMarks(marks) {\n  if (!marks) {\n    return null;\n  }\n\n  var compressedNtMarks = compressNavigationTimingMarks(marks.navigationTiming);\n  var compressed = {\n    nt: compressedNtMarks,\n    a: compressAgentMarks(compressedNtMarks, marks.agent)\n  };\n  return compressed;\n}\n\nfunction compressNavigationTimingMarks(ntMarks) {\n  if (!ntMarks) {\n    return null;\n  }\n\n  var compressed = {};\n  COMPRESSED_NAV_TIMING_MARKS.forEach(function (mark, index) {\n    var mapping = NAVIGATION_TIMING_MARKS[index];\n    compressed[mark] = ntMarks[mapping];\n  });\n  return compressed;\n}\n\nfunction compressAgentMarks(compressedNtMarks, agentMarks) {\n  var compressed = {};\n\n  if (compressedNtMarks) {\n    compressed = {\n      fb: compressedNtMarks.rs,\n      di: compressedNtMarks.di,\n      dc: compressedNtMarks.dc\n    };\n  }\n\n  if (agentMarks) {\n    var fp = agentMarks.firstContentfulPaint;\n    var lp = agentMarks.largestContentfulPaint;\n\n    if (fp) {\n      compressed.fp = fp;\n    }\n\n    if (lp) {\n      compressed.lp = lp;\n    }\n  }\n\n  if (Object.keys(compressed).length === 0) {\n    return null;\n  }\n\n  return compressed;\n}\n\nexport function compressMetadata(metadata) {\n  var service = metadata.service,\n      labels = metadata.labels;\n  var agent = service.agent,\n      language = service.language;\n  return {\n    se: {\n      n: service.name,\n      ve: service.version,\n      a: {\n        n: agent.name,\n        ve: agent.version\n      },\n      la: {\n        n: language.name\n      },\n      en: service.environment\n    },\n    l: labels\n  };\n}\nexport function compressTransaction(transaction) {\n  var spans = transaction.spans.map(function (span) {\n    var spanData = {\n      id: span.id,\n      n: span.name,\n      t: span.type,\n      s: span.start,\n      d: span.duration,\n      c: compressContext(span.context),\n      o: span.outcome,\n      sr: span.sample_rate\n    };\n\n    if (span.parent_id !== transaction.id) {\n      spanData.pid = span.parent_id;\n    }\n\n    if (span.sync === true) {\n      spanData.sy = true;\n    }\n\n    if (span.subtype) {\n      spanData.su = span.subtype;\n    }\n\n    if (span.action) {\n      spanData.ac = span.action;\n    }\n\n    return spanData;\n  });\n  var tr = {\n    id: transaction.id,\n    tid: transaction.trace_id,\n    n: transaction.name,\n    t: transaction.type,\n    d: transaction.duration,\n    c: compressContext(transaction.context),\n    k: compressMarks(transaction.marks),\n    me: compressMetricsets(transaction.breakdown),\n    y: spans,\n    yc: {\n      sd: spans.length\n    },\n    sm: transaction.sampled,\n    sr: transaction.sample_rate,\n    o: transaction.outcome\n  };\n\n  if (transaction.experience) {\n    var _transaction$experien = transaction.experience,\n        cls = _transaction$experien.cls,\n        fid = _transaction$experien.fid,\n        tbt = _transaction$experien.tbt,\n        longtask = _transaction$experien.longtask;\n    tr.exp = {\n      cls: cls,\n      fid: fid,\n      tbt: tbt,\n      lt: longtask\n    };\n  }\n\n  if (transaction.session) {\n    var _transaction$session = transaction.session,\n        id = _transaction$session.id,\n        sequence = _transaction$session.sequence;\n    tr.ses = {\n      id: id,\n      seq: sequence\n    };\n  }\n\n  return tr;\n}\nexport function compressError(error) {\n  var exception = error.exception;\n  var compressed = {\n    id: error.id,\n    cl: error.culprit,\n    ex: {\n      mg: exception.message,\n      st: compressStackFrames(exception.stacktrace),\n      t: error.type\n    },\n    c: compressContext(error.context)\n  };\n  var transaction = error.transaction;\n\n  if (transaction) {\n    compressed.tid = error.trace_id;\n    compressed.pid = error.parent_id;\n    compressed.xid = error.transaction_id;\n    compressed.x = {\n      t: transaction.type,\n      sm: transaction.sampled\n    };\n  }\n\n  return compressed;\n}\nexport function compressMetricsets(breakdowns) {\n  return breakdowns.map(function (_ref) {\n    var span = _ref.span,\n        samples = _ref.samples;\n    return {\n      y: {\n        t: span.type\n      },\n      sa: {\n        ysc: {\n          v: samples['span.self_time.count'].value\n        },\n        yss: {\n          v: samples['span.self_time.sum.us'].value\n        }\n      }\n    };\n  });\n}\nexport function compressPayload(params, type) {\n  if (type === void 0) {\n    type = 'gzip';\n  }\n\n  var isCompressionStreamSupported = typeof CompressionStream === 'function';\n  return new Promise(function (resolve) {\n    if (!isCompressionStreamSupported) {\n      return resolve(params);\n    }\n\n    if (isBeaconInspectionEnabled()) {\n      return resolve(params);\n    }\n\n    var payload = params.payload,\n        headers = params.headers,\n        beforeSend = params.beforeSend;\n    var payloadStream = new Blob([payload]).stream();\n    var compressedStream = payloadStream.pipeThrough(new CompressionStream(type));\n    return new Response(compressedStream).blob().then(function (payload) {\n      headers['Content-Encoding'] = type;\n      return resolve({\n        payload: payload,\n        headers: headers,\n        beforeSend: beforeSend\n      });\n    });\n  });\n}", "function getDefaultExportFromCjs (x) {\n\treturn x && x.__esModule && Object.prototype.hasOwnProperty.call(x, 'default') ? x['default'] : x;\n}\n\nvar browser = {exports: {}};\n\n// shim for using process in browser\nvar process = browser.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ());\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] };\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n\nvar browserExports = browser.exports;\nconst process$1 = /*@__PURE__*/getDefaultExportFromCjs(browserExports);\n\nexport { process$1 as default, process$1 as process };\n//# sourceMappingURL=index.js.map\n", "var __DEV__ = process.env.NODE_ENV !== 'production';\n\nvar state = {\n  bootstrapTime: null,\n  lastHiddenStart: Number.MIN_SAFE_INTEGER\n};\nexport { __DEV__, state };", "export function isResponseSuccessful(status) {\n  if (status === 0 || status > 399 && status < 600) {\n    return false;\n  }\n\n  return true;\n}", "function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { HTTP_REQUEST_TIMEOUT } from '../constants';\nimport { isResponseSuccessful } from './response-status';\nexport var BYTE_LIMIT = 60 * 1000;\nexport function shouldUseFetchWithKeepAlive(method, payload) {\n  if (!isFetchSupported()) {\n    return false;\n  }\n\n  var isKeepAliveSupported = ('keepalive' in new Request(''));\n\n  if (!isKeepAliveSupported) {\n    return false;\n  }\n\n  var size = calculateSize(payload);\n  return method === 'POST' && size < BYTE_LIMIT;\n}\nexport function sendFetchRequest(method, url, _ref) {\n  var _ref$keepalive = _ref.keepalive,\n      keepalive = _ref$keepalive === void 0 ? false : _ref$keepalive,\n      _ref$timeout = _ref.timeout,\n      timeout = _ref$timeout === void 0 ? HTTP_REQUEST_TIMEOUT : _ref$timeout,\n      payload = _ref.payload,\n      headers = _ref.headers,\n      sendCredentials = _ref.sendCredentials;\n  var timeoutConfig = {};\n\n  if (typeof AbortController === 'function') {\n    var controller = new AbortController();\n    timeoutConfig.signal = controller.signal;\n    setTimeout(function () {\n      return controller.abort();\n    }, timeout);\n  }\n\n  var fetchResponse;\n  return window.fetch(url, _extends({\n    body: payload,\n    headers: headers,\n    method: method,\n    keepalive: keepalive,\n    credentials: sendCredentials ? 'include' : 'omit'\n  }, timeoutConfig)).then(function (response) {\n    fetchResponse = response;\n    return fetchResponse.text();\n  }).then(function (responseText) {\n    var bodyResponse = {\n      url: url,\n      status: fetchResponse.status,\n      responseText: responseText\n    };\n\n    if (!isResponseSuccessful(fetchResponse.status)) {\n      throw bodyResponse;\n    }\n\n    return bodyResponse;\n  });\n}\nexport function isFetchSupported() {\n  return typeof window.fetch === 'function' && typeof window.Request === 'function';\n}\n\nfunction calculateSize(payload) {\n  if (!payload) {\n    return 0;\n  }\n\n  if (payload instanceof Blob) {\n    return payload.size;\n  }\n\n  return new Blob([payload]).size;\n}", "export var globalState = {\n  fetchInProgress: false\n};\nexport function apmSymbol(name) {\n  return '__apm_symbol__' + name;\n}\n\nfunction isPropertyWritable(propertyDesc) {\n  if (!propertyDesc) {\n    return true;\n  }\n\n  if (propertyDesc.writable === false) {\n    return false;\n  }\n\n  return !(typeof propertyDesc.get === 'function' && typeof propertyDesc.set === 'undefined');\n}\n\nfunction attachOriginToPatched(patched, original) {\n  patched[apmSymbol('OriginalDelegate')] = original;\n}\n\nexport function patchMethod(target, name, patchFn) {\n  var proto = target;\n\n  while (proto && !proto.hasOwnProperty(name)) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  if (!proto && target[name]) {\n    proto = target;\n  }\n\n  var delegateName = apmSymbol(name);\n  var delegate;\n\n  if (proto && !(delegate = proto[delegateName])) {\n    delegate = proto[delegateName] = proto[name];\n    var desc = proto && Object.getOwnPropertyDescriptor(proto, name);\n\n    if (isPropertyWritable(desc)) {\n      var patchDelegate = patchFn(delegate, delegateName, name);\n\n      proto[name] = function () {\n        return patchDelegate(this, arguments);\n      };\n\n      attachOriginToPatched(proto[name], delegate);\n    }\n  }\n\n  return delegate;\n}\nexport var XHR_IGNORE = apmSymbol('xhrIgnore');\nexport var XHR_SYNC = apmSymbol('xhrSync');\nexport var XHR_URL = apmSymbol('xhrURL');\nexport var XHR_METHOD = apmSymbol('xhrMethod');", "import { XHR_IGNORE } from '../patching/patch-utils';\nimport { isResponseSuccessful } from './response-status';\nimport { Promise } from '../polyfills';\nexport function sendXHR(method, url, _ref) {\n  var _ref$timeout = _ref.timeout,\n      timeout = _ref$timeout === void 0 ? HTTP_REQUEST_TIMEOUT : _ref$timeout,\n      payload = _ref.payload,\n      headers = _ref.headers,\n      beforeSend = _ref.beforeSend,\n      sendCredentials = _ref.sendCredentials;\n  return new Promise(function (resolve, reject) {\n    var xhr = new window.XMLHttpRequest();\n    xhr[XHR_IGNORE] = true;\n    xhr.open(method, url, true);\n    xhr.timeout = timeout;\n    xhr.withCredentials = sendCredentials;\n\n    if (headers) {\n      for (var header in headers) {\n        if (headers.hasOwnProperty(header)) {\n          xhr.setRequestHeader(header, headers[header]);\n        }\n      }\n    }\n\n    xhr.onreadystatechange = function () {\n      if (xhr.readyState === 4) {\n        var status = xhr.status,\n            responseText = xhr.responseText;\n\n        if (isResponseSuccessful(status)) {\n          resolve(xhr);\n        } else {\n          reject({\n            url: url,\n            status: status,\n            responseText: responseText\n          });\n        }\n      }\n    };\n\n    xhr.onerror = function () {\n      var status = xhr.status,\n          responseText = xhr.responseText;\n      reject({\n        url: url,\n        status: status,\n        responseText: responseText\n      });\n    };\n\n    var canSend = true;\n\n    if (typeof beforeSend === 'function') {\n      canSend = beforeSend({\n        url: url,\n        method: method,\n        headers: headers,\n        payload: payload,\n        xhr: xhr\n      });\n    }\n\n    if (canSend) {\n      xhr.send(payload);\n    } else {\n      reject({\n        url: url,\n        status: 0,\n        responseText: 'Request rejected by user configuration.'\n      });\n    }\n  });\n}", "import Queue from './queue';\nimport throttle from './throttle';\nimport NDJSON from './ndjson';\nimport { truncateModel, METADATA_MODEL } from './truncate';\nimport { ERRORS, HTTP_REQUEST_TIMEOUT, QUEUE_FLUSH, TRANSACTIONS } from './constants';\nimport { noop } from './utils';\nimport { Promise } from './polyfills';\nimport { compressMetadata, compressTransaction, compressError, compressPayload } from './compress';\nimport { __DEV__ } from '../state';\nimport { sendFetchRequest, shouldUseFetchWithKeepAlive } from './http/fetch';\nimport { sendXHR } from './http/xhr';\nvar THROTTLE_INTERVAL = 60000;\n\nvar ApmServer = function () {\n  function ApmServer(configService, loggingService) {\n    this._configService = configService;\n    this._loggingService = loggingService;\n    this.queue = undefined;\n    this.throttleEvents = noop;\n  }\n\n  var _proto = ApmServer.prototype;\n\n  _proto.init = function init() {\n    var _this = this;\n\n    var queueLimit = this._configService.get('queueLimit');\n\n    var flushInterval = this._configService.get('flushInterval');\n\n    var limit = this._configService.get('eventsLimit');\n\n    var onFlush = function onFlush(events) {\n      var promise = _this.sendEvents(events);\n\n      if (promise) {\n        promise.catch(function (reason) {\n          _this._loggingService.warn('Failed sending events!', _this._constructError(reason));\n        });\n      }\n    };\n\n    this.queue = new Queue(onFlush, {\n      queueLimit: queueLimit,\n      flushInterval: flushInterval\n    });\n    this.throttleEvents = throttle(this.queue.add.bind(this.queue), function () {\n      return _this._loggingService.warn('Dropped events due to throttling!');\n    }, {\n      limit: limit,\n      interval: THROTTLE_INTERVAL\n    });\n\n    this._configService.observeEvent(QUEUE_FLUSH, function () {\n      _this.queue.flush();\n    });\n  };\n\n  _proto._postJson = function _postJson(endPoint, payload) {\n    var _this2 = this;\n\n    var headers = {\n      'Content-Type': 'application/x-ndjson'\n    };\n\n    var apmRequest = this._configService.get('apmRequest');\n\n    var params = {\n      payload: payload,\n      headers: headers,\n      beforeSend: apmRequest\n    };\n    return compressPayload(params).catch(function (error) {\n      if (__DEV__) {\n        _this2._loggingService.debug('Compressing the payload using CompressionStream API failed', error.message);\n      }\n\n      return params;\n    }).then(function (result) {\n      return _this2._makeHttpRequest('POST', endPoint, result);\n    }).then(function (_ref) {\n      var responseText = _ref.responseText;\n      return responseText;\n    });\n  };\n\n  _proto._constructError = function _constructError(reason) {\n    var url = reason.url,\n        status = reason.status,\n        responseText = reason.responseText;\n\n    if (typeof status == 'undefined') {\n      return reason;\n    }\n\n    var message = url + ' HTTP status: ' + status;\n\n    if (__DEV__ && responseText) {\n      try {\n        var serverErrors = [];\n        var response = JSON.parse(responseText);\n\n        if (response.errors && response.errors.length > 0) {\n          response.errors.forEach(function (err) {\n            return serverErrors.push(err.message);\n          });\n          message += ' ' + serverErrors.join(',');\n        }\n      } catch (e) {\n        this._loggingService.debug('Error parsing response from APM server', e);\n      }\n    }\n\n    return new Error(message);\n  };\n\n  _proto._makeHttpRequest = function _makeHttpRequest(method, url, _temp) {\n    var _ref2 = _temp === void 0 ? {} : _temp,\n        _ref2$timeout = _ref2.timeout,\n        timeout = _ref2$timeout === void 0 ? HTTP_REQUEST_TIMEOUT : _ref2$timeout,\n        payload = _ref2.payload,\n        headers = _ref2.headers,\n        beforeSend = _ref2.beforeSend;\n\n    var sendCredentials = this._configService.get('sendCredentials');\n\n    if (!beforeSend && shouldUseFetchWithKeepAlive(method, payload)) {\n      return sendFetchRequest(method, url, {\n        keepalive: true,\n        timeout: timeout,\n        payload: payload,\n        headers: headers,\n        sendCredentials: sendCredentials\n      }).catch(function (reason) {\n        if (reason instanceof TypeError) {\n          return sendXHR(method, url, {\n            timeout: timeout,\n            payload: payload,\n            headers: headers,\n            beforeSend: beforeSend,\n            sendCredentials: sendCredentials\n          });\n        }\n\n        throw reason;\n      });\n    }\n\n    return sendXHR(method, url, {\n      timeout: timeout,\n      payload: payload,\n      headers: headers,\n      beforeSend: beforeSend,\n      sendCredentials: sendCredentials\n    });\n  };\n\n  _proto.fetchConfig = function fetchConfig(serviceName, environment) {\n    var _this3 = this;\n\n    var _this$getEndpoints = this.getEndpoints(),\n        configEndpoint = _this$getEndpoints.configEndpoint;\n\n    if (!serviceName) {\n      return Promise.reject('serviceName is required for fetching central config.');\n    }\n\n    configEndpoint += \"?service.name=\" + serviceName;\n\n    if (environment) {\n      configEndpoint += \"&service.environment=\" + environment;\n    }\n\n    var localConfig = this._configService.getLocalConfig();\n\n    if (localConfig) {\n      configEndpoint += \"&ifnonematch=\" + localConfig.etag;\n    }\n\n    var apmRequest = this._configService.get('apmRequest');\n\n    return this._makeHttpRequest('GET', configEndpoint, {\n      timeout: 5000,\n      beforeSend: apmRequest\n    }).then(function (xhr) {\n      var status = xhr.status,\n          responseText = xhr.responseText;\n\n      if (status === 304) {\n        return localConfig;\n      } else {\n        var remoteConfig = JSON.parse(responseText);\n        var etag = xhr.getResponseHeader('etag');\n\n        if (etag) {\n          remoteConfig.etag = etag.replace(/[\"]/g, '');\n\n          _this3._configService.setLocalConfig(remoteConfig, true);\n        }\n\n        return remoteConfig;\n      }\n    }).catch(function (reason) {\n      var error = _this3._constructError(reason);\n\n      return Promise.reject(error);\n    });\n  };\n\n  _proto.createMetaData = function createMetaData() {\n    var cfg = this._configService;\n    var metadata = {\n      service: {\n        name: cfg.get('serviceName'),\n        version: cfg.get('serviceVersion'),\n        agent: {\n          name: 'rum-js',\n          version: cfg.version\n        },\n        language: {\n          name: 'javascript'\n        },\n        environment: cfg.get('environment')\n      },\n      labels: cfg.get('context.tags')\n    };\n    return truncateModel(METADATA_MODEL, metadata);\n  };\n\n  _proto.addError = function addError(error) {\n    var _this$throttleEvents;\n\n    this.throttleEvents((_this$throttleEvents = {}, _this$throttleEvents[ERRORS] = error, _this$throttleEvents));\n  };\n\n  _proto.addTransaction = function addTransaction(transaction) {\n    var _this$throttleEvents2;\n\n    this.throttleEvents((_this$throttleEvents2 = {}, _this$throttleEvents2[TRANSACTIONS] = transaction, _this$throttleEvents2));\n  };\n\n  _proto.ndjsonErrors = function ndjsonErrors(errors, compress) {\n    var key = compress ? 'e' : 'error';\n    return errors.map(function (error) {\n      var _NDJSON$stringify;\n\n      return NDJSON.stringify((_NDJSON$stringify = {}, _NDJSON$stringify[key] = compress ? compressError(error) : error, _NDJSON$stringify));\n    });\n  };\n\n  _proto.ndjsonMetricsets = function ndjsonMetricsets(metricsets) {\n    return metricsets.map(function (metricset) {\n      return NDJSON.stringify({\n        metricset: metricset\n      });\n    }).join('');\n  };\n\n  _proto.ndjsonTransactions = function ndjsonTransactions(transactions, compress) {\n    var _this4 = this;\n\n    var key = compress ? 'x' : 'transaction';\n    return transactions.map(function (tr) {\n      var _NDJSON$stringify2;\n\n      var spans = '',\n          breakdowns = '';\n\n      if (!compress) {\n        if (tr.spans) {\n          spans = tr.spans.map(function (span) {\n            return NDJSON.stringify({\n              span: span\n            });\n          }).join('');\n          delete tr.spans;\n        }\n\n        if (tr.breakdown) {\n          breakdowns = _this4.ndjsonMetricsets(tr.breakdown);\n          delete tr.breakdown;\n        }\n      }\n\n      return NDJSON.stringify((_NDJSON$stringify2 = {}, _NDJSON$stringify2[key] = compress ? compressTransaction(tr) : tr, _NDJSON$stringify2)) + spans + breakdowns;\n    });\n  };\n\n  _proto.sendEvents = function sendEvents(events) {\n    var _payload, _NDJSON$stringify3;\n\n    if (events.length === 0) {\n      return;\n    }\n\n    var transactions = [];\n    var errors = [];\n\n    for (var i = 0; i < events.length; i++) {\n      var event = events[i];\n\n      if (event[TRANSACTIONS]) {\n        transactions.push(event[TRANSACTIONS]);\n      }\n\n      if (event[ERRORS]) {\n        errors.push(event[ERRORS]);\n      }\n    }\n\n    if (transactions.length === 0 && errors.length === 0) {\n      return;\n    }\n\n    var cfg = this._configService;\n    var payload = (_payload = {}, _payload[TRANSACTIONS] = transactions, _payload[ERRORS] = errors, _payload);\n    var filteredPayload = cfg.applyFilters(payload);\n\n    if (!filteredPayload) {\n      this._loggingService.warn('Dropped payload due to filtering!');\n\n      return;\n    }\n\n    var apiVersion = cfg.get('apiVersion');\n    var compress = apiVersion > 2;\n    var ndjson = [];\n    var metadata = this.createMetaData();\n    var metadataKey = compress ? 'm' : 'metadata';\n    ndjson.push(NDJSON.stringify((_NDJSON$stringify3 = {}, _NDJSON$stringify3[metadataKey] = compress ? compressMetadata(metadata) : metadata, _NDJSON$stringify3)));\n    ndjson = ndjson.concat(this.ndjsonErrors(filteredPayload[ERRORS], compress), this.ndjsonTransactions(filteredPayload[TRANSACTIONS], compress));\n    var ndjsonPayload = ndjson.join('');\n\n    var _this$getEndpoints2 = this.getEndpoints(),\n        intakeEndpoint = _this$getEndpoints2.intakeEndpoint;\n\n    return this._postJson(intakeEndpoint, ndjsonPayload);\n  };\n\n  _proto.getEndpoints = function getEndpoints() {\n    var serverUrl = this._configService.get('serverUrl');\n\n    var apiVersion = this._configService.get('apiVersion');\n\n    var serverUrlPrefix = this._configService.get('serverUrlPrefix') || \"/intake/v\" + apiVersion + \"/rum/events\";\n    var intakeEndpoint = serverUrl + serverUrlPrefix;\n    var configEndpoint = serverUrl + \"/config/v1/rum/agents\";\n    return {\n      intakeEndpoint: intakeEndpoint,\n      configEndpoint: configEndpoint\n    };\n  };\n\n  return ApmServer;\n}();\n\nexport default ApmServer;", "import { BEFORE_EVENT, AFTER_EVENT } from './constants';\n\nvar EventHandler = function () {\n  function EventHandler() {\n    this.observers = {};\n  }\n\n  var _proto = EventHandler.prototype;\n\n  _proto.observe = function observe(name, fn) {\n    var _this = this;\n\n    if (typeof fn === 'function') {\n      if (!this.observers[name]) {\n        this.observers[name] = [];\n      }\n\n      this.observers[name].push(fn);\n      return function () {\n        var index = _this.observers[name].indexOf(fn);\n\n        if (index > -1) {\n          _this.observers[name].splice(index, 1);\n        }\n      };\n    }\n  };\n\n  _proto.sendOnly = function sendOnly(name, args) {\n    var obs = this.observers[name];\n\n    if (obs) {\n      obs.forEach(function (fn) {\n        try {\n          fn.apply(undefined, args);\n        } catch (error) {\n          console.log(error, error.stack);\n        }\n      });\n    }\n  };\n\n  _proto.send = function send(name, args) {\n    this.sendOnly(name + BEFORE_EVENT, args);\n    this.sendOnly(name, args);\n    this.sendOnly(name + AFTER_EVENT, args);\n  };\n\n  return EventHandler;\n}();\n\nexport default EventHandler;", "function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { getCurrentScript, setLabel, merge, extend, isUndefined } from './utils';\nimport EventHandler from './event-handler';\nimport { CONFIG_CHANGE, LOCAL_CONFIG_KEY } from './constants';\n\nfunction getConfigFromScript() {\n  var script = getCurrentScript();\n  var config = getDataAttributesFromNode(script);\n  return config;\n}\n\nfunction getDataAttributesFromNode(node) {\n  if (!node) {\n    return {};\n  }\n\n  var dataAttrs = {};\n  var dataRegex = /^data-([\\w-]+)$/;\n  var attrs = node.attributes;\n\n  for (var i = 0; i < attrs.length; i++) {\n    var attr = attrs[i];\n\n    if (dataRegex.test(attr.nodeName)) {\n      var key = attr.nodeName.match(dataRegex)[1];\n      var camelCasedkey = key.split('-').map(function (value, index) {\n        return index > 0 ? value.charAt(0).toUpperCase() + value.substring(1) : value;\n      }).join('');\n      dataAttrs[camelCasedkey] = attr.value || attr.nodeValue;\n    }\n  }\n\n  return dataAttrs;\n}\n\nvar Config = function () {\n  function Config() {\n    this.config = {\n      serviceName: '',\n      serviceVersion: '',\n      environment: '',\n      serverUrl: 'http://localhost:8200',\n      serverUrlPrefix: '',\n      active: true,\n      instrument: true,\n      disableInstrumentations: [],\n      logLevel: 'warn',\n      breakdownMetrics: false,\n      ignoreTransactions: [],\n      eventsLimit: 80,\n      queueLimit: -1,\n      flushInterval: 500,\n      distributedTracing: true,\n      distributedTracingOrigins: [],\n      distributedTracingHeaderName: 'traceparent',\n      pageLoadTraceId: '',\n      pageLoadSpanId: '',\n      pageLoadSampled: false,\n      pageLoadTransactionName: '',\n      propagateTracestate: false,\n      transactionSampleRate: 1.0,\n      centralConfig: false,\n      monitorLongtasks: true,\n      apiVersion: 2,\n      context: {},\n      session: false,\n      apmRequest: null,\n      sendCredentials: false\n    };\n    this.events = new EventHandler();\n    this.filters = [];\n    this.version = '';\n  }\n\n  var _proto = Config.prototype;\n\n  _proto.init = function init() {\n    var scriptData = getConfigFromScript();\n    this.setConfig(scriptData);\n  };\n\n  _proto.setVersion = function setVersion(version) {\n    this.version = version;\n  };\n\n  _proto.addFilter = function addFilter(cb) {\n    if (typeof cb !== 'function') {\n      throw new Error('Argument to must be function');\n    }\n\n    this.filters.push(cb);\n  };\n\n  _proto.applyFilters = function applyFilters(data) {\n    for (var i = 0; i < this.filters.length; i++) {\n      data = this.filters[i](data);\n\n      if (!data) {\n        return;\n      }\n    }\n\n    return data;\n  };\n\n  _proto.get = function get(key) {\n    return key.split('.').reduce(function (obj, objKey) {\n      return obj && obj[objKey];\n    }, this.config);\n  };\n\n  _proto.setUserContext = function setUserContext(userContext) {\n    if (userContext === void 0) {\n      userContext = {};\n    }\n\n    var context = {};\n    var _userContext = userContext,\n        id = _userContext.id,\n        username = _userContext.username,\n        email = _userContext.email;\n\n    if (typeof id === 'number' || typeof id === 'string') {\n      context.id = id;\n    }\n\n    if (typeof username === 'string') {\n      context.username = username;\n    }\n\n    if (typeof email === 'string') {\n      context.email = email;\n    }\n\n    this.config.context.user = extend(this.config.context.user || {}, context);\n  };\n\n  _proto.setCustomContext = function setCustomContext(customContext) {\n    if (customContext === void 0) {\n      customContext = {};\n    }\n\n    this.config.context.custom = extend(this.config.context.custom || {}, customContext);\n  };\n\n  _proto.addLabels = function addLabels(tags) {\n    var _this = this;\n\n    if (!this.config.context.tags) {\n      this.config.context.tags = {};\n    }\n\n    var keys = Object.keys(tags);\n    keys.forEach(function (k) {\n      return setLabel(k, tags[k], _this.config.context.tags);\n    });\n  };\n\n  _proto.setConfig = function setConfig(properties) {\n    if (properties === void 0) {\n      properties = {};\n    }\n\n    var _properties = properties,\n        transactionSampleRate = _properties.transactionSampleRate,\n        serverUrl = _properties.serverUrl;\n\n    if (serverUrl) {\n      properties.serverUrl = serverUrl.replace(/\\/+$/, '');\n    }\n\n    if (!isUndefined(transactionSampleRate)) {\n      if (transactionSampleRate < 0.0001 && transactionSampleRate > 0) {\n        transactionSampleRate = 0.0001;\n      }\n\n      properties.transactionSampleRate = Math.round(transactionSampleRate * 10000) / 10000;\n    }\n\n    merge(this.config, properties);\n    this.events.send(CONFIG_CHANGE, [this.config]);\n  };\n\n  _proto.validate = function validate(properties) {\n    if (properties === void 0) {\n      properties = {};\n    }\n\n    var requiredKeys = ['serviceName', 'serverUrl'];\n    var allKeys = Object.keys(this.config);\n    var errors = {\n      missing: [],\n      invalid: [],\n      unknown: []\n    };\n    Object.keys(properties).forEach(function (key) {\n      if (requiredKeys.indexOf(key) !== -1 && !properties[key]) {\n        errors.missing.push(key);\n      }\n\n      if (allKeys.indexOf(key) === -1) {\n        errors.unknown.push(key);\n      }\n    });\n\n    if (properties.serviceName && !/^[a-zA-Z0-9 _-]+$/.test(properties.serviceName)) {\n      errors.invalid.push({\n        key: 'serviceName',\n        value: properties.serviceName,\n        allowed: 'a-z, A-Z, 0-9, _, -, <space>'\n      });\n    }\n\n    var sampleRate = properties.transactionSampleRate;\n\n    if (typeof sampleRate !== 'undefined' && (typeof sampleRate !== 'number' || isNaN(sampleRate) || sampleRate < 0 || sampleRate > 1)) {\n      errors.invalid.push({\n        key: 'transactionSampleRate',\n        value: sampleRate,\n        allowed: 'Number between 0 and 1'\n      });\n    }\n\n    return errors;\n  };\n\n  _proto.getLocalConfig = function getLocalConfig() {\n    var storage = sessionStorage;\n\n    if (this.config.session) {\n      storage = localStorage;\n    }\n\n    var config = storage.getItem(LOCAL_CONFIG_KEY);\n\n    if (config) {\n      return JSON.parse(config);\n    }\n  };\n\n  _proto.setLocalConfig = function setLocalConfig(config, merge) {\n    if (config) {\n      if (merge) {\n        var prevConfig = this.getLocalConfig();\n        config = _extends({}, prevConfig, config);\n      }\n\n      var storage = sessionStorage;\n\n      if (this.config.session) {\n        storage = localStorage;\n      }\n\n      storage.setItem(LOCAL_CONFIG_KEY, JSON.stringify(config));\n    }\n  };\n\n  _proto.dispatchEvent = function dispatchEvent(name, args) {\n    this.events.send(name, args);\n  };\n\n  _proto.observeEvent = function observeEvent(name, fn) {\n    return this.events.observe(name, fn);\n  };\n\n  return Config;\n}();\n\nexport default Config;", "import { noop } from './utils';\n\nvar LoggingService = function () {\n  function LoggingService(spec) {\n    if (spec === void 0) {\n      spec = {};\n    }\n\n    this.levels = ['trace', 'debug', 'info', 'warn', 'error'];\n    this.level = spec.level || 'warn';\n    this.prefix = spec.prefix || '';\n    this.resetLogMethods();\n  }\n\n  var _proto = LoggingService.prototype;\n\n  _proto.shouldLog = function shouldLog(level) {\n    return this.levels.indexOf(level) >= this.levels.indexOf(this.level);\n  };\n\n  _proto.setLevel = function setLevel(level) {\n    if (level === this.level) {\n      return;\n    }\n\n    this.level = level;\n    this.resetLogMethods();\n  };\n\n  _proto.resetLogMethods = function resetLogMethods() {\n    var _this = this;\n\n    this.levels.forEach(function (level) {\n      _this[level] = _this.shouldLog(level) ? log : noop;\n\n      function log() {\n        var normalizedLevel = level;\n\n        if (level === 'trace' || level === 'debug') {\n          normalizedLevel = 'info';\n        }\n\n        var args = arguments;\n        args[0] = this.prefix + args[0];\n\n        if (console) {\n          var realMethod = console[normalizedLevel] || console.log;\n\n          if (typeof realMethod === 'function') {\n            realMethod.apply(console, args);\n          }\n        }\n      }\n    });\n  };\n\n  return LoggingService;\n}();\n\nexport default LoggingService;", "var _serviceCreators;\n\nimport ApmServer from './apm-server';\nimport ConfigService from './config-service';\nimport LoggingService from './logging-service';\nimport { CONFIG_CHANGE, CONFIG_SERVICE, LOGGING_SERVICE, APM_SERVER } from './constants';\nimport { __DEV__ } from '../state';\nvar serviceCreators = (_serviceCreators = {}, _serviceCreators[CONFIG_SERVICE] = function () {\n  return new ConfigService();\n}, _serviceCreators[LOGGING_SERVICE] = function () {\n  return new LoggingService({\n    prefix: '[Elastic APM] '\n  });\n}, _serviceCreators[APM_SERVER] = function (factory) {\n  var _factory$getService = factory.getService([CONFIG_SERVICE, LOGGING_SERVICE]),\n      configService = _factory$getService[0],\n      loggingService = _factory$getService[1];\n\n  return new ApmServer(configService, loggingService);\n}, _serviceCreators);\n\nvar ServiceFactory = function () {\n  function ServiceFactory() {\n    this.instances = {};\n    this.initialized = false;\n  }\n\n  var _proto = ServiceFactory.prototype;\n\n  _proto.init = function init() {\n    if (this.initialized) {\n      return;\n    }\n\n    this.initialized = true;\n    var configService = this.getService(CONFIG_SERVICE);\n    configService.init();\n\n    var _this$getService = this.getService([LOGGING_SERVICE, APM_SERVER]),\n        loggingService = _this$getService[0],\n        apmServer = _this$getService[1];\n\n    configService.events.observe(CONFIG_CHANGE, function () {\n      var logLevel = configService.get('logLevel');\n      loggingService.setLevel(logLevel);\n    });\n    apmServer.init();\n  };\n\n  _proto.getService = function getService(name) {\n    var _this = this;\n\n    if (typeof name === 'string') {\n      if (!this.instances[name]) {\n        if (typeof serviceCreators[name] === 'function') {\n          this.instances[name] = serviceCreators[name](this);\n        } else if (__DEV__) {\n          console.log('Cannot get service, No creator for: ' + name);\n        }\n      }\n\n      return this.instances[name];\n    } else if (Array.isArray(name)) {\n      return name.map(function (n) {\n        return _this.getService(n);\n      });\n    }\n  };\n\n  return ServiceFactory;\n}();\n\nexport { serviceCreators, ServiceFactory };", "import ErrorLogging from './error-logging';\nimport { CONFIG_SERVICE, TRANSACTION_SERVICE, ERROR_LOGGING, APM_SERVER } from '../common/constants';\nimport { serviceCreators } from '../common/service-factory';\n\nfunction registerServices() {\n  serviceCreators[ERROR_LOGGING] = function (serviceFactory) {\n    var _serviceFactory$getSe = serviceFactory.getService([APM_SERVER, CONFIG_SERVICE, TRANSACTION_SERVICE]),\n        apmServer = _serviceFactory$getSe[0],\n        configService = _serviceFactory$getSe[1],\n        transactionService = _serviceFactory$getSe[2];\n\n    return new ErrorLogging(apmServer, configService, transactionService);\n  };\n}\n\nexport { registerServices };", "import { patchMethod, XHR_SYNC, XHR_URL, XHR_METHOD, XHR_IGNORE } from './patch-utils';\nimport { SCHEDULE, INVOKE, XMLHTTPREQUEST, ADD_EVENT_LISTENER_STR } from '../constants';\nexport function patchXMLHttpRequest(callback) {\n  var XMLHttpRequestPrototype = XMLHttpRequest.prototype;\n\n  if (!XMLHttpRequestPrototype || !XMLHttpRequestPrototype[ADD_EVENT_LISTENER_STR]) {\n    return;\n  }\n\n  var READY_STATE_CHANGE = 'readystatechange';\n  var LOAD = 'load';\n  var ERROR = 'error';\n  var TIMEOUT = 'timeout';\n  var ABORT = 'abort';\n\n  function invokeTask(task, status) {\n    if (task.state !== INVOKE) {\n      task.state = INVOKE;\n      task.data.status = status;\n      callback(INVOKE, task);\n    }\n  }\n\n  function scheduleTask(task) {\n    if (task.state === SCHEDULE) {\n      return;\n    }\n\n    task.state = SCHEDULE;\n    callback(SCHEDULE, task);\n    var target = task.data.target;\n\n    function addListener(name) {\n      target[ADD_EVENT_LISTENER_STR](name, function (_ref) {\n        var type = _ref.type;\n\n        if (type === READY_STATE_CHANGE) {\n          if (target.readyState === 4 && target.status !== 0) {\n            invokeTask(task, 'success');\n          }\n        } else {\n          var status = type === LOAD ? 'success' : type;\n          invokeTask(task, status);\n        }\n      });\n    }\n\n    addListener(READY_STATE_CHANGE);\n    addListener(LOAD);\n    addListener(TIMEOUT);\n    addListener(ERROR);\n    addListener(ABORT);\n  }\n\n  var openNative = patchMethod(XMLHttpRequestPrototype, 'open', function () {\n    return function (self, args) {\n      if (!self[XHR_IGNORE]) {\n        self[XHR_METHOD] = args[0];\n        self[XHR_URL] = args[1];\n        self[XHR_SYNC] = args[2] === false;\n      }\n\n      return openNative.apply(self, args);\n    };\n  });\n  var sendNative = patchMethod(XMLHttpRequestPrototype, 'send', function () {\n    return function (self, args) {\n      if (self[XHR_IGNORE]) {\n        return sendNative.apply(self, args);\n      }\n\n      var task = {\n        source: XMLHTTPREQUEST,\n        state: '',\n        type: 'macroTask',\n        data: {\n          target: self,\n          method: self[XHR_METHOD],\n          sync: self[XHR_SYNC],\n          url: self[XHR_URL],\n          status: ''\n        }\n      };\n\n      try {\n        scheduleTask(task);\n        return sendNative.apply(self, args);\n      } catch (e) {\n        invokeTask(task, ERROR);\n        throw e;\n      }\n    };\n  });\n}", "import { Promise } from '../polyfills';\nimport { globalState } from './patch-utils';\nimport { SCHEDULE, INVOKE, FETCH } from '../constants';\nimport { scheduleMicroTask } from '../utils';\nimport { isFetchSupported } from '../http/fetch';\nexport function patchFetch(callback) {\n  if (!isFetchSupported()) {\n    return;\n  }\n\n  function scheduleTask(task) {\n    task.state = SCHEDULE;\n    callback(SCHEDULE, task);\n  }\n\n  function invokeTask(task) {\n    task.state = INVOKE;\n    callback(INVOKE, task);\n  }\n\n  function handleResponseError(task, error) {\n    task.data.aborted = isAbortError(error);\n    task.data.error = error;\n    invokeTask(task);\n  }\n\n  function readStream(stream, task) {\n    var reader = stream.getReader();\n\n    var read = function read() {\n      reader.read().then(function (_ref) {\n        var done = _ref.done;\n\n        if (done) {\n          invokeTask(task);\n        } else {\n          read();\n        }\n      }, function (error) {\n        handleResponseError(task, error);\n      });\n    };\n\n    read();\n  }\n\n  var nativeFetch = window.fetch;\n\n  window.fetch = function (input, init) {\n    var fetchSelf = this;\n    var args = arguments;\n    var request, url;\n    var isURL = input instanceof URL;\n\n    if (typeof input === 'string' || isURL) {\n      request = new Request(input, init);\n\n      if (isURL) {\n        url = request.url;\n      } else {\n        url = input;\n      }\n    } else if (input) {\n      request = input;\n      url = request.url;\n    } else {\n      return nativeFetch.apply(fetchSelf, args);\n    }\n\n    var task = {\n      source: FETCH,\n      state: '',\n      type: 'macroTask',\n      data: {\n        target: request,\n        method: request.method,\n        url: url,\n        aborted: false\n      }\n    };\n    return new Promise(function (resolve, reject) {\n      globalState.fetchInProgress = true;\n      scheduleTask(task);\n      var promise;\n\n      try {\n        promise = nativeFetch.apply(fetchSelf, [request]);\n      } catch (error) {\n        reject(error);\n        task.data.error = error;\n        invokeTask(task);\n        globalState.fetchInProgress = false;\n        return;\n      }\n\n      promise.then(function (response) {\n        var clonedResponse = response.clone ? response.clone() : {};\n        resolve(response);\n        scheduleMicroTask(function () {\n          task.data.response = response;\n          var body = clonedResponse.body;\n\n          if (body) {\n            readStream(body, task);\n          } else {\n            invokeTask(task);\n          }\n        });\n      }, function (error) {\n        reject(error);\n        scheduleMicroTask(function () {\n          handleResponseError(task, error);\n        });\n      });\n      globalState.fetchInProgress = false;\n    });\n  };\n}\n\nfunction isAbortError(error) {\n  return error && error.name === 'AbortError';\n}", "import { INVOKE, HISTORY } from '../constants';\nexport function patchHistory(callback) {\n  if (!window.history) {\n    return;\n  }\n\n  var nativePushState = history.pushState;\n\n  if (typeof nativePushState === 'function') {\n    history.pushState = function (state, title, url) {\n      var task = {\n        source: HISTORY,\n        data: {\n          state: state,\n          title: title,\n          url: url\n        }\n      };\n      callback(INVOKE, task);\n      nativePushState.apply(this, arguments);\n    };\n  }\n}", "import { patchXMLHttpRequest } from './xhr-patch';\nimport { patchFetch } from './fetch-patch';\nimport { patchHistory } from './history-patch';\nimport EventHandler from '../event-handler';\nimport { HISTORY, FETCH, XMLHTTPREQUEST } from '../constants';\nvar patchEventHandler = new EventHandler();\nvar alreadyPatched = false;\n\nfunction patchAll() {\n  if (!alreadyPatched) {\n    alreadyPatched = true;\n    patchXMLHttpRequest(function (event, task) {\n      patchEventHandler.send(XMLHTTPREQUEST, [event, task]);\n    });\n    patchFetch(function (event, task) {\n      patchEventHandler.send(FETCH, [event, task]);\n    });\n    patchHistory(function (event, task) {\n      patchEventHandler.send(HISTORY, [event, task]);\n    });\n  }\n\n  return patchEventHandler;\n}\n\nexport { patchAll, patchEventHandler };", "import { checkSameOrigin, isDtHeaderValid, parseDtHeaderValue, getDtHeaderValue, getTSHeaderValue, stripQueryStringFromUrl, setRequestHeader } from '../common/utils';\nimport { Url } from '../common/url';\nimport { patchEventHandler } from '../common/patching';\nimport { globalState } from '../common/patching/patch-utils';\nimport { SCHEDULE, INVOKE, TRANSACTION_END, AFTER_EVENT, FETCH, HISTORY, XMLHTTPREQUEST, HTTP_REQUEST_TYPE, OUTCOME_FAILURE, OUTCOME_SUCCESS, OUTCOME_UNKNOWN, QUEUE_ADD_TRANSACTION, TRANSACTION_IGNORE } from '../common/constants';\nimport { truncateModel, SPAN_MODEL, TRANSACTION_MODEL } from '../common/truncate';\nimport { __DEV__ } from '../state';\nvar SIMILAR_SPAN_TO_TRANSACTION_RATIO = 0.05;\nvar TRANSACTION_DURATION_THRESHOLD = 60000;\nexport function groupSmallContinuouslySimilarSpans(originalSpans, transDuration, threshold) {\n  originalSpans.sort(function (spanA, spanB) {\n    return spanA._start - spanB._start;\n  });\n  var spans = [];\n  var lastCount = 1;\n  originalSpans.forEach(function (span, index) {\n    if (spans.length === 0) {\n      spans.push(span);\n    } else {\n      var lastSpan = spans[spans.length - 1];\n      var isContinuouslySimilar = lastSpan.type === span.type && lastSpan.subtype === span.subtype && lastSpan.action === span.action && lastSpan.name === span.name && span.duration() / transDuration < threshold && (span._start - lastSpan._end) / transDuration < threshold;\n      var isLastSpan = originalSpans.length === index + 1;\n\n      if (isContinuouslySimilar) {\n        lastCount++;\n        lastSpan._end = span._end;\n      }\n\n      if (lastCount > 1 && (!isContinuouslySimilar || isLastSpan)) {\n        lastSpan.name = lastCount + 'x ' + lastSpan.name;\n        lastCount = 1;\n      }\n\n      if (!isContinuouslySimilar) {\n        spans.push(span);\n      }\n    }\n  });\n  return spans;\n}\nexport function adjustTransaction(transaction) {\n  if (transaction.sampled) {\n    var filterdSpans = transaction.spans.filter(function (span) {\n      return span.duration() > 0 && span._start >= transaction._start && span._end <= transaction._end;\n    });\n\n    if (transaction.isManaged()) {\n      var duration = transaction.duration();\n      var similarSpans = groupSmallContinuouslySimilarSpans(filterdSpans, duration, SIMILAR_SPAN_TO_TRANSACTION_RATIO);\n      transaction.spans = similarSpans;\n    } else {\n      transaction.spans = filterdSpans;\n    }\n  } else {\n    transaction.resetFields();\n  }\n\n  return transaction;\n}\n\nvar PerformanceMonitoring = function () {\n  function PerformanceMonitoring(apmServer, configService, loggingService, transactionService) {\n    this._apmServer = apmServer;\n    this._configService = configService;\n    this._logginService = loggingService;\n    this._transactionService = transactionService;\n  }\n\n  var _proto = PerformanceMonitoring.prototype;\n\n  _proto.init = function init(flags) {\n    var _this = this;\n\n    if (flags === void 0) {\n      flags = {};\n    }\n\n    this._configService.events.observe(TRANSACTION_END + AFTER_EVENT, function (tr) {\n      var payload = _this.createTransactionPayload(tr);\n\n      if (payload) {\n        _this._apmServer.addTransaction(payload);\n\n        _this._configService.dispatchEvent(QUEUE_ADD_TRANSACTION);\n      }\n    });\n\n    if (flags[HISTORY]) {\n      patchEventHandler.observe(HISTORY, this.getHistorySub());\n    }\n\n    if (flags[XMLHTTPREQUEST]) {\n      patchEventHandler.observe(XMLHTTPREQUEST, this.getXHRSub());\n    }\n\n    if (flags[FETCH]) {\n      patchEventHandler.observe(FETCH, this.getFetchSub());\n    }\n  };\n\n  _proto.getHistorySub = function getHistorySub() {\n    var transactionService = this._transactionService;\n    return function (event, task) {\n      if (task.source === HISTORY && event === INVOKE) {\n        transactionService.startTransaction(task.data.title, 'route-change', {\n          managed: true,\n          canReuse: true\n        });\n      }\n    };\n  };\n\n  _proto.getXHRSub = function getXHRSub() {\n    var _this2 = this;\n\n    return function (event, task) {\n      if (task.source === XMLHTTPREQUEST && !globalState.fetchInProgress) {\n        _this2.processAPICalls(event, task);\n      }\n    };\n  };\n\n  _proto.getFetchSub = function getFetchSub() {\n    var _this3 = this;\n\n    return function (event, task) {\n      if (task.source === FETCH) {\n        _this3.processAPICalls(event, task);\n      }\n    };\n  };\n\n  _proto.processAPICalls = function processAPICalls(event, task) {\n    var configService = this._configService;\n    var transactionService = this._transactionService;\n\n    if (task.data && task.data.url) {\n      var endpoints = this._apmServer.getEndpoints();\n\n      var isOwnEndpoint = Object.keys(endpoints).some(function (endpoint) {\n        return task.data.url.indexOf(endpoints[endpoint]) !== -1;\n      });\n\n      if (isOwnEndpoint) {\n        return;\n      }\n    }\n\n    if (event === SCHEDULE && task.data) {\n      var data = task.data;\n      var requestUrl = new Url(data.url);\n      var spanName = data.method + ' ' + (requestUrl.relative ? requestUrl.path : stripQueryStringFromUrl(requestUrl.href));\n\n      if (!transactionService.getCurrentTransaction()) {\n        transactionService.startTransaction(spanName, HTTP_REQUEST_TYPE, {\n          managed: true\n        });\n      }\n\n      var span = transactionService.startSpan(spanName, 'external.http', {\n        blocking: true\n      });\n\n      if (!span) {\n        return;\n      }\n\n      var isDtEnabled = configService.get('distributedTracing');\n      var dtOrigins = configService.get('distributedTracingOrigins');\n      var currentUrl = new Url(window.location.href);\n      var isSameOrigin = checkSameOrigin(requestUrl.origin, currentUrl.origin) || checkSameOrigin(requestUrl.origin, dtOrigins);\n      var target = data.target;\n\n      if (isDtEnabled && isSameOrigin && target) {\n        this.injectDtHeader(span, target);\n        var propagateTracestate = configService.get('propagateTracestate');\n\n        if (propagateTracestate) {\n          this.injectTSHeader(span, target);\n        }\n      } else if (__DEV__) {\n        this._logginService.debug(\"Could not inject distributed tracing header to the request origin ('\" + requestUrl.origin + \"') from the current origin ('\" + currentUrl.origin + \"')\");\n      }\n\n      if (data.sync) {\n        span.sync = data.sync;\n      }\n\n      data.span = span;\n    } else if (event === INVOKE) {\n      var _data = task.data;\n\n      if (_data && _data.span) {\n        var _span = _data.span,\n            response = _data.response,\n            _target = _data.target;\n        var status;\n\n        if (response) {\n          status = response.status;\n        } else {\n          status = _target.status;\n        }\n\n        var outcome;\n\n        if (_data.status != 'abort' && !_data.aborted) {\n          if (status >= 400 || status == 0) {\n            outcome = OUTCOME_FAILURE;\n          } else {\n            outcome = OUTCOME_SUCCESS;\n          }\n        } else {\n          outcome = OUTCOME_UNKNOWN;\n        }\n\n        _span.outcome = outcome;\n        var tr = transactionService.getCurrentTransaction();\n\n        if (tr && tr.type === HTTP_REQUEST_TYPE) {\n          tr.outcome = outcome;\n        }\n\n        transactionService.endSpan(_span, _data);\n      }\n    }\n  };\n\n  _proto.injectDtHeader = function injectDtHeader(span, target) {\n    var headerName = this._configService.get('distributedTracingHeaderName');\n\n    var headerValue = getDtHeaderValue(span);\n    var isHeaderValid = isDtHeaderValid(headerValue);\n\n    if (isHeaderValid && headerValue && headerName) {\n      setRequestHeader(target, headerName, headerValue);\n    }\n  };\n\n  _proto.injectTSHeader = function injectTSHeader(span, target) {\n    var headerValue = getTSHeaderValue(span);\n\n    if (headerValue) {\n      setRequestHeader(target, 'tracestate', headerValue);\n    }\n  };\n\n  _proto.extractDtHeader = function extractDtHeader(target) {\n    var configService = this._configService;\n    var headerName = configService.get('distributedTracingHeaderName');\n\n    if (target) {\n      return parseDtHeaderValue(target[headerName]);\n    }\n  };\n\n  _proto.filterTransaction = function filterTransaction(tr) {\n    var duration = tr.duration();\n\n    if (!duration) {\n      if (__DEV__) {\n        var message = \"transaction(\" + tr.id + \", \" + tr.name + \") was discarded! \";\n\n        if (duration === 0) {\n          message += \"Transaction duration is 0\";\n        } else {\n          message += \"Transaction wasn't ended\";\n        }\n\n        this._logginService.debug(message);\n      }\n\n      return false;\n    }\n\n    if (tr.isManaged()) {\n      if (duration > TRANSACTION_DURATION_THRESHOLD) {\n        if (__DEV__) {\n          this._logginService.debug(\"transaction(\" + tr.id + \", \" + tr.name + \") was discarded! Transaction duration (\" + duration + \") is greater than managed transaction threshold (\" + TRANSACTION_DURATION_THRESHOLD + \")\");\n        }\n\n        return false;\n      }\n\n      if (tr.sampled && tr.spans.length === 0) {\n        if (__DEV__) {\n          this._logginService.debug(\"transaction(\" + tr.id + \", \" + tr.name + \") was discarded! Transaction does not have any spans\");\n        }\n\n        return false;\n      }\n    }\n\n    return true;\n  };\n\n  _proto.createTransactionDataModel = function createTransactionDataModel(transaction) {\n    var transactionStart = transaction._start;\n    var spans = transaction.spans.map(function (span) {\n      var spanData = {\n        id: span.id,\n        transaction_id: transaction.id,\n        parent_id: span.parentId || transaction.id,\n        trace_id: transaction.traceId,\n        name: span.name,\n        type: span.type,\n        subtype: span.subtype,\n        action: span.action,\n        sync: span.sync,\n        start: parseInt(span._start - transactionStart),\n        duration: span.duration(),\n        context: span.context,\n        outcome: span.outcome,\n        sample_rate: span.sampleRate\n      };\n      return truncateModel(SPAN_MODEL, spanData);\n    });\n    var transactionData = {\n      id: transaction.id,\n      trace_id: transaction.traceId,\n      session: transaction.session,\n      name: transaction.name,\n      type: transaction.type,\n      duration: transaction.duration(),\n      spans: spans,\n      context: transaction.context,\n      marks: transaction.marks,\n      breakdown: transaction.breakdownTimings,\n      span_count: {\n        started: spans.length\n      },\n      sampled: transaction.sampled,\n      sample_rate: transaction.sampleRate,\n      experience: transaction.experience,\n      outcome: transaction.outcome\n    };\n    return truncateModel(TRANSACTION_MODEL, transactionData);\n  };\n\n  _proto.createTransactionPayload = function createTransactionPayload(transaction) {\n    var adjustedTransaction = adjustTransaction(transaction);\n    var filtered = this.filterTransaction(adjustedTransaction);\n\n    if (filtered) {\n      return this.createTransactionDataModel(transaction);\n    }\n\n    this._configService.dispatchEvent(TRANSACTION_IGNORE);\n  };\n\n  return PerformanceMonitoring;\n}();\n\nexport { PerformanceMonitoring as default };", "import { generateRandomId, setLabel, merge, getDuration, getTime } from '../common/utils';\nimport { NAME_UNKNOWN, TYPE_CUSTOM } from '../common/constants';\n\nvar SpanBase = function () {\n  function SpanBase(name, type, options) {\n    if (options === void 0) {\n      options = {};\n    }\n\n    if (!name) {\n      name = NAME_UNKNOWN;\n    }\n\n    if (!type) {\n      type = TYPE_CUSTOM;\n    }\n\n    this.name = name;\n    this.type = type;\n    this.options = options;\n    this.id = options.id || generateRandomId(16);\n    this.traceId = options.traceId;\n    this.sampled = options.sampled;\n    this.sampleRate = options.sampleRate;\n    this.timestamp = options.timestamp;\n    this._start = getTime(options.startTime);\n    this._end = undefined;\n    this.ended = false;\n    this.outcome = undefined;\n    this.onEnd = options.onEnd;\n  }\n\n  var _proto = SpanBase.prototype;\n\n  _proto.ensureContext = function ensureContext() {\n    if (!this.context) {\n      this.context = {};\n    }\n  };\n\n  _proto.addLabels = function addLabels(tags) {\n    this.ensureContext();\n    var ctx = this.context;\n\n    if (!ctx.tags) {\n      ctx.tags = {};\n    }\n\n    var keys = Object.keys(tags);\n    keys.forEach(function (k) {\n      return setLabel(k, tags[k], ctx.tags);\n    });\n  };\n\n  _proto.addContext = function addContext() {\n    for (var _len = arguments.length, context = new Array(_len), _key = 0; _key < _len; _key++) {\n      context[_key] = arguments[_key];\n    }\n\n    if (context.length === 0) return;\n    this.ensureContext();\n    merge.apply(void 0, [this.context].concat(context));\n  };\n\n  _proto.end = function end(endTime) {\n    if (this.ended) {\n      return;\n    }\n\n    this.ended = true;\n    this._end = getTime(endTime);\n    this.callOnEnd();\n  };\n\n  _proto.callOnEnd = function callOnEnd() {\n    if (typeof this.onEnd === 'function') {\n      this.onEnd(this);\n    }\n  };\n\n  _proto.duration = function duration() {\n    return getDuration(this._start, this._end);\n  };\n\n  return SpanBase;\n}();\n\nexport default SpanBase;", "function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport SpanBase from './span-base';\nimport { addSpanContext } from '../common/context';\n\nvar Span = function (_SpanBase) {\n  _inheritsLoose(Span, _SpanBase);\n\n  function Span(name, type, options) {\n    var _this;\n\n    _this = _SpanBase.call(this, name, type, options) || this;\n    _this.parentId = _this.options.parentId;\n    _this.subtype = undefined;\n    _this.action = undefined;\n\n    if (_this.type.indexOf('.') !== -1) {\n      var fields = _this.type.split('.', 3);\n\n      _this.type = fields[0];\n      _this.subtype = fields[1];\n      _this.action = fields[2];\n    }\n\n    _this.sync = _this.options.sync;\n    return _this;\n  }\n\n  var _proto = Span.prototype;\n\n  _proto.end = function end(endTime, data) {\n    _SpanBase.prototype.end.call(this, endTime);\n\n    addSpanContext(this, data);\n  };\n\n  return Span;\n}(SpanBase);\n\nexport default Span;", "import { getDuration, PERF } from '../common/utils';\nimport { PAGE_LOAD, TRUNCATED_TYPE } from '../common/constants';\nvar pageLoadBreakdowns = [['domainLookupStart', 'domainLookupEnd', 'DNS'], ['connectStart', 'connectEnd', 'TCP'], ['requestStart', 'responseStart', 'Request'], ['responseStart', 'responseEnd', 'Response'], ['domLoading', 'domComplete', 'Processing'], ['loadEventStart', 'loadEventEnd', 'Load']];\n\nfunction getValue(value) {\n  return {\n    value: value\n  };\n}\n\nfunction calculateSelfTime(transaction) {\n  var spans = transaction.spans,\n      _start = transaction._start,\n      _end = transaction._end;\n\n  if (spans.length === 0) {\n    return transaction.duration();\n  }\n\n  spans.sort(function (span1, span2) {\n    return span1._start - span2._start;\n  });\n  var span = spans[0];\n  var spanEnd = span._end;\n  var spanStart = span._start;\n  var lastContinuousEnd = spanEnd;\n  var selfTime = spanStart - _start;\n\n  for (var i = 1; i < spans.length; i++) {\n    span = spans[i];\n    spanStart = span._start;\n    spanEnd = span._end;\n\n    if (spanStart > lastContinuousEnd) {\n      selfTime += spanStart - lastContinuousEnd;\n      lastContinuousEnd = spanEnd;\n    } else if (spanEnd > lastContinuousEnd) {\n      lastContinuousEnd = spanEnd;\n    }\n  }\n\n  if (lastContinuousEnd < _end) {\n    selfTime += _end - lastContinuousEnd;\n  }\n\n  return selfTime;\n}\n\nfunction groupSpans(transaction) {\n  var spanMap = {};\n  var transactionSelfTime = calculateSelfTime(transaction);\n  spanMap['app'] = {\n    count: 1,\n    duration: transactionSelfTime\n  };\n  var spans = transaction.spans;\n\n  for (var i = 0; i < spans.length; i++) {\n    var span = spans[i];\n    var duration = span.duration();\n\n    if (duration === 0 || duration == null) {\n      continue;\n    }\n\n    var type = span.type,\n        subtype = span.subtype;\n    var key = type.replace(TRUNCATED_TYPE, '');\n\n    if (subtype) {\n      key += '.' + subtype;\n    }\n\n    if (!spanMap[key]) {\n      spanMap[key] = {\n        duration: 0,\n        count: 0\n      };\n    }\n\n    spanMap[key].count++;\n    spanMap[key].duration += duration;\n  }\n\n  return spanMap;\n}\n\nfunction getSpanBreakdown(transactionDetails, _ref) {\n  var details = _ref.details,\n      _ref$count = _ref.count,\n      count = _ref$count === void 0 ? 1 : _ref$count,\n      duration = _ref.duration;\n  return {\n    transaction: transactionDetails,\n    span: details,\n    samples: {\n      'span.self_time.count': getValue(count),\n      'span.self_time.sum.us': getValue(duration * 1000)\n    }\n  };\n}\n\nexport function captureBreakdown(transaction, timings) {\n  if (timings === void 0) {\n    timings = PERF.timing;\n  }\n\n  var breakdowns = [];\n  var name = transaction.name,\n      type = transaction.type,\n      sampled = transaction.sampled;\n  var transactionDetails = {\n    name: name,\n    type: type\n  };\n\n  if (!sampled) {\n    return breakdowns;\n  }\n\n  if (type === PAGE_LOAD && timings) {\n    for (var i = 0; i < pageLoadBreakdowns.length; i++) {\n      var current = pageLoadBreakdowns[i];\n      var start = timings[current[0]];\n      var end = timings[current[1]];\n      var duration = getDuration(start, end);\n\n      if (duration === 0 || duration == null) {\n        continue;\n      }\n\n      breakdowns.push(getSpanBreakdown(transactionDetails, {\n        details: {\n          type: current[2]\n        },\n        duration: duration\n      }));\n    }\n  } else {\n    var spanMap = groupSpans(transaction);\n    Object.keys(spanMap).forEach(function (key) {\n      var _key$split = key.split('.'),\n          type = _key$split[0],\n          subtype = _key$split[1];\n\n      var _spanMap$key = spanMap[key],\n          duration = _spanMap$key.duration,\n          count = _spanMap$key.count;\n      breakdowns.push(getSpanBreakdown(transactionDetails, {\n        details: {\n          type: type,\n          subtype: subtype\n        },\n        duration: duration,\n        count: count\n      }));\n    });\n  }\n\n  return breakdowns;\n}", "function _inheritsLoose(subClass, superClass) { subClass.prototype = Object.create(superClass.prototype); subClass.prototype.constructor = subClass; _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nimport Span from './span';\nimport SpanBase from './span-base';\nimport { generateRandomId, merge, now, getTime, extend, removeInvalidChars } from '../common/utils';\nimport { REUSABILITY_THRESHOLD, TRUNCATED_TYPE } from '../common/constants';\nimport { captureBreakdown as _captureBreakdown } from './breakdown';\n\nvar Transaction = function (_SpanBase) {\n  _inheritsLoose(Transaction, _SpanBase);\n\n  function Transaction(name, type, options) {\n    var _this;\n\n    _this = _SpanBase.call(this, name, type, options) || this;\n    _this.traceId = generateRandomId();\n    _this.marks = undefined;\n    _this.spans = [];\n    _this._activeSpans = {};\n    _this._activeTasks = new Set();\n    _this.blocked = false;\n    _this.captureTimings = false;\n    _this.breakdownTimings = [];\n    _this.sampleRate = _this.options.transactionSampleRate;\n    _this.sampled = Math.random() <= _this.sampleRate;\n    return _this;\n  }\n\n  var _proto = Transaction.prototype;\n\n  _proto.addMarks = function addMarks(obj) {\n    this.marks = merge(this.marks || {}, obj);\n  };\n\n  _proto.mark = function mark(key) {\n    var skey = removeInvalidChars(key);\n\n    var markTime = now() - this._start;\n\n    var custom = {};\n    custom[skey] = markTime;\n    this.addMarks({\n      custom: custom\n    });\n  };\n\n  _proto.canReuse = function canReuse() {\n    var threshold = this.options.reuseThreshold || REUSABILITY_THRESHOLD;\n    return !!this.options.canReuse && !this.ended && now() - this._start < threshold;\n  };\n\n  _proto.redefine = function redefine(name, type, options) {\n    if (name) {\n      this.name = name;\n    }\n\n    if (type) {\n      this.type = type;\n    }\n\n    if (options) {\n      this.options.reuseThreshold = options.reuseThreshold;\n      extend(this.options, options);\n    }\n  };\n\n  _proto.startSpan = function startSpan(name, type, options) {\n    var _this2 = this;\n\n    if (this.ended) {\n      return;\n    }\n\n    var opts = extend({}, options);\n\n    opts.onEnd = function (trc) {\n      _this2._onSpanEnd(trc);\n    };\n\n    opts.traceId = this.traceId;\n    opts.sampled = this.sampled;\n    opts.sampleRate = this.sampleRate;\n\n    if (!opts.parentId) {\n      opts.parentId = this.id;\n    }\n\n    var span = new Span(name, type, opts);\n    this._activeSpans[span.id] = span;\n\n    if (opts.blocking) {\n      this.addTask(span.id);\n    }\n\n    return span;\n  };\n\n  _proto.isFinished = function isFinished() {\n    return !this.blocked && this._activeTasks.size === 0;\n  };\n\n  _proto.detectFinish = function detectFinish() {\n    if (this.isFinished()) this.end();\n  };\n\n  _proto.end = function end(endTime) {\n    if (this.ended) {\n      return;\n    }\n\n    this.ended = true;\n    this._end = getTime(endTime);\n\n    for (var sid in this._activeSpans) {\n      var span = this._activeSpans[sid];\n      span.type = span.type + TRUNCATED_TYPE;\n      span.end(endTime);\n    }\n\n    this.callOnEnd();\n  };\n\n  _proto.captureBreakdown = function captureBreakdown() {\n    this.breakdownTimings = _captureBreakdown(this);\n  };\n\n  _proto.block = function block(flag) {\n    this.blocked = flag;\n\n    if (!this.blocked) {\n      this.detectFinish();\n    }\n  };\n\n  _proto.addTask = function addTask(taskId) {\n    if (!taskId) {\n      taskId = 'task-' + generateRandomId(16);\n    }\n\n    this._activeTasks.add(taskId);\n\n    return taskId;\n  };\n\n  _proto.removeTask = function removeTask(taskId) {\n    var deleted = this._activeTasks.delete(taskId);\n\n    deleted && this.detectFinish();\n  };\n\n  _proto.resetFields = function resetFields() {\n    this.spans = [];\n    this.sampleRate = 0;\n  };\n\n  _proto._onSpanEnd = function _onSpanEnd(span) {\n    this.spans.push(span);\n    delete this._activeSpans[span.id];\n    this.removeTask(span.id);\n  };\n\n  _proto.isManaged = function isManaged() {\n    return !!this.options.managed;\n  };\n\n  return Transaction;\n}(SpanBase);\n\nexport default Transaction;", "function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport { LONG_TASK, LARGEST_CONTENTFUL_PAINT, FIRST_CONTENTFUL_PAINT, FIRST_INPUT, LAYOUT_SHIFT } from '../../common/constants';\nimport { noop, PERF, isPerfTypeSupported, isRedirectInfoAvailable } from '../../common/utils';\nimport Span from '../span';\nexport var metrics = {\n  fid: 0,\n  fcp: 0,\n  tbt: {\n    start: Infinity,\n    duration: 0\n  },\n  cls: {\n    score: 0,\n    firstEntryTime: Number.NEGATIVE_INFINITY,\n    prevEntryTime: Number.NEGATIVE_INFINITY,\n    currentSessionScore: 0\n  },\n  longtask: {\n    count: 0,\n    duration: 0,\n    max: 0\n  }\n};\nvar LONG_TASK_THRESHOLD = 50;\nexport function createLongTaskSpans(longtasks, agg) {\n  var spans = [];\n\n  for (var i = 0; i < longtasks.length; i++) {\n    var _longtasks$i = longtasks[i],\n        name = _longtasks$i.name,\n        startTime = _longtasks$i.startTime,\n        duration = _longtasks$i.duration,\n        attribution = _longtasks$i.attribution;\n    var end = startTime + duration;\n    var span = new Span(\"Longtask(\" + name + \")\", LONG_TASK, {\n      startTime: startTime\n    });\n    agg.count++;\n    agg.duration += duration;\n    agg.max = Math.max(duration, agg.max);\n\n    if (attribution.length > 0) {\n      var _attribution$ = attribution[0],\n          _name = _attribution$.name,\n          containerType = _attribution$.containerType,\n          containerName = _attribution$.containerName,\n          containerId = _attribution$.containerId;\n      var customContext = {\n        attribution: _name,\n        type: containerType\n      };\n\n      if (containerName) {\n        customContext.name = containerName;\n      }\n\n      if (containerId) {\n        customContext.id = containerId;\n      }\n\n      span.addContext({\n        custom: customContext\n      });\n    }\n\n    span.end(end);\n    spans.push(span);\n  }\n\n  return spans;\n}\nexport function createFirstInputDelaySpan(fidEntries) {\n  var firstInput = fidEntries[0];\n\n  if (firstInput) {\n    var startTime = firstInput.startTime,\n        processingStart = firstInput.processingStart;\n    var span = new Span('First Input Delay', FIRST_INPUT, {\n      startTime: startTime\n    });\n    span.end(processingStart);\n    return span;\n  }\n}\nexport function createTotalBlockingTimeSpan(tbtObject) {\n  var start = tbtObject.start,\n      duration = tbtObject.duration;\n  var tbtSpan = new Span('Total Blocking Time', LONG_TASK, {\n    startTime: start\n  });\n  tbtSpan.end(start + duration);\n  return tbtSpan;\n}\nexport function calculateTotalBlockingTime(longtaskEntries) {\n  longtaskEntries.forEach(function (entry) {\n    var name = entry.name,\n        startTime = entry.startTime,\n        duration = entry.duration;\n\n    if (startTime < metrics.fcp) {\n      return;\n    }\n\n    if (name !== 'self' && name.indexOf('same-origin') === -1) {\n      return;\n    }\n\n    metrics.tbt.start = Math.min(metrics.tbt.start, startTime);\n    var blockingTime = duration - LONG_TASK_THRESHOLD;\n\n    if (blockingTime > 0) {\n      metrics.tbt.duration += blockingTime;\n    }\n  });\n}\nexport function calculateCumulativeLayoutShift(clsEntries) {\n  clsEntries.forEach(function (entry) {\n    if (!entry.hadRecentInput && entry.value) {\n      var shouldCreateNewSession = entry.startTime - metrics.cls.firstEntryTime > 5000 || entry.startTime - metrics.cls.prevEntryTime > 1000;\n\n      if (shouldCreateNewSession) {\n        metrics.cls.firstEntryTime = entry.startTime;\n        metrics.cls.currentSessionScore = 0;\n      }\n\n      metrics.cls.prevEntryTime = entry.startTime;\n      metrics.cls.currentSessionScore += entry.value;\n      metrics.cls.score = Math.max(metrics.cls.score, metrics.cls.currentSessionScore);\n    }\n  });\n}\nexport function captureObserverEntries(list, _ref) {\n  var isHardNavigation = _ref.isHardNavigation,\n      trStart = _ref.trStart;\n  var longtaskEntries = list.getEntriesByType(LONG_TASK).filter(function (entry) {\n    return entry.startTime >= trStart;\n  });\n  var longTaskSpans = createLongTaskSpans(longtaskEntries, metrics.longtask);\n  var result = {\n    spans: longTaskSpans,\n    marks: {}\n  };\n\n  if (!isHardNavigation) {\n    return result;\n  }\n\n  var lcpEntries = list.getEntriesByType(LARGEST_CONTENTFUL_PAINT);\n  var lastLcpEntry = lcpEntries[lcpEntries.length - 1];\n\n  if (lastLcpEntry) {\n    var lcp = parseInt(lastLcpEntry.startTime);\n    metrics.lcp = lcp;\n    result.marks.largestContentfulPaint = lcp;\n  }\n\n  var timing = PERF.timing;\n  var unloadDiff = timing.fetchStart - timing.navigationStart;\n\n  if (isRedirectInfoAvailable(timing)) {\n    unloadDiff = 0;\n  }\n\n  var fcpEntry = list.getEntriesByName(FIRST_CONTENTFUL_PAINT)[0];\n\n  if (fcpEntry) {\n    var fcp = parseInt(unloadDiff >= 0 ? fcpEntry.startTime - unloadDiff : fcpEntry.startTime);\n    metrics.fcp = fcp;\n    result.marks.firstContentfulPaint = fcp;\n  }\n\n  var fidEntries = list.getEntriesByType(FIRST_INPUT);\n  var fidSpan = createFirstInputDelaySpan(fidEntries);\n\n  if (fidSpan) {\n    metrics.fid = fidSpan.duration();\n    result.spans.push(fidSpan);\n  }\n\n  calculateTotalBlockingTime(longtaskEntries);\n  var clsEntries = list.getEntriesByType(LAYOUT_SHIFT);\n  calculateCumulativeLayoutShift(clsEntries);\n  return result;\n}\nexport var PerfEntryRecorder = function () {\n  function PerfEntryRecorder(callback) {\n    this.po = {\n      observe: noop,\n      disconnect: noop\n    };\n\n    if (window.PerformanceObserver) {\n      this.po = new PerformanceObserver(callback);\n    }\n  }\n\n  var _proto = PerfEntryRecorder.prototype;\n\n  _proto.start = function start(type, options) {\n    if (options === void 0) {\n      options = {\n        buffered: true\n      };\n    }\n\n    try {\n      if (!isPerfTypeSupported(type)) {\n        return;\n      }\n\n      this.po.observe(_extends({\n        type: type\n      }, options));\n    } catch (_) {}\n  };\n\n  _proto.stop = function stop() {\n    this.po.disconnect();\n  };\n\n  return PerfEntryRecorder;\n}();", "import { MAX_SPAN_DURATION } from '../../common/constants';\n\nfunction shouldCreateSpan(start, end, trStart, trEnd, baseTime) {\n  if (baseTime === void 0) {\n    baseTime = 0;\n  }\n\n  return typeof start === 'number' && typeof end === 'number' && start >= baseTime && end > start && start - baseTime >= trStart && end - baseTime <= trEnd && end - start < MAX_SPAN_DURATION && start - baseTime < MAX_SPAN_DURATION && end - baseTime < MAX_SPAN_DURATION;\n}\n\nexport { shouldCreateSpan };", "import { shouldCreateSpan } from './utils';\nimport Span from '../span';\nvar eventPairs = [['redirectStart', 'redirectEnd', 'Redirect'], ['domainLookupStart', 'domainLookupEnd', 'Domain lookup'], ['connectStart', 'connectEnd', 'Making a connection to the server'], ['requestStart', 'responseEnd', 'Requesting and receiving the document'], ['domLoading', 'domInteractive', 'Parsing the document, executing sync. scripts'], ['domContentLoadedEventStart', 'domContentLoadedEventEnd', 'Fire \"DOMContentLoaded\" event'], ['loadEventStart', 'loadEventEnd', 'Fire \"load\" event']];\n\nfunction createNavigationTimingSpans(timings, baseTime, trStart, trEnd) {\n  var spans = [];\n\n  for (var i = 0; i < eventPairs.length; i++) {\n    var start = timings[eventPairs[i][0]];\n    var end = timings[eventPairs[i][1]];\n\n    if (!shouldCreateSpan(start, end, trStart, trEnd, baseTime)) {\n      continue;\n    }\n\n    var span = new Span(eventPairs[i][2], 'hard-navigation.browser-timing');\n    var data = null;\n\n    if (eventPairs[i][0] === 'requestStart') {\n      span.pageResponse = true;\n      data = {\n        url: location.origin\n      };\n    }\n\n    span._start = start - baseTime;\n    span.end(end - baseTime, data);\n    spans.push(span);\n  }\n\n  return spans;\n}\n\nexport { createNavigationTimingSpans };", "import { USER_TIMING_THRESHOLD } from '../../common/constants';\nimport { shouldCreateSpan } from './utils';\nimport Span from '../span';\n\nfunction createUserTimingSpans(entries, trStart, trEnd) {\n  var userTimingSpans = [];\n\n  for (var i = 0; i < entries.length; i++) {\n    var _entries$i = entries[i],\n        name = _entries$i.name,\n        startTime = _entries$i.startTime,\n        duration = _entries$i.duration;\n    var end = startTime + duration;\n\n    if (duration <= USER_TIMING_THRESHOLD || !shouldCreateSpan(startTime, end, trStart, trEnd)) {\n      continue;\n    }\n\n    var kind = 'app';\n    var span = new Span(name, kind);\n    span._start = startTime;\n    span.end(end);\n    userTimingSpans.push(span);\n  }\n\n  return userTimingSpans;\n}\n\nexport { createUserTimingSpans };", "import { stripQueryStringFromUrl } from '../../common/utils';\nimport { shouldCreateSpan } from './utils';\nimport { RESOURCE_INITIATOR_TYPES } from '../../common/constants';\nimport Span from '../span';\n\nfunction createResourceTimingSpan(resourceTimingEntry) {\n  var name = resourceTimingEntry.name,\n      initiatorType = resourceTimingEntry.initiatorType,\n      startTime = resourceTimingEntry.startTime,\n      responseEnd = resourceTimingEntry.responseEnd;\n  var kind = 'resource';\n\n  if (initiatorType) {\n    kind += '.' + initiatorType;\n  }\n\n  var spanName = stripQueryStringFromUrl(name);\n  var span = new Span(spanName, kind);\n  span._start = startTime;\n  span.end(responseEnd, {\n    url: name,\n    entry: resourceTimingEntry\n  });\n  return span;\n}\n\nfunction isCapturedByPatching(resourceStartTime, requestPatchTime) {\n  return requestPatchTime != null && resourceStartTime > requestPatchTime;\n}\n\nfunction isIntakeAPIEndpoint(url) {\n  return /intake\\/v\\d+\\/rum\\/events/.test(url);\n}\n\nfunction createResourceTimingSpans(entries, requestPatchTime, trStart, trEnd) {\n  var spans = [];\n\n  for (var i = 0; i < entries.length; i++) {\n    var _entries$i = entries[i],\n        initiatorType = _entries$i.initiatorType,\n        name = _entries$i.name,\n        startTime = _entries$i.startTime,\n        responseEnd = _entries$i.responseEnd;\n\n    if (RESOURCE_INITIATOR_TYPES.indexOf(initiatorType) === -1 || name == null) {\n      continue;\n    }\n\n    if ((initiatorType === 'xmlhttprequest' || initiatorType === 'fetch') && (isIntakeAPIEndpoint(name) || isCapturedByPatching(startTime, requestPatchTime))) {\n      continue;\n    }\n\n    if (shouldCreateSpan(startTime, responseEnd, trStart, trEnd)) {\n      spans.push(createResourceTimingSpan(entries[i]));\n    }\n  }\n\n  return spans;\n}\n\nexport { createResourceTimingSpans };", "import { PERF, isPerfTimelineSupported, isRedirectInfoAvailable } from '../../common/utils';\nimport { PAGE_LOAD, RESOURCE, MEASURE } from '../../common/constants';\nimport { state } from '../../state';\nimport { createNavigationTimingSpans } from './navigation-timing';\nimport { createUserTimingSpans } from './user-timing';\nimport { createResourceTimingSpans } from './resource-timing';\nimport { getPageLoadMarks } from './marks';\n\nfunction captureNavigation(transaction) {\n  if (!transaction.captureTimings) {\n    if (transaction.type === PAGE_LOAD) {\n      transaction._start = 0;\n    }\n\n    return;\n  }\n\n  var trEnd = transaction._end;\n\n  if (transaction.type === PAGE_LOAD) {\n    if (transaction.marks && transaction.marks.custom) {\n      var customMarks = transaction.marks.custom;\n      Object.keys(customMarks).forEach(function (key) {\n        customMarks[key] += transaction._start;\n      });\n    }\n\n    var trStart = 0;\n    transaction._start = trStart;\n    var timings = PERF.timing;\n    var baseTime = isRedirectInfoAvailable(timings) ? timings.redirectStart : timings.fetchStart;\n    createNavigationTimingSpans(timings, baseTime, trStart, trEnd).forEach(function (span) {\n      span.traceId = transaction.traceId;\n      span.sampled = transaction.sampled;\n\n      if (span.pageResponse && transaction.options.pageLoadSpanId) {\n        span.id = transaction.options.pageLoadSpanId;\n      }\n\n      transaction.spans.push(span);\n    });\n    transaction.addMarks(getPageLoadMarks(timings));\n  }\n\n  if (isPerfTimelineSupported()) {\n    var _trStart = transaction._start;\n    var resourceEntries = PERF.getEntriesByType(RESOURCE);\n    createResourceTimingSpans(resourceEntries, state.bootstrapTime, _trStart, trEnd).forEach(function (span) {\n      return transaction.spans.push(span);\n    });\n    var userEntries = PERF.getEntriesByType(MEASURE);\n    createUserTimingSpans(userEntries, _trStart, trEnd).forEach(function (span) {\n      return transaction.spans.push(span);\n    });\n  }\n}\n\nexport { captureNavigation, createNavigationTimingSpans, createResourceTimingSpans, createUserTimingSpans, getPageLoadMarks };", "import { Promise } from '../common/polyfills';\nimport Transaction from './transaction';\nimport { PerfEntryRecorder, captureObserverEntries, metrics, createTotalBlockingTimeSpan } from './metrics/metrics';\nimport { extend, getEarliestSpan, getLatestNonXHRSpan, getLatestXHRSpan, isPerfTypeSupported, generateRandomId } from '../common/utils';\nimport { captureNavigation } from './navigation/capture-navigation';\nimport { PAGE_LOAD, NAME_UNKNOWN, TRANSACTION_START, TRANSACTION_END, TRANSACTION_IGNORE, TEMPORARY_TYPE, TRANSACTION_TYPE_ORDER, LARGEST_CONTENTFUL_PAINT, LONG_TASK, PAINT, TRUNCATED_TYPE, FIRST_INPUT, LAYOUT_SHIFT, SESSION_TIMEOUT, PAGE_LOAD_DELAY } from '../common/constants';\nimport { addTransactionContext } from '../common/context';\nimport { __DEV__, state } from '../state';\nimport { slugifyUrl } from '../common/url';\n\nvar TransactionService = function () {\n  function TransactionService(logger, config) {\n    var _this = this;\n\n    this._config = config;\n    this._logger = logger;\n    this.currentTransaction = undefined;\n    this.respIntervalId = undefined;\n    this.recorder = new PerfEntryRecorder(function (list) {\n      var tr = _this.getCurrentTransaction();\n\n      if (tr && tr.captureTimings) {\n        var _tr$spans;\n\n        var isHardNavigation = tr.type === PAGE_LOAD;\n\n        var _captureObserverEntri = captureObserverEntries(list, {\n          isHardNavigation: isHardNavigation,\n          trStart: isHardNavigation ? 0 : tr._start\n        }),\n            spans = _captureObserverEntri.spans,\n            marks = _captureObserverEntri.marks;\n\n        (_tr$spans = tr.spans).push.apply(_tr$spans, spans);\n\n        tr.addMarks({\n          agent: marks\n        });\n      }\n    });\n  }\n\n  var _proto = TransactionService.prototype;\n\n  _proto.createCurrentTransaction = function createCurrentTransaction(name, type, options) {\n    var tr = new Transaction(name, type, options);\n    this.currentTransaction = tr;\n    return tr;\n  };\n\n  _proto.getCurrentTransaction = function getCurrentTransaction() {\n    if (this.currentTransaction && !this.currentTransaction.ended) {\n      return this.currentTransaction;\n    }\n  };\n\n  _proto.createOptions = function createOptions(options) {\n    var config = this._config.config;\n    var presetOptions = {\n      transactionSampleRate: config.transactionSampleRate\n    };\n    var perfOptions = extend(presetOptions, options);\n\n    if (perfOptions.managed) {\n      perfOptions = extend({\n        pageLoadTraceId: config.pageLoadTraceId,\n        pageLoadSampled: config.pageLoadSampled,\n        pageLoadSpanId: config.pageLoadSpanId,\n        pageLoadTransactionName: config.pageLoadTransactionName\n      }, perfOptions);\n    }\n\n    return perfOptions;\n  };\n\n  _proto.startManagedTransaction = function startManagedTransaction(name, type, perfOptions) {\n    var tr = this.getCurrentTransaction();\n    var isRedefined = false;\n\n    if (!tr) {\n      tr = this.createCurrentTransaction(name, type, perfOptions);\n    } else if (tr.canReuse() && perfOptions.canReuse) {\n      var redefineType = tr.type;\n      var currentTypeOrder = TRANSACTION_TYPE_ORDER.indexOf(tr.type);\n      var redefineTypeOrder = TRANSACTION_TYPE_ORDER.indexOf(type);\n\n      if (currentTypeOrder >= 0 && redefineTypeOrder < currentTypeOrder) {\n        redefineType = type;\n      }\n\n      if (__DEV__) {\n        this._logger.debug(\"redefining transaction(\" + tr.id + \", \" + tr.name + \", \" + tr.type + \")\", 'to', \"(\" + (name || tr.name) + \", \" + redefineType + \")\", tr);\n      }\n\n      tr.redefine(name, redefineType, perfOptions);\n      isRedefined = true;\n    } else {\n      if (__DEV__) {\n        this._logger.debug(\"ending previous transaction(\" + tr.id + \", \" + tr.name + \")\", tr);\n      }\n\n      tr.end();\n      tr = this.createCurrentTransaction(name, type, perfOptions);\n    }\n\n    if (tr.type === PAGE_LOAD) {\n      if (!isRedefined) {\n        this.recorder.start(LARGEST_CONTENTFUL_PAINT);\n        this.recorder.start(PAINT);\n        this.recorder.start(FIRST_INPUT);\n        this.recorder.start(LAYOUT_SHIFT);\n      }\n\n      if (perfOptions.pageLoadTraceId) {\n        tr.traceId = perfOptions.pageLoadTraceId;\n      }\n\n      if (perfOptions.pageLoadSampled) {\n        tr.sampled = perfOptions.pageLoadSampled;\n      }\n\n      if (tr.name === NAME_UNKNOWN && perfOptions.pageLoadTransactionName) {\n        tr.name = perfOptions.pageLoadTransactionName;\n      }\n    }\n\n    if (!isRedefined && this._config.get('monitorLongtasks')) {\n      this.recorder.start(LONG_TASK);\n    }\n\n    if (tr.sampled) {\n      tr.captureTimings = true;\n    }\n\n    return tr;\n  };\n\n  _proto.startTransaction = function startTransaction(name, type, options) {\n    var _this2 = this;\n\n    var perfOptions = this.createOptions(options);\n    var tr;\n    var fireOnstartHook = true;\n\n    if (perfOptions.managed) {\n      var current = this.currentTransaction;\n      tr = this.startManagedTransaction(name, type, perfOptions);\n\n      if (current === tr) {\n        fireOnstartHook = false;\n      }\n    } else {\n      tr = new Transaction(name, type, perfOptions);\n    }\n\n    tr.onEnd = function () {\n      return _this2.handleTransactionEnd(tr);\n    };\n\n    if (fireOnstartHook) {\n      if (__DEV__) {\n        this._logger.debug(\"startTransaction(\" + tr.id + \", \" + tr.name + \", \" + tr.type + \")\");\n      }\n\n      this._config.events.send(TRANSACTION_START, [tr]);\n    }\n\n    return tr;\n  };\n\n  _proto.handleTransactionEnd = function handleTransactionEnd(tr) {\n    var _this3 = this;\n\n    this.recorder.stop();\n    var currentUrl = window.location.href;\n    return Promise.resolve().then(function () {\n      var name = tr.name,\n          type = tr.type;\n      var lastHiddenStart = state.lastHiddenStart;\n\n      if (lastHiddenStart >= tr._start) {\n        if (__DEV__) {\n          _this3._logger.debug(\"transaction(\" + tr.id + \", \" + name + \", \" + type + \") was discarded! The page was hidden during the transaction!\");\n        }\n\n        _this3._config.dispatchEvent(TRANSACTION_IGNORE);\n\n        return;\n      }\n\n      if (_this3.shouldIgnoreTransaction(name) || type === TEMPORARY_TYPE) {\n        if (__DEV__) {\n          _this3._logger.debug(\"transaction(\" + tr.id + \", \" + name + \", \" + type + \") is ignored\");\n        }\n\n        _this3._config.dispatchEvent(TRANSACTION_IGNORE);\n\n        return;\n      }\n\n      if (type === PAGE_LOAD) {\n        var pageLoadTransactionName = _this3._config.get('pageLoadTransactionName');\n\n        if (name === NAME_UNKNOWN && pageLoadTransactionName) {\n          tr.name = pageLoadTransactionName;\n        }\n\n        if (tr.captureTimings) {\n          var cls = metrics.cls,\n              fid = metrics.fid,\n              tbt = metrics.tbt,\n              longtask = metrics.longtask;\n\n          if (tbt.duration > 0) {\n            tr.spans.push(createTotalBlockingTimeSpan(tbt));\n          }\n\n          tr.experience = {};\n\n          if (isPerfTypeSupported(LONG_TASK)) {\n            tr.experience.tbt = tbt.duration;\n          }\n\n          if (isPerfTypeSupported(LAYOUT_SHIFT)) {\n            tr.experience.cls = cls.score;\n          }\n\n          if (fid > 0) {\n            tr.experience.fid = fid;\n          }\n\n          if (longtask.count > 0) {\n            tr.experience.longtask = {\n              count: longtask.count,\n              sum: longtask.duration,\n              max: longtask.max\n            };\n          }\n        }\n\n        _this3.setSession(tr);\n      }\n\n      if (tr.name === NAME_UNKNOWN) {\n        tr.name = slugifyUrl(currentUrl);\n      }\n\n      captureNavigation(tr);\n\n      _this3.adjustTransactionTime(tr);\n\n      var breakdownMetrics = _this3._config.get('breakdownMetrics');\n\n      if (breakdownMetrics) {\n        tr.captureBreakdown();\n      }\n\n      var configContext = _this3._config.get('context');\n\n      addTransactionContext(tr, configContext);\n\n      _this3._config.events.send(TRANSACTION_END, [tr]);\n\n      if (__DEV__) {\n        _this3._logger.debug(\"end transaction(\" + tr.id + \", \" + tr.name + \", \" + tr.type + \")\", tr);\n      }\n    }, function (err) {\n      if (__DEV__) {\n        _this3._logger.debug(\"error ending transaction(\" + tr.id + \", \" + tr.name + \")\", err);\n      }\n    });\n  };\n\n  _proto.setSession = function setSession(tr) {\n    var session = this._config.get('session');\n\n    if (session) {\n      if (typeof session == 'boolean') {\n        tr.session = {\n          id: generateRandomId(16),\n          sequence: 1\n        };\n      } else {\n        if (session.timestamp && Date.now() - session.timestamp > SESSION_TIMEOUT) {\n          tr.session = {\n            id: generateRandomId(16),\n            sequence: 1\n          };\n        } else {\n          tr.session = {\n            id: session.id,\n            sequence: session.sequence ? session.sequence + 1 : 1\n          };\n        }\n      }\n\n      var sessionConfig = {\n        session: {\n          id: tr.session.id,\n          sequence: tr.session.sequence,\n          timestamp: Date.now()\n        }\n      };\n\n      this._config.setConfig(sessionConfig);\n\n      this._config.setLocalConfig(sessionConfig, true);\n    }\n  };\n\n  _proto.adjustTransactionTime = function adjustTransactionTime(transaction) {\n    var spans = transaction.spans;\n    var earliestSpan = getEarliestSpan(spans);\n\n    if (earliestSpan && earliestSpan._start < transaction._start) {\n      transaction._start = earliestSpan._start;\n    }\n\n    var latestSpan = getLatestNonXHRSpan(spans) || {};\n    var latestSpanEnd = latestSpan._end || 0;\n\n    if (transaction.type === PAGE_LOAD) {\n      var transactionEndWithoutDelay = transaction._end - PAGE_LOAD_DELAY;\n      var lcp = metrics.lcp || 0;\n      var latestXHRSpan = getLatestXHRSpan(spans) || {};\n      var latestXHRSpanEnd = latestXHRSpan._end || 0;\n      transaction._end = Math.max(latestSpanEnd, latestXHRSpanEnd, lcp, transactionEndWithoutDelay);\n    } else if (latestSpanEnd > transaction._end) {\n      transaction._end = latestSpanEnd;\n    }\n\n    this.truncateSpans(spans, transaction._end);\n  };\n\n  _proto.truncateSpans = function truncateSpans(spans, transactionEnd) {\n    for (var i = 0; i < spans.length; i++) {\n      var span = spans[i];\n\n      if (span._end > transactionEnd) {\n        span._end = transactionEnd;\n        span.type += TRUNCATED_TYPE;\n      }\n\n      if (span._start > transactionEnd) {\n        span._start = transactionEnd;\n      }\n    }\n  };\n\n  _proto.shouldIgnoreTransaction = function shouldIgnoreTransaction(transactionName) {\n    var ignoreList = this._config.get('ignoreTransactions');\n\n    if (ignoreList && ignoreList.length) {\n      for (var i = 0; i < ignoreList.length; i++) {\n        var element = ignoreList[i];\n\n        if (typeof element.test === 'function') {\n          if (element.test(transactionName)) {\n            return true;\n          }\n        } else if (element === transactionName) {\n          return true;\n        }\n      }\n    }\n\n    return false;\n  };\n\n  _proto.startSpan = function startSpan(name, type, options) {\n    var tr = this.getCurrentTransaction();\n\n    if (!tr) {\n      tr = this.createCurrentTransaction(undefined, TEMPORARY_TYPE, this.createOptions({\n        canReuse: true,\n        managed: true\n      }));\n    }\n\n    var span = tr.startSpan(name, type, options);\n\n    if (__DEV__) {\n      this._logger.debug(\"startSpan(\" + name + \", \" + span.type + \")\", \"on transaction(\" + tr.id + \", \" + tr.name + \")\");\n    }\n\n    return span;\n  };\n\n  _proto.endSpan = function endSpan(span, context) {\n    if (!span) {\n      return;\n    }\n\n    if (__DEV__) {\n      var tr = this.getCurrentTransaction();\n      tr && this._logger.debug(\"endSpan(\" + span.name + \", \" + span.type + \")\", \"on transaction(\" + tr.id + \", \" + tr.name + \")\");\n    }\n\n    span.end(null, context);\n  };\n\n  return TransactionService;\n}();\n\nexport default TransactionService;", "import { EVENT, FIRST_INPUT } from '../../../common/constants';\nimport { isPerfInteractionCountSupported } from '../../../common/utils';\nimport { PerfEntryRecorder } from '../metrics';\nvar INP_THRESHOLD = 40;\nvar MAX_INTERACTIONS_TO_CONSIDER = 10;\nexport var inpState = {\n  minInteractionId: Infinity,\n  maxInteractionId: 0,\n  interactionCount: 0,\n  longestInteractions: []\n};\nexport function observeUserInteractions(recorder) {\n  if (recorder === void 0) {\n    recorder = new PerfEntryRecorder(processUserInteractions);\n  }\n\n  var isPerfCountSupported = isPerfInteractionCountSupported();\n  var durationThreshold = isPerfCountSupported ? INP_THRESHOLD : 16;\n  recorder.start(EVENT, {\n    buffered: true,\n    durationThreshold: durationThreshold\n  });\n\n  if (!isPerfCountSupported) {\n    recorder.start(FIRST_INPUT);\n  }\n}\nexport function processUserInteractions(list) {\n  var entries = list.getEntries();\n  entries.forEach(function (entry) {\n    if (!entry.interactionId) {\n      return;\n    }\n\n    updateInteractionCount(entry);\n\n    if (entry.duration < INP_THRESHOLD) {\n      return;\n    }\n\n    storeUserInteraction(entry);\n  });\n}\nexport function calculateInp() {\n  if (inpState.longestInteractions.length === 0) {\n    if (interactionCount() > 0) {\n      return 0;\n    }\n\n    return;\n  }\n\n  var interactionIndex = Math.min(inpState.longestInteractions.length - 1, Math.floor(interactionCount() / 50));\n  var inp = inpState.longestInteractions[interactionIndex].duration;\n  return inp;\n}\nexport function interactionCount() {\n  return performance.interactionCount || inpState.interactionCount;\n}\nexport function restoreINPState() {\n  inpState.minInteractionId = Infinity;\n  inpState.maxInteractionId = 0;\n  inpState.interactionCount = 0;\n  inpState.longestInteractions = [];\n}\n\nfunction storeUserInteraction(entry) {\n  var leastSlow = inpState.longestInteractions[inpState.longestInteractions.length - 1];\n\n  if (typeof leastSlow !== 'undefined' && entry.duration <= leastSlow.duration && entry.interactionId != leastSlow.id) {\n    return;\n  }\n\n  var filteredInteraction = inpState.longestInteractions.filter(function (interaction) {\n    return interaction.id === entry.interactionId;\n  });\n\n  if (filteredInteraction.length > 0) {\n    var foundInteraction = filteredInteraction[0];\n    foundInteraction.duration = Math.max(foundInteraction.duration, entry.duration);\n  } else {\n    inpState.longestInteractions.push({\n      id: entry.interactionId,\n      duration: entry.duration\n    });\n  }\n\n  inpState.longestInteractions.sort(function (a, b) {\n    return b.duration - a.duration;\n  });\n  inpState.longestInteractions.splice(MAX_INTERACTIONS_TO_CONSIDER);\n}\n\nfunction updateInteractionCount(entry) {\n  if (isPerfInteractionCountSupported()) {\n    return;\n  }\n\n  inpState.minInteractionId = Math.min(inpState.minInteractionId, entry.interactionId);\n  inpState.maxInteractionId = Math.max(inpState.maxInteractionId, entry.interactionId);\n  inpState.interactionCount = (inpState.maxInteractionId - inpState.minInteractionId) / 7 + 1;\n}", "import { calculateInp, restoreINPState } from './process';\nimport { now } from '../../../common/utils';\nimport { PAGE_EXIT } from '../../../common/constants';\nexport function reportInp(transactionService) {\n  var inp = calculateInp();\n\n  if (inp >= 0) {\n    var startTime = now();\n    var inpTr = transactionService.startTransaction(PAGE_EXIT, PAGE_EXIT, {\n      startTime: startTime\n    });\n    var navigations = performance.getEntriesByType('navigation');\n\n    if (navigations.length > 0) {\n      var hardNavigationUrl = navigations[0].name;\n      inpTr.addContext({\n        page: {\n          url: hardNavigationUrl\n        }\n      });\n    }\n\n    inpTr.addLabels({\n      inp_value: inp\n    });\n    var endTime = startTime + inp + 1;\n    inpTr.end(endTime);\n    restoreINPState();\n    return inpTr;\n  }\n}", "import PerformanceMonitoring from './performance-monitoring';\nimport TransactionService from './transaction-service';\nimport { APM_SERVER, CONFIG_SERVICE, LOGGING_SERVICE, TRANSACTION_SERVICE, PERFORMANCE_MONITORING } from '../common/constants';\nimport { serviceCreators } from '../common/service-factory';\nimport { observeUserInteractions } from './metrics/inp/process';\nimport { reportInp } from './metrics/inp/report';\n\nfunction registerServices() {\n  serviceCreators[TRANSACTION_SERVICE] = function (serviceFactory) {\n    var _serviceFactory$getSe = serviceFactory.getService([LOGGING_SERVICE, CONFIG_SERVICE]),\n        loggingService = _serviceFactory$getSe[0],\n        configService = _serviceFactory$getSe[1];\n\n    return new TransactionService(loggingService, configService);\n  };\n\n  serviceCreators[PERFORMANCE_MONITORING] = function (serviceFactory) {\n    var _serviceFactory$getSe2 = serviceFactory.getService([APM_SERVER, CONFIG_SERVICE, LOGGING_SERVICE, TRANSACTION_SERVICE]),\n        apmServer = _serviceFactory$getSe2[0],\n        configService = _serviceFactory$getSe2[1],\n        loggingService = _serviceFactory$getSe2[2],\n        transactionService = _serviceFactory$getSe2[3];\n\n    return new PerformanceMonitoring(apmServer, configService, loggingService, transactionService);\n  };\n}\n\nexport { registerServices, observeUserInteractions, reportInp };", "import { QUEUE_ADD_TRANSACTION, QUEUE_FLUSH, TRANSACTION_IGNORE } from '../constants';\nimport { state } from '../../state';\nimport { now } from '../utils';\nimport { reportInp } from '../../performance-monitoring/metrics/inp/report';\nexport function observePageVisibility(configService, transactionService) {\n  if (document.visibilityState === 'hidden') {\n    state.lastHiddenStart = 0;\n  }\n\n  var visibilityChangeHandler = function visibilityChangeHandler() {\n    if (document.visibilityState === 'hidden') {\n      onPageHidden(configService, transactionService);\n    }\n  };\n\n  var pageHideHandler = function pageHideHandler() {\n    return onPageHidden(configService, transactionService);\n  };\n\n  var useCapture = true;\n  window.addEventListener('visibilitychange', visibilityChangeHandler, useCapture);\n  window.addEventListener('pagehide', pageHideHandler, useCapture);\n  return function () {\n    window.removeEventListener('visibilitychange', visibilityChangeHandler, useCapture);\n    window.removeEventListener('pagehide', pageHideHandler, useCapture);\n  };\n}\n\nfunction onPageHidden(configService, transactionService) {\n  var inpTr = reportInp(transactionService);\n\n  if (inpTr) {\n    var unobserve = configService.observeEvent(QUEUE_ADD_TRANSACTION, function () {\n      endManagedTransaction(configService, transactionService);\n      unobserve();\n    });\n  } else {\n    endManagedTransaction(configService, transactionService);\n  }\n}\n\nfunction endManagedTransaction(configService, transactionService) {\n  var tr = transactionService.getCurrentTransaction();\n\n  if (tr) {\n    var unobserveDiscard = configService.observeEvent(TRANSACTION_IGNORE, function () {\n      state.lastHiddenStart = now();\n      unobserveDiscard();\n      unobserveQueueAdd();\n    });\n    var unobserveQueueAdd = configService.observeEvent(QUEUE_ADD_TRANSACTION, function () {\n      configService.dispatchEvent(QUEUE_FLUSH);\n      state.lastHiddenStart = now();\n      unobserveQueueAdd();\n      unobserveDiscard();\n    });\n    tr.end();\n  } else {\n    configService.dispatchEvent(QUEUE_FLUSH);\n    state.lastHiddenStart = now();\n  }\n}", "import { USER_INTERACTION } from '../constants';\nvar INTERACTIVE_SELECTOR = 'a[data-transaction-name], button[data-transaction-name]';\nexport function observePageClicks(transactionService) {\n  var clickHandler = function clickHandler(event) {\n    if (event.target instanceof Element) {\n      createUserInteractionTransaction(transactionService, event.target);\n    }\n  };\n\n  var eventName = 'click';\n  var useCapture = true;\n  window.addEventListener(eventName, clickHandler, useCapture);\n  return function () {\n    window.removeEventListener(eventName, clickHandler, useCapture);\n  };\n}\n\nfunction createUserInteractionTransaction(transactionService, target) {\n  var _getTransactionMetada = getTransactionMetadata(target),\n      transactionName = _getTransactionMetada.transactionName,\n      context = _getTransactionMetada.context;\n\n  var tr = transactionService.startTransaction(\"Click - \" + transactionName, USER_INTERACTION, {\n    managed: true,\n    canReuse: true,\n    reuseThreshold: 300\n  });\n\n  if (tr && context) {\n    tr.addContext(context);\n  }\n}\n\nfunction getTransactionMetadata(target) {\n  var metadata = {\n    transactionName: null,\n    context: null\n  };\n  metadata.transactionName = buildTransactionName(target);\n  var classes = target.getAttribute('class');\n\n  if (classes) {\n    metadata.context = {\n      custom: {\n        classes: classes\n      }\n    };\n  }\n\n  return metadata;\n}\n\nfunction buildTransactionName(target) {\n  var dtName = findCustomTransactionName(target);\n\n  if (dtName) {\n    return dtName;\n  }\n\n  var tagName = target.tagName.toLowerCase();\n  var name = target.getAttribute('name');\n\n  if (!!name) {\n    return tagName + \"[\\\"\" + name + \"\\\"]\";\n  }\n\n  return tagName;\n}\n\nfunction findCustomTransactionName(target) {\n  var trCustomNameAttribute = 'data-transaction-name';\n  var fallbackName = target.getAttribute(trCustomNameAttribute);\n\n  if (target.closest) {\n    var element = target.closest(INTERACTIVE_SELECTOR);\n    return element ? element.getAttribute(trCustomNameAttribute) : fallbackName;\n  }\n\n  return fallbackName;\n}", "import { XMLHTTPREQUEST, FETCH, HISTORY, PAGE_LOAD, ERROR, EVENT_TARGET, CLICK } from './constants';\nexport function getInstrumentationFlags(instrument, disabledInstrumentations) {\n  var _flags;\n\n  var flags = (_flags = {}, _flags[XMLHTTPREQUEST] = false, _flags[FETCH] = false, _flags[HISTORY] = false, _flags[PAGE_LOAD] = false, _flags[ERROR] = false, _flags[EVENT_TARGET] = false, _flags[CLICK] = false, _flags);\n\n  if (!instrument) {\n    return flags;\n  }\n\n  Object.keys(flags).forEach(function (key) {\n    if (disabledInstrumentations.indexOf(key) === -1) {\n      flags[key] = true;\n    }\n  });\n  return flags;\n}", "import { isPlatformSupported, isBrowser, now } from './common/utils';\nimport { patchAll } from './common/patching';\nimport { state } from './state';\nvar enabled = false;\nexport function bootstrap() {\n  if (isPlatformSupported()) {\n    patchAll();\n    state.bootstrapTime = now();\n    enabled = true;\n  } else if (isBrowser) {\n    console.log('[Elastic APM] platform is not supported!');\n  }\n\n  return enabled;\n}", "import { registerServices as registerErrorServices } from './error-logging';\nimport { registerServices as registerPerfServices, observeUserInteractions } from './performance-monitoring';\nimport { ServiceFactory } from './common/service-factory';\nimport { isPlatformSupported, scheduleMicroTask, scheduleMacroTask, isBrowser } from './common/utils';\nimport { patchAll, patchEventHandler } from './common/patching';\nimport { observePageVisibility, observePageClicks } from './common/observers';\nimport { PAGE_LOAD_DELAY, PAGE_LOAD, ERROR, CONFIG_SERVICE, LOGGING_SERVICE, TRANSACTION_SERVICE, APM_SERVER, PERFORMANCE_MONITORING, ERROR_LOGGING, EVENT_TARGET, CLICK } from './common/constants';\nimport { getInstrumentationFlags } from './common/instrument';\nimport afterFrame from './common/after-frame';\nimport { bootstrap } from './bootstrap';\nimport { createTracer } from './opentracing';\n\nfunction createServiceFactory() {\n  registerPerfServices();\n  registerErrorServices();\n  var serviceFactory = new ServiceFactory();\n  return serviceFactory;\n}\n\nexport { createServiceFactory, ServiceFactory, patchAll, patchEventHandler, isPlatformSupported, isBrowser, getInstrumentationFlags, createTracer, scheduleMicroTask, scheduleMacroTask, afterFrame, ERROR, PAGE_LOAD_DELAY, PAGE_LOAD, CONFIG_SERVICE, LOGGING_SERVICE, TRANSACTION_SERVICE, APM_SERVER, PERFORMANCE_MONITORING, ERROR_LOGGING, EVENT_TARGET, CLICK, observeUserInteractions, bootstrap, observePageVisibility, observePageClicks };", "import { getInstrumentationFlags, PAGE_LOAD_DELAY, PAGE_LOAD, ERROR, CONFIG_SERVICE, LOGGING_SERVICE, TRANSACTION_SERVICE, PERFORMANCE_MONITORING, ERROR_LOGGING, APM_SERVER, EVENT_TARGET, CLICK, observePageVisibility, observePageClicks, observeUserInteractions } from '@elastic/apm-rum-core';\n\nvar ApmBase = function () {\n  function ApmBase(serviceFactory, disable) {\n    this._disable = disable;\n    this.serviceFactory = serviceFactory;\n    this._initialized = false;\n  }\n\n  var _proto = ApmBase.prototype;\n\n  _proto.isEnabled = function isEnabled() {\n    return !this._disable;\n  };\n\n  _proto.isActive = function isActive() {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    return this.isEnabled() && this._initialized && configService.get('active');\n  };\n\n  _proto.init = function init(config) {\n    var _this = this;\n\n    if (this.isEnabled() && !this._initialized) {\n      this._initialized = true;\n\n      var _this$serviceFactory$ = this.serviceFactory.getService([CONFIG_SERVICE, LOGGING_SERVICE, TRANSACTION_SERVICE]),\n          configService = _this$serviceFactory$[0],\n          loggingService = _this$serviceFactory$[1],\n          transactionService = _this$serviceFactory$[2];\n\n      configService.setVersion('5.16.0');\n      this.config(config);\n      var logLevel = configService.get('logLevel');\n      loggingService.setLevel(logLevel);\n      var isConfigActive = configService.get('active');\n\n      if (isConfigActive) {\n        this.serviceFactory.init();\n        var flags = getInstrumentationFlags(configService.get('instrument'), configService.get('disableInstrumentations'));\n        var performanceMonitoring = this.serviceFactory.getService(PERFORMANCE_MONITORING);\n        performanceMonitoring.init(flags);\n\n        if (flags[ERROR]) {\n          var errorLogging = this.serviceFactory.getService(ERROR_LOGGING);\n          errorLogging.registerListeners();\n        }\n\n        if (configService.get('session')) {\n          var localConfig = configService.getLocalConfig();\n\n          if (localConfig && localConfig.session) {\n            configService.setConfig({\n              session: localConfig.session\n            });\n          }\n        }\n\n        var sendPageLoad = function sendPageLoad() {\n          return flags[PAGE_LOAD] && _this._sendPageLoadMetrics();\n        };\n\n        if (configService.get('centralConfig')) {\n          this.fetchCentralConfig().then(sendPageLoad);\n        } else {\n          sendPageLoad();\n        }\n\n        observePageVisibility(configService, transactionService);\n\n        if (flags[EVENT_TARGET] && flags[CLICK]) {\n          observePageClicks(transactionService);\n        }\n\n        observeUserInteractions();\n      } else {\n        this._disable = true;\n        loggingService.warn('RUM agent is inactive');\n      }\n    }\n\n    return this;\n  };\n\n  _proto.fetchCentralConfig = function fetchCentralConfig() {\n    var _this$serviceFactory$2 = this.serviceFactory.getService([APM_SERVER, LOGGING_SERVICE, CONFIG_SERVICE]),\n        apmServer = _this$serviceFactory$2[0],\n        loggingService = _this$serviceFactory$2[1],\n        configService = _this$serviceFactory$2[2];\n\n    return apmServer.fetchConfig(configService.get('serviceName'), configService.get('environment')).then(function (config) {\n      var transactionSampleRate = config['transaction_sample_rate'];\n\n      if (transactionSampleRate) {\n        transactionSampleRate = Number(transactionSampleRate);\n        var _config2 = {\n          transactionSampleRate: transactionSampleRate\n        };\n\n        var _configService$valida = configService.validate(_config2),\n            invalid = _configService$valida.invalid;\n\n        if (invalid.length === 0) {\n          configService.setConfig(_config2);\n        } else {\n          var _invalid$ = invalid[0],\n              key = _invalid$.key,\n              value = _invalid$.value,\n              allowed = _invalid$.allowed;\n          loggingService.warn(\"invalid value \\\"\" + value + \"\\\" for \" + key + \". Allowed: \" + allowed + \".\");\n        }\n      }\n\n      return config;\n    }).catch(function (error) {\n      loggingService.warn('failed fetching config:', error);\n    });\n  };\n\n  _proto._sendPageLoadMetrics = function _sendPageLoadMetrics() {\n    var tr = this.startTransaction(undefined, PAGE_LOAD, {\n      managed: true,\n      canReuse: true\n    });\n\n    if (!tr) {\n      return;\n    }\n\n    tr.addTask(PAGE_LOAD);\n\n    var sendPageLoadMetrics = function sendPageLoadMetrics() {\n      setTimeout(function () {\n        return tr.removeTask(PAGE_LOAD);\n      }, PAGE_LOAD_DELAY);\n    };\n\n    if (document.readyState === 'complete') {\n      sendPageLoadMetrics();\n    } else {\n      window.addEventListener('load', sendPageLoadMetrics);\n    }\n  };\n\n  _proto.observe = function observe(name, fn) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.events.observe(name, fn);\n  };\n\n  _proto.config = function config(_config) {\n    var _this$serviceFactory$3 = this.serviceFactory.getService([CONFIG_SERVICE, LOGGING_SERVICE]),\n        configService = _this$serviceFactory$3[0],\n        loggingService = _this$serviceFactory$3[1];\n\n    var _configService$valida2 = configService.validate(_config),\n        missing = _configService$valida2.missing,\n        invalid = _configService$valida2.invalid,\n        unknown = _configService$valida2.unknown;\n\n    if (unknown.length > 0) {\n      var message = 'Unknown config options are specified for RUM agent: ' + unknown.join(', ');\n      loggingService.warn(message);\n    }\n\n    if (missing.length === 0 && invalid.length === 0) {\n      configService.setConfig(_config);\n    } else {\n      var separator = ', ';\n      var _message = \"RUM agent isn't correctly configured. \";\n\n      if (missing.length > 0) {\n        _message += missing.join(separator) + ' is missing';\n\n        if (invalid.length > 0) {\n          _message += separator;\n        }\n      }\n\n      invalid.forEach(function (_ref, index) {\n        var key = _ref.key,\n            value = _ref.value,\n            allowed = _ref.allowed;\n        _message += key + \" \\\"\" + value + \"\\\" contains invalid characters! (allowed: \" + allowed + \")\" + (index !== invalid.length - 1 ? separator : '');\n      });\n      loggingService.error(_message);\n      configService.setConfig({\n        active: false\n      });\n    }\n  };\n\n  _proto.setUserContext = function setUserContext(userContext) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.setUserContext(userContext);\n  };\n\n  _proto.setCustomContext = function setCustomContext(customContext) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.setCustomContext(customContext);\n  };\n\n  _proto.addLabels = function addLabels(labels) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.addLabels(labels);\n  };\n\n  _proto.setInitialPageLoadName = function setInitialPageLoadName(name) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.setConfig({\n      pageLoadTransactionName: name\n    });\n  };\n\n  _proto.startTransaction = function startTransaction(name, type, options) {\n    if (this.isEnabled()) {\n      var transactionService = this.serviceFactory.getService(TRANSACTION_SERVICE);\n      return transactionService.startTransaction(name, type, options);\n    }\n  };\n\n  _proto.startSpan = function startSpan(name, type, options) {\n    if (this.isEnabled()) {\n      var transactionService = this.serviceFactory.getService(TRANSACTION_SERVICE);\n      return transactionService.startSpan(name, type, options);\n    }\n  };\n\n  _proto.getCurrentTransaction = function getCurrentTransaction() {\n    if (this.isEnabled()) {\n      var transactionService = this.serviceFactory.getService(TRANSACTION_SERVICE);\n      return transactionService.getCurrentTransaction();\n    }\n  };\n\n  _proto.captureError = function captureError(error) {\n    if (this.isEnabled()) {\n      var errorLogging = this.serviceFactory.getService(ERROR_LOGGING);\n      return errorLogging.logError(error);\n    }\n  };\n\n  _proto.addFilter = function addFilter(fn) {\n    var configService = this.serviceFactory.getService(CONFIG_SERVICE);\n    configService.addFilter(fn);\n  };\n\n  return ApmBase;\n}();\n\nexport { ApmBase as default };", "import { createServiceFactory, bootstrap, isBrowser } from '@elastic/apm-rum-core';\nimport ApmBase from './apm-base';\n\nfunction getApmBase() {\n  if (isBrowser && window.elasticApm) {\n    return window.elasticApm;\n  }\n\n  var enabled = bootstrap();\n  var serviceFactory = createServiceFactory();\n  var apmBase = new ApmBase(serviceFactory, !enabled);\n\n  if (isBrowser) {\n    window.elasticApm = apmBase;\n  }\n\n  return apmBase;\n}\n\nvar apmBase = getApmBase();\nvar init = apmBase.init.bind(apmBase);\nexport default init;\nexport { init, apmBase, ApmBase, apmBase as apm };", "import { init as initApm } from '@elastic/apm-rum';\r\nimport { ENVIRONMENT, ELK_SERVICE_URL, ELK_SERVICE_NAME, ELK_SERVICE_VERSION } from '../constants';\r\n\r\nconst serviceUrl: string | undefined = ELK_SERVICE_URL;\r\nconst serviceName: string | undefined = ELK_SERVICE_NAME;\r\nconst serviceVersion: string | undefined = ELK_SERVICE_VERSION;\r\n\r\nexport const initializeAPM = (active = true) => {\r\n    if(serviceUrl && serviceName){\r\n        initApm({\r\n            serviceName: serviceName,\r\n            serverUrl: serviceUrl,\r\n            environment: ENVIRONMENT,\r\n            serviceVersion: serviceVersion,\r\n            transactionSampleRate: (ENVIRONMENT === 'prod' ? 0.1 : 1.0),\r\n            active: active,\r\n        });\r\n    }\r\n};", "export const stopPropagation = (event: any) => {\r\n    event.stopPropagation();\r\n};", "const handleNumberCasting = (event: any, setFieldValue: (\r\n  field: string,\r\n  value: any,\r\n  shouldValidate?: boolean | undefined\r\n) => Promise<void> | Promise<any>) => {\r\n  const value = parseInt(event.target.value);\r\n  setFieldValue(event.target.name, value);\r\n  return value;\r\n}\r\n\r\nexport { handleNumberCasting }\r\n", "import { Dispatch, SetStateAction } from \"react\";\r\n\r\ninterface DragAndDropState {\r\n  available: any[];\r\n  selected: any[];\r\n  draggedItem: any;\r\n}\r\n\r\n/**\r\n * @hidden\r\n */\r\nconst moveItem = (from: number, to: number, data: Array<any>) => {\r\n  const f = data.splice(from, 1)[0];\r\n  data.splice(to, 0, f);\r\n  return data;\r\n};\r\n\r\n/**\r\n * Process the data collection/s based on the dragged and drop item.\r\n *\r\n * @param {T[]} listBoxOneData - The first data collection.\r\n * @param {T[]} listBoxTwoData - The second data collection. Pass an empty array if there is only one ListBox.\r\n * @param {any} dragItem - The item that was dragged.\r\n * @param {any} dropItem - The drop target item.\r\n * @param {string} valueField - The field which points to the unique value of each data item.\r\n * @returns {{listBoxOneData: T[], listBoxTwoData: t[]}} - The object that contains the new data collections.\r\n */\r\nconst processListBoxDragAndDrop = (\r\n  listBoxOneData: Array<any> = [],\r\n  listBoxTwoData: Array<any> = [],\r\n  dragItem: any,\r\n  dropItem: any,\r\n  valueField: string\r\n) => {\r\n  const dragItemIndexInFirstList = listBoxOneData.findIndex(item => item[valueField] === dragItem[valueField]);\r\n  const dragItemIndexInSecondList = listBoxTwoData.findIndex(item => item[valueField] === dragItem[valueField]);\r\n\r\n  const dropItemIndexInFirstList = dropItem !== null ? listBoxOneData.findIndex(item => item[valueField] === dropItem[valueField]) : -1;\r\n  const dropItemIndexInSecondList = dropItem !== null ? listBoxTwoData.findIndex(item => item[valueField] === dropItem[valueField]) : -1;\r\n\r\n  const isDragItemInFirstList =  dragItemIndexInFirstList >= 0 ? true : false;\r\n  const isDragItemInSecondList = dragItemIndexInSecondList >= 0 ? true : false;\r\n\r\n  const isDropItemInFirstList = dropItemIndexInFirstList >= 0 ? true : false;\r\n  const isDropItemInSecondList = dropItemIndexInSecondList >= 0 ? true : false;\r\n\r\n  const firstDataSet = [...listBoxOneData];\r\n  const secondDataSet = [...listBoxTwoData];\r\n\r\n  if (isDragItemInFirstList && isDropItemInFirstList) {\r\n      return {\r\n          listBoxOneData: moveItem(dragItemIndexInFirstList, dropItemIndexInFirstList, listBoxOneData),\r\n          listBoxTwoData\r\n      };\r\n  }\r\n  if (isDragItemInSecondList && isDropItemInSecondList) {\r\n      return {\r\n          listBoxOneData,\r\n          listBoxTwoData: moveItem(dragItemIndexInSecondList, dropItemIndexInSecondList, listBoxTwoData)\r\n      };\r\n  }\r\n  if (isDragItemInFirstList && (isDropItemInSecondList || dropItem === null)) {\r\n      if (dropItem === null) {\r\n          secondDataSet.push(listBoxOneData[dragItemIndexInFirstList]);\r\n      } else {\r\n          secondDataSet.splice(dropItemIndexInSecondList + 1, 0, listBoxOneData[dragItemIndexInFirstList]);\r\n      }\r\n      firstDataSet.splice(dragItemIndexInFirstList, 1);\r\n      return {\r\n          listBoxOneData: firstDataSet,\r\n          listBoxTwoData: secondDataSet\r\n      };\r\n  }\r\n  if (isDragItemInSecondList && (isDropItemInFirstList || dropItem === null)) {\r\n      if (dropItem === null) {\r\n          firstDataSet.push(listBoxTwoData[dragItemIndexInSecondList]);\r\n      } else {\r\n          firstDataSet.splice(dropItemIndexInFirstList + 1, 0, listBoxTwoData[dragItemIndexInSecondList]);\r\n      }\r\n      secondDataSet.splice(dragItemIndexInSecondList, 1);\r\n      return {\r\n          listBoxOneData: firstDataSet,\r\n          listBoxTwoData: secondDataSet\r\n      };\r\n  }\r\n  return {\r\n      listBoxOneData,\r\n      listBoxTwoData\r\n  };\r\n};\r\n\r\nconst handleDragStart = (\r\n  event: any,\r\n  setState: Dispatch<SetStateAction<DragAndDropState>>\r\n) => {\r\n  setState(oldState => ({ ...oldState, draggedItem: event.dataItem }));\r\n};\r\n\r\nconst handleDrop = (\r\n  event: any,\r\n  state: DragAndDropState,\r\n  setState: Dispatch<SetStateAction<DragAndDropState>>,\r\n  valueField: string\r\n) => {\r\n  const result = processListBoxDragAndDrop(\r\n    state.selected,\r\n    state.available,\r\n    state.draggedItem,\r\n    event.dataItem,\r\n    valueField\r\n  );\r\n  setState(oldState => ({\r\n    ...oldState,\r\n    selected: result.listBoxOneData,\r\n    available: result.listBoxTwoData\r\n  }));\r\n};\r\n\r\nexport { handleDragStart, handleDrop }\r\n", "const formatDateToLocale = (date?: string): string | undefined => {\r\n  return date ? (new Date(date)).toLocaleDateString() : date;\r\n}\r\n\r\nconst formatDateTimeToLocale = (date?: string): string | undefined => {\r\n  return date ? (new Date(date)).toLocaleString() : date;\r\n}\r\n\r\nexport {\r\n  formatDateToLocale,\r\n  formatDateTimeToLocale,\r\n}\r\n"],
  "mappings": "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",
  "names": ["APPLICATION_NAME", "APPLICATION_NAME_ID", "ENVIRONMENT", "ROOT_PATH", "RUM_BACK_OFFICE_API_URL", "VES_API_URL", "LOGIN_AUTHORITY", "LOGIN_CLIENT_ID", "ELK_SERVICE_URL", "ELK_SERVICE_NAME", "ELK_SERVICE_VERSION", "RumAppLoaderComponent", "isOpen", "jsx", "Fragment", "RaulPageLoader", "AppLoaderContext", "createContext", "AppLoaderProvider", "children", "isOpen", "setIsOpen", "useState", "show", "useCallback", "hide", "jsxs", "jsx", "RumAppLoaderComponent", "RumAsideComponent", "isOpen", "onClose", "size", "notDismissible", "asideNodes", "jsx", "RaulAside", "AsideContext", "createContext", "_aside", "AsideProvider", "children", "aside", "setAside", "useState", "isOpen", "setIsOpen", "addAside", "useCallback", "removeAside", "jsxs", "jsx", "RumAsideComponent", "RumModalComponent", "isOpen", "onClose", "modalNodes", "r", "RaulModal", "ModalContext", "createContext", "_modalNodes", "ModalProvider", "children", "modal", "setModal", "useState", "isOpen", "setIsOpen", "addModal", "useCallback", "modalNodes", "removeModal", "jsxs", "jsx", "RumModalComponent", "RumSnackbarComponent", "variant", "heading", "content", "timeout", "dismissible", "jsx", "RaulSnackbar", "urlAlphabet", "nanoid", "size", "id", "bytes", "scopedUrlAlphabet", "SnackbarContext", "createContext", "_snackbar", "SnackbarProvider", "children", "snackbarStack", "setSnackbarStack", "useState", "show", "useCallback", "snackbar", "state", "s", "jsx", "RaulSnackbarGroup", "item", "RumSnackbarComponent", "RumAppShell", "children", "jsx", "AppLoaderProvider", "SnackbarProvider", "ModalProvider", "AsideProvider", "e", "s", "o", "RumPreloader", "jsx", "styles", "RumContainerLoader", "small", "jsx", "RaulContainerLoader", "s", "e", "getClients", "axios", "VES_API_URL", "response", "getPropertiesByVesSitePmcId", "vesPmcId", "VesClientDropdown", "forwardRef", "label", "value", "placeholderText", "enableSearch", "searchPlaceholderText", "enableClearButton", "disabled", "onChange", "ref", "snackbar", "useContext", "SnackbarContext", "loading", "setLoading", "useState", "state", "setState", "handleSearch", "detail", "query", "results", "item", "oldState", "useImperativeHandle", "getClients", "response", "error", "useEffect", "jsxs", "RaulDropdown", "_a", "evt", "jsx", "RumContainerLoader", "RaulDropdownSearchInput", "Key", "Value", "RaulDropdownItem", "VesPropertyDropdown", "forwardRef", "label", "value", "placeholderText", "enableSearch", "searchPlaceholderText", "enableClearButton", "disabled", "onChange", "ref", "snackbar", "useContext", "SnackbarContext", "loading", "setLoading", "useState", "state", "setState", "handleSearch", "detail", "query", "results", "item", "oldState", "useImperativeHandle", "vesPmcId", "getPropertiesByVesSitePmcId", "response", "error", "useEffect", "jsxs", "RaulDropdown", "_a", "evt", "jsx", "RumContainerLoader", "RaulDropdownSearchInput", "VesSiteId", "SiteName", "RaulDropdownItem", "RumContainerLoaderShell", "loading", "children", "jsx", "RumContainerLoader", "RumNoDataSection", "title", "description", "showImage", "actionLabel", "action", "r", "jsxs", "jsx", "RaulButton", "RumPageHeader", "title", "description", "breadcrumbs", "headerActions", "tabs", "tabsPane", "jsxs", "Fragment", "jsx", "RaulBreadcrumbs", "path", "text", "i", "RaulBreadcrumb", "Link", "RaulEyebrow", "fieldsData", "useApplicationFields", "fieldId", "item", "data", "userData", "useUserData", "data", "userName", "contentId", "getApplicationToken", "applicationNameId", "authHeaders", "axios", "RUM_BACK_OFFICE_API_URL", "getApplicationFields", "response", "OmnibarShell", "authContext", "menuItems", "children", "userProfile", "_a", "navigate", "useNavigate", "shellRef", "useRef", "navRef", "isUrlValid", "url", "handleNavigate", "e", "item", "createSearchParams", "Buffer", "handleLogout", "useEffect", "_b", "jsxs", "ENVIRONMENT", "ROOT_PATH", "jsx", "APPLICATION_NAME", "RumAuthProvider", "authContext", "menuItems", "children", "onLoad", "setUserData", "useUserData", "setFieldsData", "useApplicationFields", "navigate", "useNavigate", "searchParams", "useSearchParams", "isLoading", "setIsLoading", "useState", "checkOidcLoginState", "queryToken", "token", "_a", "microQueryString", "getApplicationToken", "APPLICATION_NAME_ID", "response", "userName", "contentId", "setAuthToken", "getApplicationFields", "n", "data", "error", "queryParams", "item", "useEffect", "a", "L", "jsx", "RaulContainerLoader", "OmnibarShell", "RumFieldTooltip", "fieldId", "placement", "className", "slot", "appFieldsRef", "useApplicationFields", "o", "l", "jsx", "RaulTooltip", "_a", "RaulIcon", "RumFormInputError", "touched", "error", "jsx", "RaulInputHelperList", "RaulInputHelperListItem", "RumIframePage", "searchParams", "useSearchParams", "frameInfo", "iframUrl", "Buffer", "o", "styles", "RumPageNotFound", "navigate", "useNavigate", "r", "jsxs", "jsx", "RaulButton", "RumUnauthorizedPage", "r", "jsxs", "jsx", "RaulButton", "ROOT_PATH", "freeGlobal", "global", "freeGlobal$1", "freeSelf", "root", "root$1", "Symbol", "Symbol$2", "objectProto", "hasOwnProperty", "nativeObjectToString", "symToStringTag", "getRawTag", "value", "isOwn", "tag", "unmasked", "result", "objectToString", "nullTag", "undefinedTag", "baseGetTag", "isObjectLike", "symbolTag", "isSymbol", "reWhitespace", "trimmedEndIndex", "string", "index", "reTrimStart", "baseTrim", "isObject", "type", "NAN", "reIsBadHex", "reIsBinary", "reIsOctal", "freeParseInt", "toNumber", "other", "isBinary", "now", "now$1", "FUNC_ERROR_TEXT", "nativeMax", "nativeMin", "debounce", "func", "wait", "options", "lastArgs", "lastThis", "maxWait", "timerId", "lastCallTime", "lastInvokeTime", "leading", "maxing", "trailing", "invokeFunc", "time", "args", "thisArg", "leadingEdge", "timerExpired", "remainingWait", "timeSinceLastCall", "timeSinceLastInvoke", "timeWaiting", "shouldInvoke", "trailingEdge", "cancel", "flush", "debounced", "isInvoking", "useDebounce", "callback", "timeout", "ref", "useRef", "useEffect", "useMemo", "_a", "filePathToFileName", "fileUrl", "origin", "cleanFilePath", "filePath", "isFileInline", "normalizeStackFrames", "stackFrames", "frame", "normalizeFunctionName", "fnName", "parts", "isValidStackTrace", "stackTraces", "stackTrace", "createStackTraces", "stackParser", "errorEvent", "error", "filename", "lineno", "colno", "normalizedStackTraces", "stack", "fileName", "lineNumber", "columnNumber", "_stack$functionName", "functionName", "cleanedFileName", "filterInvalidFrames", "frames", "_ref", "finallyConstructor", "callback", "constructor", "value", "reason", "allSettled", "arr", "P", "resolve", "reject", "args", "remaining", "res", "i", "val", "then", "e", "AggregateError", "errors", "message", "any", "rejectionReasons", "ex", "setTimeoutFunc", "isArray", "x", "noop", "bind", "fn", "thisArg", "Promise", "doResolve", "handle", "self", "deferred", "cb", "ret", "newValue", "finale", "len", "Handler", "onFulfilled", "onRejected", "promise", "done", "prom", "promiseFinally", "err", "local", "isBrowser", "PromisePollyfill", "slice", "PERF", "isCORSSupported", "xhr", "byteToHex", "bytesToHex", "buffer", "hexOctets", "_i", "destination", "rng", "generateRandomId", "length", "id", "getDtHeaderValue", "span", "dtVersion", "dtUnSampledFlags", "dtSampledFlags", "flags", "parseDtHeaderValue", "parsed", "sampled", "isDtHeaderValid", "header", "getTSHeaderValue", "sampleRate", "NAMESPACE", "SEPARATOR", "setRequestHeader", "target", "name", "checkSameOrigin", "source", "isSame", "t", "isPlatformSupported", "setLabel", "key", "obj", "skey", "removeInvalidChars", "valueType", "getServerTimingInfo", "serverTimingEntries", "serverTimingInfo", "entrySeparator", "valueSeparator", "_i2", "_serverTimingEntries$", "duration", "description", "timingValue", "stripQueryStringFromUrl", "url", "isObject", "isFunction", "baseExtend", "dst", "objs", "deep", "ii", "keys", "j", "jj", "src", "getElasticScript", "scripts", "l", "sc", "getCurrentScript", "currentScript", "extend", "merge", "isUndefined", "getLatestSpan", "spans", "typeFilter", "latestSpan", "_i3", "getLatestNonXHRSpan", "type", "getLatestXHRSpan", "getEarliestSpan", "earliestSpan", "_i4", "now", "getTime", "time", "getDuration", "start", "end", "scheduleMicroTask", "isPerfTimelineSupported", "isPerfTypeSupported", "isPerfInteractionCountSupported", "isBeaconInspectionEnabled", "flagName", "parsedUrl", "isFlagSet", "isRedirectInfoAvailable", "timing", "isDefaultPort", "port", "protocol", "RULES", "PROTOCOL_REGEX", "Url", "_this$extractProtocol", "address", "slashes", "relative", "location", "instructions", "index", "instruction", "parse", "instLength", "newIndex", "hostname", "_proto", "result", "REDACTED", "userpass", "username", "password", "globalVar", "match", "slugifyUrl", "urlStr", "depth", "query", "path", "pathParts", "redactString", "wildcard", "specialCharsRegex", "digitsRegex", "lowerCaseRegex", "upperCaseRegex", "redactedParts", "redactedBefore", "part", "numberOfSpecialChars", "numberOfDigits", "numberofUpperCase", "numberofLowerCase", "lowerCaseRate", "upperCaseRate", "redacted", "SCHEDULE", "INVOKE", "ADD_EVENT_LISTENER_STR", "RESOURCE_INITIATOR_TYPES", "REUSABILITY_THRESHOLD", "MAX_SPAN_DURATION", "PAGE_LOAD_DELAY", "PAGE_LOAD", "ROUTE_CHANGE", "TYPE_CUSTOM", "USER_INTERACTION", "HTTP_REQUEST_TYPE", "TEMPORARY_TYPE", "NAME_UNKNOWN", "PAGE_EXIT", "TRANSACTION_TYPE_ORDER", "OUTCOME_SUCCESS", "OUTCOME_FAILURE", "OUTCOME_UNKNOWN", "USER_TIMING_THRESHOLD", "TRANSACTION_START", "TRANSACTION_END", "CONFIG_CHANGE", "QUEUE_FLUSH", "QUEUE_ADD_TRANSACTION", "TRANSACTION_IGNORE", "XMLHTTPREQUEST", "FETCH", "HISTORY", "EVENT_TARGET", "CLICK", "ERROR", "BEFORE_EVENT", "AFTER_EVENT", "LOCAL_CONFIG_KEY", "LONG_TASK", "PAINT", "MEASURE", "NAVIGATION", "RESOURCE", "FIRST_CONTENTFUL_PAINT", "LARGEST_CONTENTFUL_PAINT", "FIRST_INPUT", "LAYOUT_SHIFT", "EVENT", "ERRORS", "TRANSACTIONS", "CONFIG_SERVICE", "LOGGING_SERVICE", "TRANSACTION_SERVICE", "APM_SERVER", "PERFORMANCE_MONITORING", "ERROR_LOGGING", "TRUNCATED_TYPE", "KEYWORD_LIMIT", "SESSION_TIMEOUT", "HTTP_REQUEST_TIMEOUT", "_excluded", "_objectWithoutPropertiesLoose", "excluded", "sourceKeys", "LEFT_SQUARE_BRACKET", "RIGHT_SQUARE_BRACKET", "EXTERNAL", "HARD_NAVIGATION", "getPortNumber", "getResponseContext", "perfTimingEntry", "transferSize", "encodedBodySize", "decodedBodySize", "serverTiming", "respContext", "serverTimingStr", "getDestination", "portNumber", "ipv6Hostname", "getResourceContext", "data", "entry", "getExternalContext", "method", "response", "context", "statusCode", "getNavigationContext", "getPageContext", "addSpanContext", "addTransactionContext", "transaction", "_temp", "configContext", "pageContext", "responseContext", "entries", "METADATA_MODEL", "RESPONSE_MODEL", "DESTINATION_MODEL", "CONTEXT_MODEL", "SPAN_MODEL", "TRANSACTION_MODEL", "ERROR_MODEL", "truncate", "limit", "required", "placeholder", "isEmpty", "replaceValue", "currModel", "truncateModel", "model", "childTarget", "emptyArr", "_loop", "currKey", "root", "factory", "module", "this", "_isNumber", "n", "StackFrame", "v", "require$$0", "FIREFOX_SAFARI_STACK_REGEXP", "CHROME_IE_STACK_REGEXP", "SAFARI_NATIVE_CODE_REGEXP", "_map", "array", "output", "_filter", "_indexOf", "urlLike", "regExp", "filtered", "line", "tokens", "locationParts", "lineRE", "lines", "functionCall", "argsRaw", "IGNORE_KEYS", "PROMISE_REJECTION_PREFIX", "getErrorProperties", "propertyFound", "properties", "ErrorLogging", "apmServer", "configService", "transactionService", "filteredFrames", "culprit", "lastFrame", "errorMessage", "errorType", "errorContext", "customProperties", "currentTransaction", "transactionContext", "_this$_configService$", "errorObject", "_this", "promiseRejectionEvent", "messageOrError", "ErrorLogging$1", "Queue", "onFlush", "opts", "item", "Queue$1", "throttle", "onThrottle", "interval", "counter", "timeoutId", "NDJSON", "object", "NDJSON$1", "NAVIGATION_TIMING_MARKS", "COMPRESSED_NAV_TIMING_MARKS", "getPageLoadMarks", "marks", "getNavigationTimingMarks", "redirectStart", "fetchStart", "navigationStart", "responseStart", "responseEnd", "timingKey", "m", "compressStackFrames", "compressResponse", "compressHTTP", "http", "compressed", "status_code", "compressContext", "page", "user", "custom", "service", "compressMarks", "compressedNtMarks", "compressNavigationTimingMarks", "compressAgentMarks", "ntMarks", "mark", "mapping", "agentMarks", "fp", "lp", "compressMetadata", "metadata", "labels", "agent", "language", "compressTransaction", "spanData", "tr", "compressMetricsets", "_transaction$experien", "cls", "fid", "tbt", "longtask", "_transaction$session", "sequence", "compressError", "exception", "breakdowns", "samples", "compressPayload", "params", "isCompressionStreamSupported", "payload", "headers", "beforeSend", "payloadStream", "compressedStream", "getDefaultExportFromCjs", "browser", "process", "cachedSetTimeout", "cachedClearTimeout", "defaultSetTimout", "defaultClearTimeout", "runTimeout", "fun", "runClearTimeout", "marker", "queue", "draining", "currentQueue", "queueIndex", "cleanUpNextTick", "drainQueue", "timeout", "Item", "dir", "browserExports", "process$1", "__DEV__", "state", "isResponseSuccessful", "status", "_extends", "BYTE_LIMIT", "shouldUseFetchWithKeepAlive", "isFetchSupported", "isKeepAliveSupported", "size", "calculateSize", "sendFetchRequest", "_ref$keepalive", "keepalive", "_ref$timeout", "sendCredentials", "timeoutConfig", "controller", "fetchResponse", "responseText", "bodyResponse", "globalState", "apmSymbol", "isPropertyWritable", "propertyDesc", "attachOriginToPatched", "patched", "original", "patchMethod", "patchFn", "proto", "delegateName", "delegate", "desc", "patchDelegate", "XHR_IGNORE", "XHR_SYNC", "XHR_URL", "XHR_METHOD", "sendXHR", "canSend", "THROTTLE_INTERVAL", "ApmServer", "loggingService", "queueLimit", "flushInterval", "events", "endPoint", "_this2", "apmRequest", "serverErrors", "_ref2", "_ref2$timeout", "serviceName", "environment", "_this3", "_this$getEndpoints", "configEndpoint", "localConfig", "remoteConfig", "etag", "cfg", "_this$throttleEvents", "_this$throttleEvents2", "compress", "_NDJSON$stringify", "metricsets", "metricset", "transactions", "_this4", "_NDJSON$stringify2", "_payload", "_NDJSON$stringify3", "event", "filteredPayload", "apiVersion", "ndjson", "metadataKey", "ndjsonPayload", "_this$getEndpoints2", "intakeEndpoint", "serverUrl", "serverUrlPrefix", "ApmServer$1", "EventHandler", "obs", "EventHandler$1", "getConfigFromScript", "script", "config", "getDataAttributesFromNode", "node", "dataAttrs", "dataRegex", "attrs", "attr", "camelCasedkey", "Config", "scriptData", "version", "objKey", "userContext", "_userContext", "email", "customContext", "tags", "k", "_properties", "transactionSampleRate", "requiredKeys", "allKeys", "storage", "prevConfig", "ConfigService", "LoggingService", "spec", "level", "log", "normalizedLevel", "realMethod", "LoggingService$1", "_serviceCreators", "serviceCreators", "_factory$getService", "ServiceFactory", "_this$getService", "logLevel", "registerServices", "serviceFactory", "_serviceFactory$getSe", "patchXMLHttpRequest", "XMLHttpRequestPrototype", "READY_STATE_CHANGE", "LOAD", "TIMEOUT", "ABORT", "invokeTask", "task", "scheduleTask", "addListener", "openNative", "sendNative", "patchFetch", "handleResponseError", "isAbortError", "readStream", "stream", "reader", "read", "nativeFetch", "input", "init", "fetchSelf", "request", "isURL", "clonedResponse", "body", "patchHistory", "nativePushState", "title", "patchEventHandler", "alreadyPatched", "patchAll", "SIMILAR_SPAN_TO_TRANSACTION_RATIO", "TRANSACTION_DURATION_THRESHOLD", "groupSmallContinuouslySimilarSpans", "originalSpans", "transDuration", "threshold", "spanA", "spanB", "lastCount", "lastSpan", "isContinuouslySimilar", "isLastSpan", "adjustTransaction", "filterdSpans", "similarSpans", "PerformanceMonitoring", "endpoints", "isOwnEndpoint", "endpoint", "requestUrl", "spanName", "isDtEnabled", "dtOrigins", "currentUrl", "isSameOrigin", "propagateTracestate", "_data", "_span", "_target", "outcome", "headerName", "headerValue", "isHeaderValid", "transactionStart", "transactionData", "adjustedTransaction", "SpanBase", "options", "ctx", "_len", "_key", "endTime", "SpanBase$1", "_inheritsLoose", "subClass", "superClass", "_setPrototypeOf", "o", "p", "Span", "_SpanBase", "fields", "Span$1", "pageLoadBreakdowns", "getValue", "calculateSelfTime", "_start", "_end", "span1", "span2", "spanEnd", "spanStart", "lastContinuousEnd", "selfTime", "groupSpans", "spanMap", "transactionSelfTime", "subtype", "getSpanBreakdown", "transactionDetails", "details", "_ref$count", "count", "captureBreakdown", "timings", "current", "_key$split", "_spanMap$key", "Transaction", "markTime", "trc", "sid", "_captureBreakdown", "flag", "taskId", "deleted", "Transaction$1", "metrics", "LONG_TASK_THRESHOLD", "createLongTaskSpans", "longtasks", "agg", "_longtasks$i", "startTime", "attribution", "_attribution$", "_name", "containerType", "containerName", "containerId", "createFirstInputDelaySpan", "fidEntries", "firstInput", "processingStart", "createTotalBlockingTimeSpan", "tbtObject", "tbtSpan", "calculateTotalBlockingTime", "longtaskEntries", "blockingTime", "calculateCumulativeLayoutShift", "clsEntries", "shouldCreateNewSession", "captureObserverEntries", "list", "isHardNavigation", "trStart", "longTaskSpans", "lcpEntries", "lastLcpEntry", "lcp", "unloadDiff", "fcpEntry", "fcp", "fidSpan", "PerfEntryRecorder", "shouldCreateSpan", "trEnd", "baseTime", "eventPairs", "createNavigationTimingSpans", "createUserTimingSpans", "userTimingSpans", "_entries$i", "kind", "createResourceTimingSpan", "resourceTimingEntry", "initiatorType", "isCapturedByPatching", "resourceStartTime", "requestPatchTime", "isIntakeAPIEndpoint", "createResourceTimingSpans", "captureNavigation", "customMarks", "_trStart", "resourceEntries", "userEntries", "TransactionService", "logger", "_tr$spans", "_captureObserverEntri", "presetOptions", "perfOptions", "isRedefined", "redefineType", "currentTypeOrder", "redefineTypeOrder", "fireOnstartHook", "lastHiddenStart", "pageLoadTransactionName", "breakdownMetrics", "session", "sessionConfig", "latestSpanEnd", "transactionEndWithoutDelay", "latestXHRSpan", "latestXHRSpanEnd", "transactionEnd", "transactionName", "ignoreList", "element", "TransactionService$1", "INP_THRESHOLD", "MAX_INTERACTIONS_TO_CONSIDER", "inpState", "observeUserInteractions", "recorder", "processUserInteractions", "isPerfCountSupported", "durationThreshold", "updateInteractionCount", "storeUserInteraction", "calculateInp", "interactionCount", "interactionIndex", "inp", "restoreINPState", "leastSlow", "filteredInteraction", "interaction", "foundInteraction", "a", "b", "reportInp", "inpTr", "navigations", "hardNavigationUrl", "_serviceFactory$getSe2", "observePageVisibility", "visibilityChangeHandler", "onPageHidden", "pageHideHandler", "useCapture", "unobserve", "endManagedTransaction", "unobserveDiscard", "unobserveQueueAdd", "INTERACTIVE_SELECTOR", "observePageClicks", "clickHandler", "createUserInteractionTransaction", "eventName", "_getTransactionMetada", "getTransactionMetadata", "buildTransactionName", "classes", "dtName", "findCustomTransactionName", "tagName", "trCustomNameAttribute", "fallbackName", "getInstrumentationFlags", "instrument", "disabledInstrumentations", "_flags", "enabled", "bootstrap", "createServiceFactory", "registerPerfServices", "registerErrorServices", "ApmBase", "disable", "_this$serviceFactory$", "isConfigActive", "performanceMonitoring", "errorLogging", "sendPageLoad", "_this$serviceFactory$2", "_config2", "_configService$valida", "invalid", "_invalid$", "allowed", "sendPageLoadMetrics", "_config", "_this$serviceFactory$3", "_configService$valida2", "missing", "unknown", "separator", "_message", "getApmBase", "apmBase", "serviceUrl", "ELK_SERVICE_URL", "ELK_SERVICE_NAME", "serviceVersion", "ELK_SERVICE_VERSION", "initializeAPM", "active", "initApm", "ENVIRONMENT", "stopPropagation", "event", "handleNumberCasting", "event", "setFieldValue", "value", "moveItem", "from", "to", "data", "f", "processListBoxDragAndDrop", "listBoxOneData", "listBoxTwoData", "dragItem", "dropItem", "valueField", "dragItemIndexInFirstList", "item", "dragItemIndexInSecondList", "dropItemIndexInFirstList", "dropItemIndexInSecondList", "isDragItemInFirstList", "isDragItemInSecondList", "isDropItemInFirstList", "isDropItemInSecondList", "firstDataSet", "secondDataSet", "handleDragStart", "event", "setState", "r", "oldState", "handleDrop", "state", "result", "formatDateToLocale", "date", "formatDateTimeToLocale"]
}
